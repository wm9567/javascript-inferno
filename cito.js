var cito=window.cito||{};!function(e,n,t){"use strict";function r(e){return"string"==typeof e}function i(e){return e instanceof Array}function a(e){return"function"==typeof e}function o(e){return e.then!==t}function l(e,n){var r=typeof e;return"string"===r?e={tag:"#",children:e}:"function"===r&&(e=e(n),e=e===t?n:l(e,n)),e}function f(e,n,t){var r,i=e[n];if(i&&o(i)){r={};var a=!0;i.then(function(i){a?r=l(i,t):e[n]===r&&un.update(r,i)}),a=!1}else r=l(i,t);return i!==r&&(e[n]=r),r}function d(e,n,r){var l=n;if(n)if(o(n)){n=[];var f=!0;l.then(function(t){f?n=d(e,t,r):e.children===n&&un.updateChildren(e,t)}),f=!1}else a(n)&&(n=n(r),n===t&&(n=r));var s,c,u=i(n);return u?1===n.length?(s=!0,c=n[0]):s=!1:(s=!0,c=n),s&&(c&&(c.children||"#"!==c.tag&&"<"!==c.tag)?u||(n=[c]):n=[]),l!==n&&(e.children=n),n}function s(e,n,t){var r,i=n.dom,a=n.domLength||1,o=t&&t.dom;if(i!==o)for(;a--;)r=a>0?i.nextSibling:null,o?e.insertBefore(i,o):e.appendChild(i),i=r}function c(e,n,t){if(e.insertAdjacentHTML){var r,i,a;if(Q||U){var o="beforebegin"===n?e.previousSibling:"beforeend"===n?e.lastChild:null;o&&3===o.nodeType&&(r=o,U&&0===o.length&&(a=!0,o.nodeValue=" "),Q&&(i=o.length))}e.insertAdjacentHTML(n,t),r&&(Q&&r.length!==i&&r.splitText(i),U&&a&&(r.nodeValue=""))}else{var l;if(rn.innerHTML=t,"beforebegin"===n)for(var f=e.parentNode;l=rn.firstChild;)f.insertBefore(l,e);else if("beforeend"===n)for(;l=rn.firstChild;)e.appendChild(l)}}function u(e,n,t,r){if(t){var i=t.dom;if(r){var a=t.domLength||1;1===a?(F(t),e.replaceChild(n,i)):(e.insertBefore(n,i),j(e,t))}else e.insertBefore(n,i)}else e.appendChild(n)}function v(e,n,t,r,i,a){if(tn)return h(e,n,i,a);var o,l=e.tag,f=e.children;if(l){switch(l){case"#":o=X.createTextNode(f);break;case"!":o=X.createComment(f);break;case"<":if(f){var s=n.childNodes,v=s.length;if(i){var g=i.dom,m=g.previousSibling;c(g,"beforebegin",f),o=m?m.nextSibling:n.firstChild}else c(n,"beforeend",f),o=s[v];return e.dom=o,e.domLength=s.length-v,void(a&&i&&j(n,i))}o=X.createTextNode("");break;default:var p;switch(l){case"svg":p="http://www.w3.org/2000/svg";break;case"math":p="http://www.w3.org/1998/Math/MathML";break;default:p=t}return p?(e.ns=p,o=X.createElementNS(p,l)):o=X.createElement(l),e.dom=o,f=d(e,f),tn&&n&&u(n,o,i,a),H(o,e,p,f,0,f.length,f.length>1),T(o,null,null,e,l,e.attrs,e.events),void(!tn&&n&&u(n,o,i,a))}e.dom=o,n&&u(n,o,i,a)}else k(e,f,n,t,r,i,a)}function h(e,n,t,r){var i,a=g(e);if(n){var o;t||n.hasChildNodes()?(t?(o=t.dom.previousSibling,c(t.dom,"beforebegin",a),r&&j(n,t)):(o=n.lastChild,c(n,"beforeend",a)),i=o?o.nextSibling:n.firstChild):(n.innerHTML=a,i=n.firstChild)}else rn.innerHTML=a,i=rn.removeChild(rn.firstChild);if(e.tag)m(i,e,0);else{for(var l=n.firstChild,f=0;l!==i;)l=l.nextSibling,f++;p(n,e,f)}}function g(e,n){var i=e.tag,a=e.children;switch(i){case"#":return b(a)+sn;case"!":return"<!--"+x(a)+"-->";case"<":return a+sn;default:var o;if(i){var l=e.attrs;if("select"===i&&l?n={selectedIndex:l.selectedIndex,value:l.value,optionIndex:0}:"option"===i&&n&&((n.value&&n.value===l.value||n.selectedIndex!==t&&n.selectedIndex===n.optionIndex)&&(l.selected=!0),n.optionIndex++),o="<"+i,l){o+=" ";for(var s in l){var c=l[s];if(c!==!1&&("select"!==i||"value"!==s&&"selectedIndex"!==s))if("textarea"!==i||"value"!==s){if(c===!0)c="";else if("style"===s&&!r(c)){var u="";for(var v in c)u+=v+": "+c[v]+"; ";c=u}o+=" "+y(s,c)}else a=c}}}else o="";a=d(e,a);var h=a.length;if(i&&(o+=">"),1===h&&r(a[0]))o+=b(a[0]),i||(o+=sn);else if(0!==h||i)for(var m=0;h>m;m++)o+=g(f(a,m),n);else o+=sn;return i&&(o+="</"+i+">"),o}}function m(e,n,t){n.dom=e;var i,a;switch(n.tag){case"#":i=e.nodeValue,a=i.indexOf(sn),-1!==a&&(a+1<i.length&&e.splitText(a+1),e.nodeValue=i.substr(0,a));break;case"!":break;case"<":for(var o=0;e;e=e.nextSibling)if(o++,3===e.nodeType)if(i=e.nodeValue,o>1&&i===sn)e.parentNode.removeChild(e),o--;else if(a=i.indexOf(sn),-1!==a){a+1<i.length&&e.splitText(a+1),e.nodeValue=i.substr(0,a);break}return n.domLength=o,t+o;default:var l=n.children,f=l.length;if(1!==f||!r(l[0]))for(var d=e.childNodes,s=0,c=0;f>s;s++){var u=l[s];c=u.tag?m(d[c],u,c):p(e,u,c)}var v=n.events;v&&w(e,n,v)}return t+1}function p(e,n,t){var r=n.children,i=e.childNodes;if(0===r.length){var a=i[t];a.length>1&&a.splitText(1),a.nodeValue="",n.dom=a,t++}else{1===r.length&&f(r,0);for(var o=t,l=0;l<r.length;l++){var d=r[l];t=d.tag?m(i[t],d,t):p(e,d,t)}n.dom=r[0].dom,n.domLength=t-o}return t}function b(e){return e=""+e,en?(rn.innerText=e,e=rn.innerHTML):e=nn?e.split("<").join("&lt;").split(">").join("&gt;").split("&").join("&amp;"):e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;"),e}function x(e){return e=""+e,e.replace(/-{2,}/g,"-")}function y(e,n){var t=typeof n;return n=""+n,"number"!==t&&(n=nn?n.split('"').join("&quot;").split("&").join("&amp;"):n.replace(/"/g,"&quot;").replace(/&/g,"&amp;")),e+'="'+n+'"'}function k(e,n,t,r,i,a,o){n=d(e,n);var l,s,c=n.length;if(r&&(e.ns=r),0===c)l=X.createTextNode(""),u(t,l,a,o);else{i=i||c>1,s=0;for(var h=0;c>h;h++){var g=f(n,h);v(g,t,r,i,a,!1),s+=g.domLength||1}l=n[0].dom,o&&j(t,a)}e.dom=l,e.domLength=s}function T(e,n,r,i,a,o,l){var f;if(o)for(f in o){var d=o[f];if("style"===f){var s=n&&n[f];s!==d&&L(e,s,o,d)}else"class"===f?e.className=d:N(a,f)?e[f]!==d&&(e[f]=d):n&&n[f]===d||C(e,f,d)}if(n)for(f in n)o&&o[f]!==t||("class"===f?e.className="":N(a,f)||e.removeAttribute(f));if(l&&w(e,i,l,r),r)for(var c in r)l&&l[c]||A(e,c)}function C(e,n,t){if(t===!1)e.removeAttribute(n);else{t===!0&&(t="");var r,i=n.indexOf(":");if(-1!==i){var a=n.substr(0,i);switch(a){case"xlink":r="http://www.w3.org/1999/xlink"}}r?e.setAttributeNS(r,n,t):e.setAttribute(n,t)}}function L(e,n,i,a){var o;if(!(r(a)||fn&&n&&!r(n))){var l="";if(a)for(o in a)l+=o+": "+a[o]+"; ";a=l,fn||(i.style=a)}var f=e.style;if(r(a))f.cssText=a;else{if(a)for(o in a){var d=a[o];if(!n||n[o]!==d){var s=d.indexOf("!important");if(-1!==s)f.setProperty(o,d.substr(0,s),"important");else{if(n){var c=n[o];c&&-1!==c.indexOf("!important")&&f.removeProperty(o)}f.setProperty(o,d,"")}}}if(n)for(o in n)a&&a[o]!==t||f.removeProperty(o)}}function w(e,n,t,r){e.virtualNode=n;for(var i in t)r&&r[i]||M(e,i)}function N(e,n){switch(e){case"input":return"value"===n||"checked"===n;case"textarea":return"value"===n;case"select":return"value"===n||"selectedIndex"===n;case"option":return"selected"===n}}function M(e,n){if(on)e.addEventListener(n,O,!1);else{var t="on"+n;t in e?e[t]=O:e.attachEvent(t,O)}}function A(e,n){if(on)e.removeEventListener(n,O,!1);else{var t="on"+n;t in e?e[t]=null:e.detachEvent(t,O)}}function E(e){return r(e)?e:"#"===e.tag?e.children:null}function H(e,n,t,r,i,a,o,l){if(0===i&&1===a&&!o){var d=r[0],s=E(d);if(null!==s)return void I(e,s);if("<"===d.tag)return void(e.innerHTML=d.children)}for(;a>i;i++)v(f(r,i),e,t,o,l)}function S(e,n,t,r){if(0===t&&1===r&&1===n.length){var i=n[0];if(!i.dom){for(var a;a=e.firstChild;)e.removeChild(a);return}}for(;r>t;t++)j(e,n[t])}function j(e,n){F(n);for(var t,r=n.dom,i=n.domLength||1;i--;)t=i>0?r.nextSibling:null,e.removeChild(r),r=t}function I(e,n){an?e.textContent=n:e.innerText=n}function P(e,n,t,r){var i=r[0],a=n[0],o=E(i),l=0!==t,f=!1;if(null!==o){if(!l){var d=E(a);f=null!==d,l=o!==d}l&&(f||G(n),I(e,o))}else"<"===i.tag?(l||(f="<"===a.tag,l=!f||i.children!==a.children),l&&(f||G(n),e.innerHTML=i.children)):l=!1;return l||f}function V(e,n,t,r,i,a,o){if(i=d(n,i,r),i!==r){var l=r.length-1,c=i.length-1;if(a=a||c>0,0!==c||a||!P(e,r,l,i)){if(0===l){var u=f(r,0);u.dom||(u.dom=e.firstChild,"<"===u.tag&&(u.domLength=e.childNodes.length))}var h,g=0,m=0,p=!0;e:for(;p&&l>=g&&c>=m;){p=!1;var b,x,y,k;for(b=r[g],y=f(i,m,b);b.key===y.key;){if(h=r[g+1]||o,W(b,y,e,t,a,h),g++,m++,g>l||m>c)break e;b=r[g],y=f(i,m,b),p=!0}for(x=r[l],k=f(i,c);x.key===k.key;){if(h=i[c+1]||o,W(x,k,e,t,a,h),l--,c--,g>l||m>c)break e;x=r[l],k=f(i,c),p=!0}for(;b.key===k.key;){if(h=i[c+1]||o,W(b,k,e,t,a,h),s(e,k,h),g++,c--,g>l||m>c)break e;b=r[g],k=f(i,c),p=!0}for(;x.key===y.key;){if(h=r[g]||o,W(x,y,e,t,h),s(e,y,h),l--,m++,g>l||m>c)break e;x=r[l],y=f(i,m),p=!0}}if(g>l)h=f(i,c+1)||o,H(e,n,t,i,m,c+1,a,h);else if(m>c)S(e,r,g,l+1);else{var T,C,L=r[l+1],w={};for(T=l;T>=g;T--)C=r[T],C.next=L,w[C.key]=C,L=C;for(h=f(i,c+1)||o,T=c;T>=m;T--){var N=i[T],M=N.key;C=w[M],C?(w[M]=null,L=C.next,W(C,N,e,t,a,h),(L&&L.key)!==(h&&h.key)&&s(e,N,h)):v(N,e,t,a,h),h=N}for(T=g;l>=T;T++)C=r[T],null!==w[C.key]&&j(e,C)}}}}function O(e){e=R(e,this);var n=e.currentTarget,t=n.virtualNode.events[e.type];if(i(t)){for(var r=0,a=t.length;a>r;r++)if(K(t[r],n,e),cn){cn=!1;break}}else K(t,n,e)}function B(){this.defaultPrevented=!0,this.returnValue=!1}function D(){this.cancelBubble=!0}function q(){cn=!0,this.stopPropagation()}function R(e,t){return e||(e=n.event,e.preventDefault||(e.preventDefault=B,e.stopPropagation=D,e.defaultPrevented=e.returnValue===!1,e.target=e.srcElement),e.currentTarget=t.nodeType?t:e.target),e.stopImmediatePropagation=q,e}function K(e,n,t){try{e.call(n,t)===!1&&t.preventDefault()}catch(r){$.error(r.stack||r)}}function W(e,n,t,r,i,a){if(n!==e){var o,l=n.tag,f=e.children,d=n.children;if(e.tag!==l)v(n,t,r,i,e,!0);else if(l)switch(o=e.dom,l){case"#":case"!":f!==d&&(o.nodeValue=d),n.dom=o;break;case"<":f!==d?v(n,t,s,i,e,!0):(n.dom=e.dom,n.domLength=e.domLength);break;default:var s=e.ns;s&&(n.ns=s),n.dom=o,V(o,n,s,f,d,!1),T(o,e.attrs,e.events,n,l,n.attrs,n.events)}else z(e,f,n,d,t,r,i,a)}}function z(e,n,t,r,i,a,o,l){if(r=d(t,r,n),r!==n){var f,s,c=n.length,v=r.length;if(a&&(t.ns=a),o=o||v>1,0===v)0===c?f=e.dom:(S(i,n,0,n.length),f=X.createTextNode(""),u(i,f,l));else if(0===c)i.removeChild(e.dom),k(t,r,i,a,o,l);else if(V(i,t,a,n,r,o,l),v>0){f=r[0].dom,s=0;for(var h=0;v>h;h++)s+=r[h].domLength||1}t.dom=f,t.domLength=s}}function F(e){if(!r(e)){var n=e.dom;if(n){var i=e.events;if(i)for(var a in i)A(n,a);n.virtualNode&&(n.virtualNode=t)}var o=e.children;r(o)||G(o)}}function G(e){for(var n=0,t=e.length;t>n;n++)F(e[n])}function J(e,n){var r;for(r in e)n[r]=e[r];for(r in n)e[r]===t&&(n[r]=t)}var Q,U,X=n.document,Y=n.navigator,Z=function(){},$=n.console||{warn:Z,error:Z},_=Y.userAgent,en=-1!==_.indexOf("WebKit"),nn=-1!==_.indexOf("Chrome"),tn=-1!==_.indexOf("Trident"),rn=X.createElement("div"),an="textContent"in X,on="addEventListener"in X,ln="createRange"in X,fn="setProperty"in rn.style,dn=X.createElement("p");dn.insertAdjacentHTML&&(dn.appendChild(X.createTextNode("a")),dn.insertAdjacentHTML("beforeend","b"),Q=1===dn.childNodes.length,dn=X.createElement("p"),dn.appendChild(X.createTextNode("")),dn.insertAdjacentHTML("beforeend","<b>"),U=3!==dn.firstChild.nodeType);var sn="",cn=(ln?X.createRange():null,!1),un=e.vdom={create:function(e){return e=l(e),v(e),e},append:function(e,n){return n=l(n),v(n,e),n},update:function(e,n){return n=l(n,e),W(e,n,e.dom.parentNode),J(n,e),e},updateChildren:function(e,n){var t=e.children;n=d(e,n,t),V(e.dom,e,e.ns,t,n),e.children=n},remove:function(e){var n=e.dom.parentNode;j(n,e)}}}(cito,window);
