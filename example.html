<html>
<head>
  <title>Inferno example</title>
</head>
<body>
  <div id="app"></div>
  <script src="im7.js"></script>
  <script src="inferno.js"></script>
  <script src="t7.js"></script>
  <script src="data.js"></script>
  <script>

    var state = {
      myName: "Dominic",
      className: "foo",
      myLastName: "Gannaway",
      deepName: "Deeeep!",
      person: {
        name: "Fred",
        age: 30
      },
      items: [
        "Dominic",
        "Jemma",
        "Charlie",
        "Harry"
      ],
      dbs: getData()
    };


    function template() {
      var map = Inferno.TemplateHelpers.map;
      var bind = Inferno.TemplateHelpers.bind;

      return {
        tag: "div",
        attrs: [
          {
            name: "class",
            value: "container"
          }
        ],
        children: [
          {
            tag: "span",
            bindAttrs: [
              {
                name: "class",
                statePath: "",
                initValue: state.className,
                oldValue: null
              }
            ],
            attrs: [
              {
                name: "id",
                value: "test"
              }
            ],
            bindChild: {
              statePath: "",
              initValue: state.myName,
              oldValue: null
            }
          },
          "Random static text FTW!",
          {
            tag: "ul",
            bindChildren: {
              initValue: state.items,
              oldValue: null,
              constructor: function(item) {
                return {
                  tag: "li",
                  attrs: [
                    {
                      name: "class",
                      value: "wow"
                    }
                  ],
                  bindChild: {
                    statePath: "",
                    initValue: item,
                    oldValue: null
                  }
                }
              }
            }
          },
          {
            tag: "div",
            attrs: [
              {
                name: "class",
                value: "databases"
              }
            ],
            bindChildren: {
              initValue: state.dbs,
              oldValue: null,
              constructor: function(database) {
                return {
                  tag: "div",
                  attrs: [
                    {
                      name: "class",
                      value: "wow"
                    }
                  ],
                  bindChild: {
                    statePath: "",
                    initValue: database.name,
                    oldValue: null
                  }
                }
              }
            }
          }
        ]
      }
    };

    var app = document.getElementById("app");
    var root = Inferno.append(template, state, app);

    //shortcut for dev purposes
    function u() {
      Inferno.update(root, app)
    };

    u();

  </script>
</body>
</html>
