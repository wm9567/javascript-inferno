<!doctype html>
<html>
<head>
    <title>Inferno CSS transform example</title>
</head>
<body>
<div id="app"></div>
<div id="app1"></div>
<div id="app2"></div>
<script>
    window.process = {
        env: {
            NODE_ENV: 'development'
        }
    };
</script>
<script src="../../packages/inferno/dist/inferno.js"></script>
<script src="../../packages/inferno-component/dist/inferno-component.js"></script>
<script src="../../packages/inferno-create-element/dist/inferno-create-element.js"></script>
<script src="../../packages/inferno-compat/dist/inferno-compat.js"></script>
<script>
    "use strict";
    var createElement = Inferno.createElement;

    class MyFoo extends Inferno.Component {
        render() {
            return createElement('div', {ref: 'hey'}, 'Hello world!')
        }

        componentDidMount() {
            if (this.refs.hey) {
                console.log('inferno-compat string refs work :)')
            } else {
                console.log('inferno-compat string refs do not work :(')
            }
        }
    }

    Inferno.render(createElement(MyFoo, {}), document.getElementById('app'));

    /*
     Example of using context and setState callback function
     */


    function checkParams(state, props, context) {
        console.log(state, props, context)
    }

    class Button extends Inferno.Component {
        constructor(props) {
            super(props);
            this.state = {
                btnstate: 'btnstate'
            };
        }

        click() {
            this.setState(checkParams);
        }

        render() {
            return createElement('button', {
                onClick: this.click.bind(this),
                style: {background: this.context.color}
            }, this.props.children);
        }
    }

    class Message extends Inferno.Component {
        render() {
            return createElement('div', null,
                [this.props.text, createElement(Button, {buttonProp: 'magic'}, 'btn')]
            );
        }
    }

    class MessageList extends Inferno.Component {
        getChildContext() {
            return {color: "purple"};
        }

        render() {
            const children = this.props.messages.map(function (message) {
                return createElement(Message, {text: message.text});
            });

            return createElement('div', null, children);
        }
    }

    Inferno.render(createElement(MessageList, {messages: [{text: 'first'}, {text: 'second'}]}), document.getElementById('app1'))

    let testValue = 11;
    function changeTestValue(event) {
        testValue = event.target.value;

        console.log(event.type, testValue);

        render();
    }

    function render() {
        Inferno.render(createElement('div', null,
            [
            createElement('label', {'for': 'test'}, [
                'label for input',
                createElement('input', {
                    id: 'test',
                    name: 'testing_radio',
                    value: "first",
                    onChange: changeTestValue,
                    type: 'radio',
                    pattern: '[0-9]+([,\.][0-9]+)?',
                    inputMode: 'numeric'
                })]),
                createElement('label', {'for': 'test2'}, [
                    'label for input2',
                    createElement('input', {
                        id: 'test2',
                        name: 'testing_radio',
                        value: "second",
                        onChange: changeTestValue,
                        type: 'radio',
                        pattern: '[0-9]+([,\.][0-9]+)?',
                        inputMode: 'numeric'
                    })]),
                createElement('label', {'htmlFor': 'test3'}, [
                    'label for input3',
                    createElement('input', {
                        id: 'test3',
                        name: 'test3',
                        value: testValue,
                        onChange: changeTestValue,
                        type: 'number',
                        pattern: '[0-9]+([,\.][0-9]+)?',
                        inputMode: 'numeric'
                    })])
        ]), document.getElementById('app2'));
    }
    render();
</script>
</body>
</html>
