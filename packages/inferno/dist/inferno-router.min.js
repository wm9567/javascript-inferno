!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("./inferno-create-element"),require("./inferno-component"),require("path-to-regexp"),require("./inferno")):"function"==typeof define&&define.amd?define(["inferno-create-element","inferno-component","path-to-regexp","inferno"],e):t.InfernoRouter=e(t.createElement,t.Component,t.pathToRegExp0,t.Inferno)}(this,function(t,e,r,n){"use strict";function o(e,r){var n=r.router,o=e.activeClassName,i=e.activeStyle,p=e.className,a=e.to,u={href:a};return p&&(u.className=p),n.location.pathname===a&&(o&&(u.className=(p?p+" ":"")+o),i&&(u.style=Object.assign({},e.style,i))),u.onclick=function(t){0!==t.button||t.ctrlKey||t.altKey||(t.preventDefault(),e.onEnter?e.onEnter(e,function(e){n.push(a,t.target.textContent)}):n.push(a,t.target.textContent))},t("a",u,e.children)}function i(t){return p(t)?t:t?[t]:t}function p(t){return t instanceof Array}function a(t){return"string"==typeof t}function u(t){return"string"!=typeof t?t:decodeURIComponent(t)}function s(t){return!t||!(p(t)?t:Object.keys(t)).length}function c(t){var e=[];return y(t,e),e}function l(t){return a(t)?t:t.pathname+t.search}function h(t){if(""===t)return j;for(var e=Object.create(null),r=t.split("&"),n=0;n<r.length;n++){var o=r[n].split("=").map(d),i=o[0],a=o[1];e[i]?(e[i]=p(e[i])?e[i]:[e[i]],e[i].push(a)):e[i]=a}return e}function f(t,e){var r=t.props||j,n=e.props||j,o=v(n.path)-v(r.path);return o||n.path&&r.path?n.path.length-r.path.length:0}function d(t,e){return decodeURIComponent(0|e?t:t.replace("[]",""))}function m(t){return t.replace(/(^\/+|\/+$)/g,"")}function v(t){return void 0===t&&(t=""),(m(t).match(/\/+/g)||"").length}function y(t,e){for(var r=0;r<t.length;r++){var n=t[r];p(n)?y(n,e):e.push(n)}}function g(t,e,r){if(void 0===e&&(e="/"),void 0===r&&(r="/"),!Object.keys(t).length)return t;var o=p(t)?c(t):i(t),a=e.split("?"),u=a[0],l=a[1];void 0===l&&(l="");var d=h(l);o.sort(f);for(var m=0;m<o.length;m++){var v=o[m],y=(r+(v.props&&v.props.path||"/")).replace("//","/"),x=!v.props||s(v.props.children),R=b(x,y,u);if(R){var j=null;if(v.props&&v.props.children){var _=g(v.props.children,u,y);_&&(j=_,Object.assign(d,_.props.params))}var O=n.cloneVNode(v,{children:j,params:Object.assign(d,R.params),component:v.props.component});return O}}}function b(t,e,r,n){var o=e+"|"+t,i=O.get(o);if(!i){var p=[];i={pattern:_(e,p,{end:t}),keys:p},O.set(o,i)}var a=i.pattern.exec(r);if(!a)return null;for(var s=a[0],c=Object.assign({},n),l=1;l<a.length;l+=1)c[i.keys[l-1].name]=u(a[l]);return{path:""===s?"/":s,params:c}}function x(t,e){var r=i(t),n=l(e),o=g(r,n,"/");return o}t="default"in t?t.default:t,e="default"in e?e.default:e,r="default"in r?r.default:r,n="default"in n?n.default:n;var R=function(e){function r(t,r){e.call(this,t,r)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.componentWillMount=function(){var t=this.props,e=t.onEnter;e&&e(this.props,this.context.router)},r.prototype.componentWillUnmount=function(){var t=this.props,e=t.onLeave;e&&e(this.props,this.context)},r.prototype.render=function(){var e=this.props,r=e.component,n=e.children,o=e.params;return t(r,{params:o,children:n})},r}(e),j=Object.create(null),_=r||pathToRegExp1,O=new Map,C=function(t){function e(e,r){if(t.call(this,e,r),!e.history&&!e.matched)throw new TypeError('Inferno: Error "inferno-router" requires a history prop passed, or a matched Route');this._didRoute=!1,this.router=e.history,this.state={url:e.url||this.router.location.pathname+this.router.location.search}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{router:this.router||{location:{pathname:this.props.url}}}},e.prototype.componentWillMount=function(){var t=this;this.router&&(this.unlisten=this.router.listen(function(e){t.routeTo(e.pathname)}))},e.prototype.componentWillUnmount=function(){this.unlisten&&this.unlisten()},e.prototype.routeTo=function(t){return this._didRoute=!1,this.setState({url:t}),this._didRoute},e.prototype.render=function(){var t=this.props,e=t.matched,r=t.children,n=t.url;if(void 0===n&&(n=this.state.url),e)return e;var o=x(i(r),n);return o},e}(e),E={Route:R,Router:C,Link:o,getRoutes:x};return E});
