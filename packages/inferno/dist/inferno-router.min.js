!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("./inferno-create-element"),require("./inferno-component"),require("./inferno")):"function"==typeof define&&define.amd?define(["inferno-create-element","inferno-component","inferno"],e):(t.Inferno=t.Inferno||{},t.Inferno.Router=e(t.Inferno.createElement,t.Inferno.Component,t.Inferno))}(this,function(t,e,n){"use strict";function r(e,n){var r=n.router,o=e.activeClassName,p=e.activeStyle,i=e.className,c=e.to,u={href:c};return i&&(u.className=i),r.location.pathname===c&&(o&&(u.className=(i?i+" ":"")+o),p&&(u.style=Object.assign({},e.style,p))),u.onclick=function(t){0!==t.button||t.ctrlKey||t.altKey||(t.preventDefault(),r.push(c,t.target.textContent))},t("a",u,e.children)}function o(e){return e.to="/",t(r,e)}function p(t){return I(t)?t:t?[t]:t}function i(t){return"string"==typeof t}function c(t){return"string"!=typeof t?t:decodeURIComponent(t)}function u(t){return!t||!(I(t)?t:Object.keys(t)).length}function a(t){var e=[];return y(t,e),e}function s(t){return i(t)?t:t.pathname+t.search}function l(t){if(""===t)return E;for(var e=Object.create(null),n=t.split("&"),r=0;r<n.length;r++){var o=n[r],p=o.split("=").map(m),i=p[0],c=p[1];e[i]?(e[i]=I(e[i])?e[i]:[e[i]],e[i].push(c)):e[i]=c}return e}function f(t,e){return 0===t.indexOf(e)?t.substr(e.length):t}function h(t,e){var n=t.props||E,r=e.props||E,o=v(r.path)-v(n.path);return o||r.path&&n.path?r.path.length-n.path.length:0}function m(t,e){return decodeURIComponent(0|e?t:t.replace("[]",""))}function d(t){return t.replace(/(^\/+|\/+$)/g,"")}function v(t){return void 0===t&&(t=""),(d(t).match(/\/+/g)||"").length}function y(t,e){for(var n=0;n<t.length;n++){var r=t[n];I(r)?y(r,e):e.push(r)}}function g(t,e){return e={exports:{}},t(e,e.exports),e.exports}function x(t,e,n){n=n||{},e=e||[];var r,o=n.strict,p=n.end!==!1,i=n.sensitive?"":"i",c=0,u=e.length,a=0,s=0;if(t instanceof RegExp){for(;r=T.exec(t.source);)e.push({name:s++,optional:!1,offset:r.index});return t}if(Array.isArray(t))return t=t.map(function(t){return x(t,e,n).source}),new RegExp("(?:"+t.join("|")+")",i);for(t=("^"+t+(o?"":"/"===t[t.length-1]?"?":"/?")).replace(/\/\(/g,"/(?:").replace(/([\/\.])/g,"\\$1").replace(/(\\\/)?(\\\.)?:(\w+)(\(.*?\))?(\*)?(\?)?/g,function(t,n,r,o,p,i,u,a){n=n||"",r=r||"",p=p||"([^\\/"+r+"]+?)",u=u||"",e.push({name:o,optional:!!u,offset:a+c});var s=""+(u?"":n)+"(?:"+r+(u?n:"")+p+(i?"((?:[\\/"+r+"].+?)?)":"")+")"+u;return c+=s.length-t.length,s}).replace(/\*/g,function(t,n){for(var r=e.length;r-- >u&&e[r].offset>n;)e[r].offset+=3;return"(.*)"});r=T.exec(t);){for(var l=0,f=r.index;"\\"===t.charAt(--f);)l++;l%2!==1&&((u+a===e.length||e[u+a].offset>r.index)&&e.splice(u+a,0,{name:s++,optional:!1,offset:r.index}),a++)}return t+=p?"$":"/"===t[t.length-1]?"":"(?=\\/|$)",new RegExp(t,i)}function b(t,e){var n=s(e),r=j(p(t),n,"/");return r}function j(t,e,r){void 0===e&&(e="/"),void 0===r&&(r="/");var o=I(t)?a(t):p(t),i=e.split("?"),c=i[0];void 0===c&&(c="/");var s=i[1];void 0===s&&(s="");var m=l(s);o.sort(h);for(var d=0;d<o.length;d++){var v=o[d],y=v.props&&v.props.path||"/",g=r+f(y,r).replace(/\/\//g,"/"),x=!v.props||u(v.props.children),b=_(x,g,c);if(b){var O=null;if(v.props&&v.props.children){var R=j(v.props.children,c,g);R&&(O=R.matched,Object.assign(m,R.matched.props.params))}return{location:g,matched:n.cloneVNode(v,{children:O,params:Object.assign(m,b.params),component:v.props.component})}}}}function _(t,e,n){var r=e+"|"+t,o=L.get(r);if(!o){var p=[];o={pattern:w(e,p,{end:t}),keys:p},L.set(r,o)}var i=o.pattern.exec(n);if(!i)return null;for(var u=i[0],a=Object.create(null),s=1;s<i.length;s+=1)a[o.keys[s-1].name]=c(i[s]);return{path:""===u?"/":u,params:a}}function O(t){if(!t)throw new TypeError('Inferno: Error "inferno-router" requires a history prop passed');return{push:t.push,listen:t.listen,get location(){return"blank"!==t.location.pathname?t.location:{pathname:"/",search:""}},get url(){return this.location.pathname+this.location.search}}}t="default"in t?t.default:t,e="default"in e?e.default:e;var R=function(e){function n(t,n){e.call(this,t,n)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.componentWillMount=function(){var t=this,e=this.props,n=e.onEnter,r=this.context,o=r.router;n&&Promise.resolve().then(function(){n({props:t.props,router:o})})},n.prototype.onLeave=function t(e){void 0===e&&(e=!1);var n=this.props,t=n.onLeave,r=this.context,o=r.router;t&&e&&t({props:this.props,router:o})},n.prototype.componentWillUnmount=function(){this.onLeave(!0)},n.prototype.componentWillReceiveProps=function(t){this.onLeave(this.props.path!==t.path)},n.prototype.render=function(e){var n=e.component,r=e.children,o=e.params;return t(n,{params:o,children:r})},n}(e),k=function(t){function e(e,n){t.call(this,e,n),e.path="/"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(R),I=Array.isArray,E=Object.create(null),C=x,T=/\((?!\?)/g,w=g(function(t){var e=C;t.exports=e,t.exports.parse=e.parse,t.exports.compile=e.compile,t.exports.tokensToFunction=e.tokensToFunction,t.exports.tokensToRegExp=e.tokensToRegExp,t.exports.default=t.exports}),L=new Map,W=function(t){function e(e,n){t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{router:this.props.router||{location:{pathname:this.props.location}}}},e.prototype.render=function(t){var e=t.routes,n=t.location,r=b(e,n);return r.matched},e}(e),A=function(e){function n(t,n){e.call(this,t,n),this.router=O(t.history),this.state={url:t.url||this.router.url}}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.componentWillMount=function(){var t=this;this.router&&(this.unlisten=this.router.listen(function(e){t.routeTo(e.pathname)}))},n.prototype.componentWillReceiveProps=function(t){this.setState({url:t.url})},n.prototype.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.prototype.routeTo=function(t){this.setState({url:t})},n.prototype.render=function(){return t(W,{location:this.state.url,router:this.router,routes:this.props.children})},n}(e),N={Route:R,IndexRoute:k,Router:A,RouterContext:W,Link:r,IndexLink:o,match:b};return N});
