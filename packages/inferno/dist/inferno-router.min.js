!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("./inferno-create-element"),require("./inferno-component"),require("./inferno")):"function"==typeof define&&define.amd?define(["inferno-create-element","inferno-component","inferno"],e):(t.Inferno=t.Inferno||{},t.Inferno.Router=e(t.Inferno.createElement,t.Inferno.Component,t.Inferno))}(this,function(t,e,r){"use strict";function n(e,r){var n=r.router,o=e.activeClassName,p=e.activeStyle,i=e.className,a=e.to,u={href:a};return i&&(u.className=i),n.location.pathname===a&&(o&&(u.className=(i?i+" ":"")+o),p&&(u.style=Object.assign({},e.style,p))),u.onclick=function(t){0!==t.button||t.ctrlKey||t.altKey||(t.preventDefault(),n.push(a,t.target.textContent))},t("a",u,e.children)}function o(e){return e.to="/",t(n,e)}function p(t){return i(t)?t:t?[t]:t}function i(t){return t instanceof Array}function a(t){return"string"==typeof t}function u(t){return"string"!=typeof t?t:decodeURIComponent(t)}function c(t){return!t||!(i(t)?t:Object.keys(t)).length}function s(t){var e=[];return y(t,e),e}function l(t){return a(t)?t:t.pathname+t.search}function f(t){if(""===t)return k;for(var e=Object.create(null),r=t.split("&"),n=0;n<r.length;n++){var o=r[n].split("=").map(d),p=o[0],a=o[1];e[p]?(e[p]=i(e[p])?e[p]:[e[p]],e[p].push(a)):e[p]=a}return e}function h(t,e){var r=t.props||k,n=e.props||k,o=v(n.path)-v(r.path);return o||n.path&&r.path?n.path.length-r.path.length:0}function d(t,e){return decodeURIComponent(0|e?t:t.replace("[]",""))}function m(t){return t.replace(/(^\/+|\/+$)/g,"")}function v(t){return void 0===t&&(t=""),(m(t).match(/\/+/g)||"").length}function y(t,e){for(var r=0;r<t.length;r++){var n=t[r];i(n)?y(n,e):e.push(n)}}function g(t,e){return e={exports:{}},t(e,e.exports),e.exports}function x(t,e,r){r=r||{},e=e||[];var n,o=r.strict,p=r.end!==!1,i=r.sensitive?"":"i",a=0,u=e.length,c=0,s=0;if(t instanceof RegExp){for(;n=E.exec(t.source);)e.push({name:s++,optional:!1,offset:n.index});return t}if(Array.isArray(t))return t=t.map(function(t){return x(t,e,r).source}),new RegExp("(?:"+t.join("|")+")",i);for(t=("^"+t+(o?"":"/"===t[t.length-1]?"?":"/?")).replace(/\/\(/g,"/(?:").replace(/([\/\.])/g,"\\$1").replace(/(\\\/)?(\\\.)?:(\w+)(\(.*?\))?(\*)?(\?)?/g,function(t,r,n,o,p,i,u,c){r=r||"",n=n||"",p=p||"([^\\/"+n+"]+?)",u=u||"",e.push({name:o,optional:!!u,offset:c+a});var s=""+(u?"":r)+"(?:"+n+(u?r:"")+p+(i?"((?:[\\/"+n+"].+?)?)":"")+")"+u;return a+=s.length-t.length,s}).replace(/\*/g,function(t,r){for(var n=e.length;n-- >u&&e[n].offset>r;)e[n].offset+=3;return"(.*)"});n=E.exec(t);){for(var l=0,f=n.index;"\\"===t.charAt(--f);)l++;l%2!==1&&((u+c===e.length||e[u+c].offset>n.index)&&e.splice(u+c,0,{name:s++,optional:!1,offset:n.index}),c++)}return t+=p?"$":"/"===t[t.length-1]?"":"(?=\\/|$)",new RegExp(t,i)}function _(t,e){var r=l(e),n=b(p(t),r,"/");return n}function b(t,e,n){void 0===e&&(e="/"),void 0===n&&(n="/");var o=i(t)?s(t):p(t),a=e.split("?"),u=a[0];void 0===u&&(u="/");var l=a[1];void 0===l&&(l="");var d=f(l);o.sort(h);for(var m=0;m<o.length;m++){var v=o[m],y=(n+(v.props&&v.props.path||"/")).replace("//","/"),g=!v.props||c(v.props.children),x=j(g,y,u);if(x){var _=null;if(v.props&&v.props.children){var I=b(v.props.children,u,y);I&&(_=I.matched,Object.assign(d,I.matched.props.params))}return{location:y,matched:r.cloneVNode(v,{children:_,params:Object.assign(d,x.params),component:v.props.component})}}}}function j(t,e,r){var n=e+"|"+t,o=T.get(n);if(!o){var p=[];o={pattern:C(e,p,{end:t}),keys:p},T.set(n,o)}var i=o.pattern.exec(r);if(!i)return null;for(var a=i[0],c=Object.create(null),s=1;s<i.length;s+=1)c[o.keys[s-1].name]=u(i[s]);return{path:""===a?"/":a,params:c}}t="default"in t?t.default:t,e="default"in e?e.default:e,r="default"in r?r.default:r;var I=function(e){function r(t,r){e.call(this,t,r)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.componentWillMount=function(){var t=this,e=this.props,r=e.onEnter,n=this.context,o=n.router;r&&setImmediate(function(){r({props:t.props,router:o})})},r.prototype.componentWillUnmount=function(){var t=this.props,e=t.onLeave,r=this.context,n=r.router;e&&e({props:this.props,router:n})},r.prototype.render=function(e){var r=e.component,n=e.children,o=e.params;return t(r,{params:o,children:n})},r}(e),R=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.render=function(e){var r=e.component,n=e.children,o=e.params,p=e.path;return void 0===p&&(p="/"),t(r,{path:p,params:o,children:n})},r}(I),k=Object.create(null),O=x,E=/\((?!\?)/g,C=g(function(t){var e=O;t.exports=e,t.exports.parse=e.parse,t.exports.compile=e.compile,t.exports.tokensToFunction=e.tokensToFunction,t.exports.tokensToRegExp=e.tokensToRegExp,t.exports.default=t.exports}),T=new Map,w=function(t){function e(e,r){t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{router:this.props.router||{location:{pathname:this.props.location}}}},e.prototype.render=function(t){var e=t.children,r=t.location,n=t.matched;if(void 0===n&&(n=null),n)return n;var o=_(e,r);return o.matched},e}(e),N=function(e){function r(t,r){if(e.call(this,t,r),!t.history)throw new TypeError('Inferno: Error "inferno-router" requires a history prop passed');this.router=t.history;var n=this.router.location.pathname+this.router.location.search;this.state={url:t.url||("blank"!==n?n:"/")}}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.componentWillMount=function(){var t=this;this.router&&(this.unlisten=this.router.listen(function(e){t.routeTo(e.pathname)}))},r.prototype.componentWillUnmount=function(){this.unlisten&&this.unlisten()},r.prototype.routeTo=function(t){this.setState({url:t})},r.prototype.render=function(e){var r=e.children,n=e.url;return t(w,{location:n||this.state.url,router:this.router},r)},r}(e),q={Route:I,IndexRoute:R,Router:N,RouterContext:w,Link:n,IndexLink:o,match:_};return q});
