!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("./inferno-component"),require("mobx"),require("./inferno"),require("./inferno-create-class"),require("hoist-non-inferno-statics"),require("./inferno-create-element")):"function"==typeof define&&define.amd?define(["inferno-component","mobx","inferno","inferno-create-class","hoist-non-inferno-statics","inferno-create-element"],t):e.InfernoMobx=t(e.Component,e.mobx,e.inferno,e.createClass,e.hoistStatics,e.createElement)}(this,function(e,t,n,o,r,i){"use strict";function s(e){throw e||(e=h),new Error("Inferno Error: "+e)}function c(e){var t=n.findDOMNode(e);t&&x&&x.set(t,e),g.emit({event:"render",renderTime:e.__$mobRenderEnd-e.__$mobRenderStart,totalTime:Date.now()-e.__$mobRenderStart,component:e,node:t})}function p(){"undefined"==typeof WeakMap&&s("[inferno-mobx] tracking components is not supported in this browser."),b||(b=!0)}function a(e){var o,r=e.prototype||e,i=r.componentDidMount,s=r.componentWillMount,p=r.componentWillUnmount;return r.componentWillMount=function(){"function"==typeof this.componentWillReact&&this.componentWillReact(),s&&s.call(this)},r.componentDidMount=function(){var e=this,n=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>";o=new t.Reaction(n+".render()",function(){o.track(function(){e.render(e.props,e.context),e.forceUpdate()})}),o.runReaction(),this.disposer=o.getDisposer(),b&&c(this),i&&i.call(this)},r.componentWillUnmount=function(){if(this.disposer(),p&&p.call(this),b){var e=n.findDOMNode(this);e&&x&&x.delete(e),g.emit({event:"destroy",component:this,node:e})}},r.shouldComponentUpdate=function(e,n){var o=this;if(this.state!==n)return!0;var r=Object.keys(this.props);if(r.length!==Object.keys(e).length)return!0;for(var i=r.length-1;i>=0;i--){var s=r[i],c=e[s];if(c!==o.props[s])return!0;if(c&&"object"==typeof c&&!t.isObservable(c))return!0}return!0},e}function f(e,t){var n=o({displayName:t.name,render:function(){var n=this,o={};for(var r in this.props)n.props.hasOwnProperty(r)&&(o[r]=n.props[r]);var s=e(this.context.mobxStores||{},o,this.context)||{};for(var c in s)o[c]=s[c];return o.ref=function(e){n.wrappedInstance=e},i(t,o)}});return n.contextTypes={mobxStores:function(){}},u(n,t),r(n,t),n}function u(e,t){"undefined"==typeof process||!process.env,0}function l(e){var t=arguments;if("function"!=typeof e){for(var n=[],o=0;o<arguments.length;o++)n[o]=t[o];e=M(n)}return function(t){return f(e,t)}}function d(t,n){if(void 0===n&&(n=null),"string"==typeof t&&s("Store names should be provided as array"),Array.isArray(t))return n?l.apply(null,t)(d(n)):function(e){return d(t,e)};var r=t;if(!("function"!=typeof r||r.prototype&&r.prototype.render||r.isReactClass||e.isPrototypeOf(r))){var i=o({displayName:r.displayName||r.name,propTypes:r.propTypes,contextTypes:r.contextTypes,getDefaultProps:function(){return r.defaultProps},render:function(){return r.call(this,this.props,this.context)}});return d(i)}return r||s('Please pass a valid component to "observer"'),r.isMobXReactObserver=!0,a(r)}e="default"in e?e.default:e,o="default"in o?o.default:o,r="default"in r?r.default:r,i="default"in i?i.default:i;var h="a runtime error occured! Use Inferno in development environment to find the error.",m={children:!0,key:!0,ref:!0},y=function(e){function t(t,n){e.call(this,t,n),this.contextTypes={mobxStores:function(){}},this.childContextTypes={mobxStores:function(){}},this.store=t.store}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){return this.props.children},t.prototype.getChildContext=function(){var e=this,t={},n=this.context.mobxStores;if(n)for(var o in n)t[o]=n[o];for(var r in this.props)m[r]||(t[r]=e.props[r]);return{mobxStores:t}},t}(e),v=function(){this.listeners=[]};v.prototype.on=function(e){var t=this;return this.listeners.push(e),function(){var n=t.listeners.indexOf(e);n!==-1&&t.listeners.splice(n,1)}},v.prototype.emit=function(e){this.listeners.forEach(function(t){return t(e)})},v.prototype.getTotalListeners=function(){return this.listeners.length},v.prototype.clearListeners=function(){this.listeners=[]};var b=!1,x=new WeakMap,g=new v,M=function(e){return function(t,n){return e.forEach(function(e){if(!(e in n)){if(!(e in t))throw new Error('MobX observer: Store "'+e+'" is not available! Make sure it is provided by some Provider');n[e]=t[e]}}),n}},w={Provider:y,inject:l,connect:d,observer:d,trackComponents:p,renderReporter:g,componentByNodeRegistery:x};return w});
