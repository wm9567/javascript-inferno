!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("./inferno-component"),require("mobx"),require("./inferno"),require("./inferno-create-class"),require("hoist-non-inferno-statics")):"function"==typeof define&&define.amd?define(["inferno-component","mobx","inferno","inferno-create-class","hoist-non-inferno-statics"],t):e.InfernoMobx=t(e.Component,e.mobx,e.inferno,e.createClass,e.hoistStatics)}(this,function(e,t,n,o,r){"use strict";function i(e){throw e||(e=h),new Error("Inferno Error: "+e)}function s(e){var t=n.findDOMNode(e);t&&w&&w.set(t,e),k.emit({event:"render",renderTime:e.__$mobRenderEnd-e.__$mobRenderStart,totalTime:Date.now()-e.__$mobRenderStart,component:e,node:t})}function a(){"undefined"==typeof WeakMap&&i("[inferno-mobx] tracking components is not supported in this browser."),b||(b=!0)}function p(e,t,n){e.split(",").forEach(function(e){return t[e]=n})}function c(e,t,n,o,r){return{type:e,dom:null,hooks:o||null,instance:null,key:n,nodeType:g,props:t,ref:r||null}}function u(e,t){var n=o({displayName:t.name,render:function(){var n=this,o={};for(var r in this.props)n.props.hasOwnProperty(r)&&(o[r]=n.props[r]);var i=e(this.context.mobxStores||{},o,this.context)||{};for(var s in i)o[s]=i[s];return o.children=this.props.children,o.ref=function(e){n.wrappedInstance=e},c(t,o)}});return n.contextTypes={mobxStores:function(){}},r(n,t),n}function l(e){var t=arguments;if("function"!=typeof e){for(var n=[],o=0;o<arguments.length;o++)n[o]=t[o];e=U(n)}return function(t){return u(e,t)}}function f(t,n){if(void 0===n&&(n=null),"string"==typeof t&&i("Store names should be provided as array"),Array.isArray(t))return n?l.apply(null,t)(f(n)):function(e){return f(t,e)};var r=t;if(!("function"!=typeof r||r.prototype&&r.prototype.render||r.isReactClass||e.isPrototypeOf(r))){var s=o({displayName:r.displayName||r.name,propTypes:r.propTypes,contextTypes:r.contextTypes,getDefaultProps:function(){return r.defaultProps},render:function(){return r.call(this,this.props,this.context)}});return f(s)}r||i('Please pass a valid component to "observer"');var a=r.prototype||r;return W.forEach(function(e){return d(a,e)}),a.shouldComponentUpdate||(a.shouldComponentUpdate=_.shouldComponentUpdate),r.isMobXReactObserver=!0,r}function d(e,t){var n=e[t],o=_[t];n?e[t]=function(){n.apply(this,arguments),o.apply(this,arguments)}:e[t]=o}e="default"in e?e.default:e,o="default"in o?o.default:o,r="default"in r?r.default:r;var h="a runtime error occured! Use Inferno in development environment to find the error.",m="undefined"!=typeof window&&window.document,y={children:!0,key:!0,ref:!0},v=function(e){function t(t,n){e.call(this,t,n),this.contextTypes={mobxStores:function(){}},this.childContextTypes={mobxStores:function(){}},this.store=t.store}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){return this.props.children},t.prototype.getChildContext=function(){var e=this,t={},n=this.context.mobxStores;if(n)for(var o in n)t[o]=n[o];for(var r in this.props)y[r]||(t[r]=e.props[r]);return{mobxStores:t}},t}(e),x=function(){this.listeners=[]};x.prototype.on=function(e){var t=this;return this.listeners.push(e),function(){var n=t.listeners.indexOf(e);n!==-1&&t.listeners.splice(n,1)}},x.prototype.emit=function(e){this.listeners.forEach(function(t){return t(e)})};var b=!1,w=new WeakMap,k=new x,_={componentWillMount:function(){var n,o=this,r=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",i=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID,s=this.render.bind(this),a=!1,p=function(p,c){var u=function(){return s(p,c)},l=function(){a=!1;var e=void 0;return n.track(function(){b&&(o.__$mobRenderStart=Date.now()),e=t.extras.allowStateChanges(!1,u),b&&(o.__$mobRenderEnd=Date.now())}),e};return n=new t.Reaction(r+"#"+i+".render()",function(){a||(a=!0,"function"==typeof o.componentWillReact&&o.componentWillReact(),o.__$mobxIsUnmounted!==!0&&e.prototype.forceUpdate.call(o))}),l.$mobx=n,o.render=l,l()};this.render=p},componentWillUnmount:function(){if(this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0,b){var e=n.findDOMNode(this);e&&w&&w.delete(e),k.emit({event:"destroy",component:this,node:e})}},componentDidMount:function(){b&&s(this)},componentDidUpdate:function(){b&&s(this)},shouldComponentUpdate:function(e,n){var o=this;if(this.state!==n)return!0;var r=Object.keys(this.props);if(r.length!==Object.keys(e).length)return!0;for(var i=r.length-1;i>=0;i--){var s=r[i],a=e[s];if(a!==o.props[s])return!0;if(a&&"object"==typeof a&&!t.isObservable(a))return!0}return!1}},g=6,C=function(){this._listeners=[]};C.prototype.addListener=function(e){this._listeners.push(e)},C.prototype.trigger=function(){for(var e=this,t=0;t<this._listeners.length;t++)e._listeners[t]()};var M="http://www.w3.org/1999/xlink",O="http://www.w3.org/XML/1998/namespace",I={},S={},D={},R={};p("xlink:href,xlink:arcrole,xlink:actuate,xlink:role,xlink:titlef,xlink:type",D,M),p("xml:base,xml:lang,xml:space",D,O),p("volume,value,defaultValue,defaultChecked",I,!0),p("muted,scoped,loop,open,checked,default,capture,disabled,selected,readonly,multiple,required,autoplay,controls,seamless,reversed,allowfullscreen,novalidate",S,!0),p("animationIterationCount,borderImageOutset,borderImageSlice,borderImageWidth,boxFlex,boxFlexGroup,boxOrdinalGroup,columnCount,flex,flexGrow,flexPositive,flexShrink,flexNegative,flexOrder,gridRow,gridColumn,fontWeight,lineClamp,lineHeight,opacity,order,orphans,tabSize,widows,zIndex,zoom,fillOpacity,floodOpacity,stopOpacity,strokeDasharray,strokeDashoffset,strokeMiterlimit,strokeOpacity,strokeWidth,",R,!0);var U=(new Map,new Map,new Map,m?document.body:null,function(e){return function(t,n){return e.forEach(function(e){if(!(e in n)){if(!(e in t))throw new Error('MobX observer: Store "'+e+'" is not available! Make sure it is provided by some Provider');n[e]=t[e]}}),n}}),W=["componentWillMount","componentWillUnmount","componentDidMount","componentDidUpdate"],N={Provider:v,connect:f,observer:f,trackComponents:a,renderReporter:k,componentByNodeRegistery:w};return N});
