!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("stream")):"function"==typeof define&&define.amd?define(["stream"],n):e.InfernoServer=n(e.stream)}(this,function(e){"use strict";function n(e){return e instanceof Array}function t(e){return l(e._isStateful)}function r(e){return u(e)||a(e)}function o(e){return p(e)||s(e)}function i(e){return s(e)||e===!1||l(e)||p(e)}function u(e){return"string"==typeof e}function a(e){return"number"==typeof e}function s(e){return null===e}function l(e){return e===!0}function p(e){return void 0===e}function c(e,n){e||console.error(n)}function f(e){return e._type===A.ELEMENT}function d(e){return e._type===A.TEMPLATE}function h(e){return e._type===A.COMPONENT}function m(e,n,t){e.split(",").forEach(function(e){return n[e]=t})}function g(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\//g,"&#x2F;")}function v(e){return(e+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function y(e){return e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}function x(e){return!!z[e]}function _(e,n,r){var i=e._component,u=e._props;if(t(e)){var a=new i(u),s=a.getChildContext();o(s)||(r=Object.assign({},r,s)),a.context=r,a._pendingSetState=!0,a.componentWillMount();var l=a.render();return a._pendingSetState=!1,N(l,r,n)}return N(i(u),r,n)}function k(e,t){if(e&&n(e)){for(var o=[],u=!1,a=0;a<e.length;a++){var s=e[a],l=r(s),p=i(s);l||p?(u===!0&&(i(s)?o.push("<!--!-->"):o.push("<!---->")),l&&o.push(g(s)),u=!0):n(s)?(o.push("<!---->"),o.push(k(s)),o.push("<!--!-->"),u=!0):(u=!1,o.push(N(s,t,!1)))}return o.join("")}return i(e)?"":r(e)?g(e):N(e,t,!1)||""}function b(e){if(r(e))return e;for(var n=[],t=Object.keys(e),i=0;i<t.length;i++){var u=t[i],s=e[u],l=a(s)&&!q[u]?"px":"";o(s)||n.push(y(u)+":"+v(s)+l+";")}return n.join()}function w(e,n,t){for(var o=e._tag,i=[],u=e._props,a=u&&Object.keys(u)||[],s="",p=0;p<a.length;p++){var c=a[p],f=u[c];"dangerouslySetInnerHTML"===c?s=f.__html:"style"===c?i.push('style="'+b(u.style)+'"'):"className"===c?i.push('class="'+f+'"'):r(f)?i.push(v(c)+'="'+v(f)+'"'):l(f)&&i.push(v(c))}return n&&i.push("data-infernoroot"),x(o)?"<"+o+(i.length>0?" "+i.join(" "):"")+">":"<"+o+(i.length>0?" "+i.join(" "):"")+">"+(s||k(e._children,t))+"</"+o+">"}function S(e){var n=[],t=e._v0,r=e._v1;return t&&n.push(t),r&&n.push.apply(n,r),n}function E(e,n,t){return N(e._tr._schema.apply(null,S(e)),t,n)}function N(e,n,t){if(!i(e)){if(d(e))return E(e,t,n);if(f(e))return w(e,t,n);if(h(e))return _(e,t,n)}throw Error("Inferno Error: Bad input argument called on renderInputToString(). Input argument may need normalising.")}function O(e){return N(e,null,!1)}function M(e){return N(e,null,!0)}function T(e){if(r(e))return e;for(var n=[],t=Object.keys(e),i=0;i<t.length;i++){var u=t[i],s=e[u],l=a(s)&&!q[u]?"px":"";o(s)||n.push(y(u)+":"+v(s)+l+";")}return n.join()}function C(e){var n=[],t=e&&Object.keys(e)||[];return t.forEach(function(t,o){var i=e[t];switch(t){case"dangerouslySetInnerHTML":case"className":case"style":return;default:r(i)?n.push(v(t)+'="'+v(i)+'"'):l(i)&&n.push(v(t))}}),n}function I(e){return new G(e,(!1))}function j(e){return new G(e,(!0))}var L=function(){};c((L.name||L.toString()).indexOf("testFn")!==-1,"It looks like you're using a minified copy of the development build of Inferno. When deploying Inferno apps to production, make sure to use the production build which skips development warnings and is faster. See http://infernojs.org for more details.");var A={ELEMENT:0,COMPONENT:1,TEMPLATE:2,TEXT:3,PLACEHOLDER:4,FRAGMENT:5,VARIABLE:6},P="http://www.w3.org/1999/xlink",H="http://www.w3.org/XML/1998/namespace",R={},W={},F={},q={};m("xlink:href,xlink:arcrole,xlink:actuate,xlink:role,xlink:titlef,xlink:type",F,P),m("xml:base,xml:lang,xml:space",F,H),m("volume,value",R,!0),m("muted,scoped,loop,open,checked,default,capture,disabled,selected,readonly,multiple,required,autoplay,controls,seamless,reversed,allowfullscreen,novalidate",W,!0),m("animationIterationCount,borderImageOutset,borderImageSlice,borderImageWidth,boxFlex,boxFlexGroup,boxOrdinalGroup,columnCount,flex,flexGrow,flexPositive,flexShrink,flexNegative,flexOrder,gridRow,gridColumn,fontWeight,lineClamp,lineHeight,opacity,order,orphans,tabSize,widows,zIndex,zoom,fillOpacity,floodOpacity,stopOpacity,strokeDasharray,strokeDashoffset,strokeMiterlimit,strokeOpacity,strokeWidth,",q,!0);var z={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},G=function(e){function u(n,t){e.call(this),this.initNode=n,this.staticMarkup=t,this.started=!1}return e&&(u.__proto__=e),u.prototype=Object.create(e&&e.prototype),u.prototype.constructor=u,u.prototype._read=function(){var e=this;this.started||(this.started=!0,Promise.resolve().then(function(){return e.renderNode(e.initNode,null,e.staticMarkup)}).then(function(){e.push(null)}).catch(function(n){e.emit("error",n)}))},u.prototype.renderNode=function(e,n,t){if(!i(e))return h(e)?this.renderComponent(e,t,n):f(e)?this.renderNative(e,t,n):void 0},u.prototype.renderComponent=function(e,n,r){var i=this,u=e._component,a=e._props;if(!t(e))return this.renderNode(u(a),r,n);var s=new u(a),l=s.getChildContext();return o(l)||(r=Object.assign({},r,l)),s.context=r,s._pendingSetState=!0,Promise.resolve(s.componentWillMount()).then(function(){var e=s.render();return s._pendingSetState=!1,i.renderNode(e,r,n)})},u.prototype.renderChildren=function(e,t){var o=this;if(r(e))return this.push(g(e));if(e){var u=n(e);if(!u&&!i(e))return this.renderNode(e,t,!1);if(!u)throw new Error("invalid component");return e.reduce(function(e,u){return e.then(function(e){var a=r(u),s=i(u);return a||s?(e===!0&&(s?o.push("<!--!-->"):o.push("<!---->")),a&&o.push(g(u)),!0):n(u)?(o.push("<!---->"),Promise.resolve(o.renderChildren(u)).then(function(){return o.push("<!--!-->"),!0})):o.renderNode(u,t,!1).then(function(){return!1})})},Promise.resolve(!1))}},u.prototype.renderNative=function(e,n,t){var r=this,o=e._tag,i=e._props,u=C(i),a="";if(i){var s=i.className;s&&u.push('class="'+v(s)+'"');var l=i.style;l&&u.push('style="'+T(l)+'"'),i.dangerouslySetInnerHTML&&(a=i.dangerouslySetInnerHTML.__html)}if(n&&u.push("data-infernoroot"),this.push("<"+o+(u.length>0?" "+u.join(" "):"")+">"),!x(o))return a?(this.push(a),void this.push("</"+o+">")):Promise.resolve(this.renderChildren(e._children,t)).then(function(){r.push("</"+o+">")})},u}(e.Readable),D={renderToString:O,renderToStaticMarkup:M,streamAsString:I,streamAsStaticMarkup:j,RenderStream:G};return D});