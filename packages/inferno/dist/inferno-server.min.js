!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoServer=n()}(this,function(){"use strict";function e(e,t){if(!o(e)){var r=n(e);(r&&e.length>0||!r)&&(t=t?Object.assign({},t,{children:e}):{children:e})}return t}function n(e){return e instanceof Array}function t(e){return s(e._isStateful)}function r(e){return a(e)||l(e)}function o(e){return f(e)||c(e)}function i(e){return c(e)||e===!1||s(e)||f(e)}function u(e){return"function"==typeof e}function a(e){return"string"==typeof e}function l(e){return"number"==typeof e}function c(e){return null===e}function s(e){return e===!0}function f(e){return void 0===e}function d(e,n,t){e.split(",").forEach(function(e){return n[e]=t})}function p(e){var n=document.createElement(e),t={};for(var r in n)t[r]=!0;return G.set(e,t),t}function h(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\//g,"&#x2F;")}function w(e){return(e+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function g(e){return e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}function m(e){return!!K[e]}function x(n,r,i,u,a){if(r=e(i,r),t(n)){var l=new n(r),c=l.getChildContext();o(c)||(u=Object.assign({},u,c)),l.context=u,l._pendingSetState=!0,l.componentWillMount();var s=l.render();return l._pendingSetState=!1,b(s,u,a)}return b(n(r),u,a)}function y(e,t){if(e&&n(e)){for(var o=[],u=!1,a=0;a<e.length;a++){var l=e[a],c=r(l),s=s(l);c||s?(u===!0&&(s(l)?o.push("<!--!-->"):o.push("<!---->")),c&&o.push(h(l)),u=!0):n(l)?(o.push("<!---->"),o.push(y(l)),o.push("<!--!-->"),u=!0):(u=!1,o.push(b(l,t,!1)))}return o.join("")}return i(e)?"":r(e)?h(e):b(e,t,!1)||""}function v(e){if(r(e))return e;for(var n=[],t=Object.keys(e),i=0;i<t.length;i++){var u=t[i],a=e[u],c=l(a)&&!F[u]?"px":"";o(a)||n.push(g(u)+":"+w(a)+c+";")}return n.join()}function b(e,n,t){if(!i(e)){var a=e.bp,l=e.tag||a&&a.tag,c=[],f=e.className,d=e.style;if(u(l))return x(l,e.attrs,e.children,n,t);o(f)||c.push('class="'+w(f)+'"'),o(d)||c.push('style="'+v(d)+'"');var p=e.attrs,h=p&&Object.keys(p)||[],g="";return a&&a.hasAttrs===!0&&(h=a.attrKeys=a.attrKeys?a.attrKeys.concat(h):h),h.forEach(function(e,n){var t=h[n],o=p[t];"dangerouslySetInnerHTML"===t?g=o.__html:r(o)?c.push(w(t)+'="'+w(o)+'"'):s(o)&&c.push(w(t))}),t&&c.push("data-infernoroot"),m(l)?"<"+l+(c.length>0?" "+c.join(" "):"")+">":"<"+l+(c.length>0?" "+c.join(" "):"")+">"+(g||y(e.children,n))+"</"+l+">"}}function k(e){return b(e,null,!1)}function S(e){return b(e,null,!0)}var O="undefined"!=typeof window&&window.document,j=O&&window.screen.width,C=O&&window.screen.height,I=0,M=0,z=0;O&&(window.onscroll=function(){I=window.scrollX,M=window.scrollY,z=performance.now()},window.resize=function(){I=window.scrollX,M=window.scrollY,j=window.screen.width,C=window.screen.height,z=performance.now()});var _=(O?document.body:null,"http://www.w3.org/1999/xlink"),A="http://www.w3.org/XML/1998/namespace",W={},q={},E={},F={};d("xlink:href,xlink:arcrole,xlink:actuate,xlink:role,xlink:titlef,xlink:type",E,_),d("xml:base,xml:lang,xml:space",E,A),d("volume,value",W,!0),d("muted,scoped,loop,open,checked,default,capture,disabled,selected,readonly,multiple,required,autoplay,controls,seamless,reversed,allowfullscreen,novalidate",q,!0),d("animationIterationCount,borderImageOutset,borderImageSlice,borderImageWidth,boxFlex,boxFlexGroup,boxOrdinalGroup,columnCount,flex,flexGrow,flexPositive,flexShrink,flexNegative,flexOrder,gridRow,gridColumn,fontWeight,lineClamp,lineHeight,opacity,order,orphans,tabSize,widows,zIndex,zoom,fillOpacity,floodOpacity,stopOpacity,strokeDasharray,strokeDashoffset,strokeMiterlimit,strokeOpacity,strokeWidth,",F,!0);var G=new Map;p("div"),p("span"),p("table"),p("tr"),p("td"),p("a"),p("p");var K={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},L={renderToString:k,renderToStaticMarkup:S};return L});