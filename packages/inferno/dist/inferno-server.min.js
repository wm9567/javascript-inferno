!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoServer=n()}(this,function(){"use strict";function e(e){return e instanceof Array}function n(e){return l(e._isStateful)}function t(e){return u(e)||i(e)}function r(e){return c(e)||a(e)}function o(e){return a(e)||e===!1||l(e)||c(e)}function u(e){return"string"==typeof e}function i(e){return"number"==typeof e}function a(e){return null===e}function l(e){return e===!0}function c(e){return void 0===e}function p(e){return e._type===O.ELEMENT}function f(e){return e._type===O.COMPONENT}function s(e,n,t){e.split(",").forEach(function(e){return n[e]=t})}function d(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\//g,"&#x2F;")}function g(e){return(e+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function h(e){return e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}function m(e){return!!N[e]}function x(e,t,o){var u=e._component,i=e._props;if(n(e)){var a=new u(i),l=a.getChildContext();r(l)||(o=Object.assign({},o,l)),a.context=o,a._pendingSetState=!0,a.componentWillMount();var c=a.render();return a._pendingSetState=!1,b(c,o,t)}return b(u(i),o,t)}function y(n,r){if(n&&e(n)){for(var u=[],i=!1,a=0;a<n.length;a++){var l=n[a],c=t(l),p=o(l);c||p?(i===!0&&(o(l)?u.push("<!--!-->"):u.push("<!---->")),c&&u.push(d(l)),i=!0):e(l)?(u.push("<!---->"),u.push(y(l)),u.push("<!--!-->"),i=!0):(i=!1,u.push(b(l,r,!1)))}return u.join("")}return o(n)?"":t(n)?d(n):b(n,r,!1)||""}function k(e){if(t(e))return e;for(var n=[],o=Object.keys(e),u=0;u<o.length;u++){var a=o[u],l=e[a],c=i(l)&&!L[a]?"px":"";r(l)||n.push(h(a)+":"+g(l)+c+";")}return n.join()}function v(e,n,r){for(var o=e._tag,u=[],i=e._props,a=i&&Object.keys(i)||[],c="",p=0;p<a.length;p++){var f=a[p],s=i[f];"dangerouslySetInnerHTML"===f?c=s.__html:"style"===f?u.push('style="'+k(i.style)+'"'):"className"===f?u.push('class="'+s+'"'):t(s)?u.push(g(f)+'="'+g(s)+'"'):l(s)&&u.push(g(f))}return n&&u.push("data-infernoroot"),m(o)?"<"+o+(u.length>0?" "+u.join(" "):"")+">":"<"+o+(u.length>0?" "+u.join(" "):"")+">"+(c||y(e._children,r))+"</"+o+">"}function b(e,n,t){if(!o(e)){if(p(e))return v(e,t,n);if(f(e))return x(e,t,n)}}function w(e){return b(e,null,!1)}function E(e){return b(e,null,!0)}var O={ELEMENT:0,COMPONENT:1,TEMPLATE:2,TEXT:3,PLACEHOLDER:4,FRAGMENT:5,VARIABLE:6},S="http://www.w3.org/1999/xlink",T="http://www.w3.org/XML/1998/namespace",_={},M={},C={},L={};s("xlink:href,xlink:arcrole,xlink:actuate,xlink:role,xlink:titlef,xlink:type",C,S),s("xml:base,xml:lang,xml:space",C,T),s("volume,value",_,!0),s("muted,scoped,loop,open,checked,default,capture,disabled,selected,readonly,multiple,required,autoplay,controls,seamless,reversed,allowfullscreen,novalidate",M,!0),s("animationIterationCount,borderImageOutset,borderImageSlice,borderImageWidth,boxFlex,boxFlexGroup,boxOrdinalGroup,columnCount,flex,flexGrow,flexPositive,flexShrink,flexNegative,flexOrder,gridRow,gridColumn,fontWeight,lineClamp,lineHeight,opacity,order,orphans,tabSize,widows,zIndex,zoom,fillOpacity,floodOpacity,stopOpacity,strokeDasharray,strokeDashoffset,strokeMiterlimit,strokeOpacity,strokeWidth,",L,!0);var N={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},j={renderToString:w,renderToStaticMarkup:E};return j});