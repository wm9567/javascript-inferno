!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.InfernoServer=t()}(this,function(){"use strict";function e(e,n){if(!o(e)){var r=t(e);(r&&e.length>0||!r)&&(n=n?Object.assign({},n,{children:e}):{children:e})}return n}function t(e){return e instanceof Array}function n(e){return s(e._isStateful)}function r(e){return a(e)||l(e)}function o(e){return f(e)||c(e)}function i(e){return c(e)||e===!1||s(e)||f(e)}function u(e){return"function"==typeof e}function a(e){return"string"==typeof e}function l(e){return"number"==typeof e}function c(e){return null===e}function s(e){return e===!0}function f(e){return void 0===e}function p(e,t,n){e.split(",").forEach(function(e){return t[e]=n})}function d(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\//g,"&#x2F;")}function h(e){return(e+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function g(e){return e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}function m(e){return!!_[e]}function x(t,r,i,u,a){if(r=e(i,r),n(t)){var l=new t(r),c=l.getChildContext();o(c)||(u=Object.assign({},u,c)),l.context=u,l._pendingSetState=!0,l.componentWillMount();var s=l.render();return l._pendingSetState=!1,k(s,u,a)}return k(t(r),u,a)}function y(e,n){if(e&&t(e)){for(var o=[],u=!1,a=0;a<e.length;a++){var l=e[a],c=r(l),s=s(l);c||s?(u===!0&&(s(l)?o.push("<!--!-->"):o.push("<!---->")),c&&o.push(d(l)),u=!0):t(l)?(o.push("<!---->"),o.push(y(l)),o.push("<!--!-->"),u=!0):(u=!1,o.push(k(l,n,!1)))}return o.join("")}return i(e)?"":r(e)?d(e):k(e,n,!1)||""}function b(e){if(r(e))return e;for(var t=[],n=Object.keys(e),i=0;i<n.length;i++){var u=n[i],a=e[u],c=l(a)&&!M[u]?"px":"";o(a)||t.push(g(u)+":"+h(a)+c+";")}return t.join()}function k(e,t,n){if(!i(e)){var a=e.bp,l=e.tag||a&&a.tag,c=[],f=e.className,p=e.style;if(u(l))return x(l,e.attrs,e.children,t,n);o(f)||c.push('class="'+h(f)+'"'),o(p)||c.push('style="'+b(p)+'"');var d=e.attrs,g=d&&Object.keys(d)||[],k="";return a&&a.hasAttrs===!0&&(g=a.attrKeys=a.attrKeys?a.attrKeys.concat(g):g),g.forEach(function(e,t){var n=g[t],o=d[n];"dangerouslySetInnerHTML"===n?k=o.__html:r(o)?c.push(h(n)+'="'+h(o)+'"'):s(o)&&c.push(h(n))}),n&&c.push("data-infernoroot"),m(l)?"<"+l+(c.length>0?" "+c.join(" "):"")+">":"<"+l+(c.length>0?" "+c.join(" "):"")+">"+(k||y(e.children,t))+"</"+l+">"}}function v(e){return k(e,null,!1)}function w(e){return k(e,null,!0)}var S="http://www.w3.org/1999/xlink",O="http://www.w3.org/XML/1998/namespace",j={},C={},I={},M={};p("xlink:href,xlink:arcrole,xlink:actuate,xlink:role,xlink:titlef,xlink:type",I,S),p("xml:base,xml:lang,xml:space",I,O),p("volume,value",j,!0),p("muted,scoped,loop,open,checked,default,capture,disabled,selected,readonly,multiple,required,autoplay,controls,seamless,reversed,allowfullscreen,novalidate",C,!0),p("animationIterationCount,borderImageOutset,borderImageSlice,borderImageWidth,boxFlex,boxFlexGroup,boxOrdinalGroup,columnCount,flex,flexGrow,flexPositive,flexShrink,flexNegative,flexOrder,gridRow,gridColumn,fontWeight,lineClamp,lineHeight,opacity,order,orphans,tabSize,widows,zIndex,zoom,fillOpacity,floodOpacity,stopOpacity,strokeDasharray,strokeDashoffset,strokeMiterlimit,strokeOpacity,strokeWidth,",M,!0);var _={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},z={renderToString:v,renderToStaticMarkup:w};return z});