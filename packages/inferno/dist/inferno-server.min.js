!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoServer=n()}(this,function(){"use strict";function e(e){return e.tree.html.create(e)}function n(e){return{create:function(){return e}}}function t(e,n){return null!==n&&(e&n)===n}function l(e){for(var n=0,t=void 0;n<=e.length;){if(t=e[n],!isNaN(1*t))return!1;if(t==t.toUpperCase())return!1;if(t===t.toLowerCase())return!0;n++}return!1}function r(e,n){for(var t=0;t<e.length;t++){var l=e[t];if(l.node===n)return l.dynamicFlags}}function o(e){var n=e.attrs&&e.attrs.value;if(!W(n)){var t={};if(m(n))for(var l=0,r=n.length;r>l;l++)t[n[l]]=n[l];else t[n]=n;a(e,t),e.attrs&&e.attrs.value&&delete e.attrs.value}}function a(e,n){if("option"===e.tag){var t=e.attrs&&e.attrs.value;n[t]&&(e.attrs=e.attrs||{},e.attrs.selected="selected")}else for(var l=0,r=e.children.length;r>l;l++)a(e.children[l],n)}function i(e,n){var t="";for(var r in e)if(l(r)){var o=e[r];W(o)||(w[r]||"string"!=typeof o&&(o+="px"),t+=r+":",t+=o+";")}return t||null}function u(e,n){if("data-inferno"===e)return""+e;var t=B[e]||null;if(t){if(W(n)||t.hasBooleanValue&&!n||t.hasNumericValue&&n!==n||t.hasPositiveNumericValue&&1>n||"false"===n||0===n.length)return"";var r=t.attributeName;return r+"="+R(n)}return W(n)||!l(e)?"":(U[e]||e.toLowerCase())+"="+R(n)}function c(e,n){var t="";for(var l in e){var r=e[l];if(!W(r)){"style"===l&&(r=i(r));var o=null;o=u(l,r),o&&(t+=" "+o)}}return t}function s(e){var n=!1;return m(e)?e.map(function(e,t){return x(e)?n?(n=!0,"<!---->"+e):(n=!0,e):(n=!1,f(!1,e))}).join(""):x(e)?e:f(!1,e)}function f(e,n){var t=void 0;if(W(n))return"";if(n.tag){var l="string"==typeof n.tag&&n.tag.toLowerCase(),r=n.attrs,a={};for(var i in n.attrs){if("value"===i){if("select"===l){o(n);continue}if("textarea"===l||r.contenteditable){n.text=r[i];continue}}a[i]=r[i]}e&&(a["data-inferno"]=!0),t="<"+l,a.innerHTML?n.text=a.innerHTML:t+=c(a,null),q[l]?t+=" />":(t+=">",W(n.children)?W(n.text)||(t+=n.text):t+=s(n.children),t+="</"+l+">")}return t}function d(e,t,l){var o=r(l,e),a=void 0;return o?a:n(f(t,e))}var p={};p["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var m=function(e){return e.constructor===Array},x=function(e){return"string"==typeof e||"number"==typeof e},h=!("undefined"==typeof window||"undefined"==typeof document||!window.document.createElement),y={canUseDOM:h,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:h&&!!window.addEventListener,canUseViewport:h&&!!window.screen,canUseSymbol:"function"==typeof Symbol&&"function"==typeof Symbol["for"]},k=function(){},v={},g=/\-./g,w={"animation-iteration-count":!0,"box-flex":!0,"box-flex-group":!0,"column-count":!0,"counter-increment":!0,"fill-opacity":!0,flex:!0,"flex-grow":!0,"flex-order":!0,"flex-positive":!0,"flex-shrink":!0,"float":!0,"font-weight":!0,"grid-column":!0,"line-height":!0,"line-clamp":!0,opacity:!0,order:!0,orphans:!0,"stop-opacity":!0,"stroke-dashoffset":!0,"stroke-opacity":!0,"stroke-width":!0,"tab-size":!0,transform:!0,"transform-origin":!0,widows:!0,"z-index":!0,zoom:!0},b=["Top","Right","Bottom","Left"],S=function(e,n){return b.map(function(t){return(e||"")+t+(n||"")})},T={font:[],padding:S("padding"),margin:S("margin"),"border-width":S("border","Width"),"border-style":S("border","Style")},C=function(e){return e.replace(g,function(e){return e[1].toUpperCase()})};y.canUseDOM&&!function(){var e=document.documentElement,n=window.getComputedStyle(e),t=Array.prototype.slice.call(n,0);for(var l in e.style)n[l]||t.push(l);t.forEach(function(e){var n="-"===e[0]?e.substr(1,e.indexOf("-",1)-1):null,t=C(e);v[t]={unPrefixed:n?e.substr(n.length+2):e,unitless:w[e]?!0:!1,shorthand:null}});var r={1:function(e,n,t){return n.forEach(function(n){return t[n]=e[0]})},2:function(e,n,t){return e.forEach(function(e,l){t[n[l]]=t[n[l+2]]=e})},4:function(e,n,t){return n.forEach(function(n,l){t[n]=e[l]})}};Object.keys(T).forEach(function(e){var n=C(e);v[n]={unPrefixed:e,unitless:!1,shorthand:function(n,t){var l="undefined"==typeof n?"undefined":p["typeof"](n);if("number"===l&&(n+="px"),n)if("cssText"in t)t.cssText+=";"+e+":"+n;else{var o=n.split(" ");(r[o.length]||k)(o,T[e],t)}}}})}();var L=1,E=2,M=4,N=6,O="http://www.w3.org/1999/xlink",z="http://www.w3.org/XML/1998/namespace",A={"xlink:actuate":O,"xlink:arcrole":O,"xlink:href":O,"xlink:role":O,"xlink:show":O,"xlink:title":O,"xlink:type":O,"xml:base":z,"xml:lang":z,"xml:space":z,xlinkActuate:O,xlinkArcrole:O,xlinkHref:O,xlinkRole:O,xlinkShow:O,xlinkTitle:O,xlinkType:O},U={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv",clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space"},P={autoComplete:"autocomplete",autoFocus:"autofocus",autoSave:"autosave"},V={allowFullScreen:E,async:E,autoFocus:E,autoPlay:E,capture:E,checked:L|E,controls:E,currentTime:L|N,"default":E,defaultChecked:E,defaultMuted:E,defaultSelected:E,defer:E,disabled:L|E,download:E,enabled:E,formNoValidate:E,hidden:L|E,loop:E,multiple:L|E,muted:L|E,mediaGroup:L,noValidate:E,noShade:L|E,noResize:E,noWrap:E,typeMustMatch:E,open:E,paused:L,playbackRate:L|M,readOnly:E,required:L|E,reversed:E,radioGroup:L,icon:L,draggable:E,dropzone:null,scoped:L|E,visible:E,trueSpeed:E,sandbox:null,sortable:E,inert:E,indeterminate:E,nohref:E,compact:E,declare:E,ismap:L|E,pauseOnExit:L|E,seamless:E,translate:E,selected:L|E,srcLang:L,srcObject:L,value:L,volume:L|N,itemScope:E,className:null,tabindex:L|M,xlinkActuate:null,xlinkArcrole:null,xlinkHref:null,xlinkRole:null,xlinkShow:null,xlinkTitle:null,xlinkType:null,xmlBase:null,xmlLang:null,xmlSpace:null,clipPath:null,fillOpacity:null,fontFamily:null,fontSize:null,markerEnd:null,markerMid:null,markerStart:null,stopColor:null,stopOpacity:null,strokeDasharray:null,strokeLinecap:null,strokeOpacity:null,strokeWidth:null,textAnchor:null,cols:N,rows:M,rowspan:M,size:N,sizes:M,start:M,"xlink:actuate":null,"xlink:arcrole":null,"xlink:href":null,"xlink:role":null,"xlink:show":null,"xlink:title":null,"xlink:type":null,"xml:base":null,"xml:lang":null,"xml:space":null,id:null,dir:null,title:null,autocorrect:null,autoCapitalize:null,type:null,form:null,formAction:null,formEncType:null,formMethod:null,formTarget:null,frameBorder:null,unselectable:null,continuous:E,srcSet:null,inlist:null,minLength:null,marginWidth:null,marginHeight:null,list:null,keyType:null,is:null,inputMode:null,height:null,width:null,dateTime:null,contenteditable:null,contextMenu:null,classID:null,cellPadding:null,cellSpacing:null,charSet:null,allowTransparency:null,spellcheck:null,srcDoc:L},B={};for(var F in V){var I=V[F];B[F]={attributeName:U[F]||F.toLowerCase(),attributeNamespace:A[F]?A[F]:null,propertyName:P[F]||F,mustUseProperty:t(I,L),hasBooleanValue:t(I,E),hasNumericValue:t(I,M),hasPositiveNumericValue:t(I,N)}}var W=function(e){return null===e||void 0===e},D={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","`":"&#x60;","'":"&#x27;"},H=/[&><"'`]/g,R=function(e){return'"'+(""+e).replace(H,function(e){return D[e]})+'"'},q={area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,path:!0,circle:!0,ellipse:!0,line:!0,rect:!0,use:!0,stop:!0,polyline:!0,polygon:!0},j="undefined"!=typeof global?global:"undefined"!=typeof window?window:null;if(j&&j.Inferno)j.Inferno.addTreeConstructor("html",d);else if(j&&!j.Inferno){var G=void 0;try{G=require("inferno")}catch(X){G=null}if(null!=G){if("function"!=typeof G.addTreeConstructor)throw"Your package is out-of-date! Upgrade to latest Inferno in order to use the InfernoServer package.";G.addTreeConstructor("html",d)}}var Y={renderToString:e};return Y});