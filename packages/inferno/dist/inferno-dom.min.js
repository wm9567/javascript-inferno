!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e){return e instanceof Array}function n(e){return a(e._isStateful)}function t(e){return l(e)||i(e)}function o(e){return d(e)||u(e)}function r(e){return u(e)||e===!1||a(e)||d(e)}function l(e){return"string"==typeof e}function i(e){return"number"==typeof e}function u(e){return null===e}function a(e){return e===!0}function d(e){return void 0===e}function f(e){return!1}function s(e){this._type=be.TEXT,this._text=e,this._dom=null}function c(){this._type=be.PLACEHOLDER,this._dom=null}function p(e){this._type=be.FRAGMENT,this._dom=null,this._pointer=null,this._items=e}function _(e){return new s(e)}function m(){return new c}function h(e){return new p(e)}function v(e){return e._type===be.TEXT}function g(e){return e._type===be.PLACEHOLDER}function w(e){return e._type===be.FRAGMENT}function x(e){return e._type===be.ELEMENT}function y(e){return e._type===be.COMPONENT}function C(e,n){w(e)?k(e,n,!0):x(e)?b(e,n):y(e)&&E(e,n)}function k(e,n,t){var o=e._items,r=o.length,l=o._pointer;if(r>0)for(var i=0;r>i;i++){var u=o[i];w(u)?k(u,n,!0):(n&&R(n,u._dom),C(u,null))}n&&t&&R(n,l)}function E(e,n){var t=e._instance,r=null,l=null;o(t)||(r=t._hooks,l=t._children,void 0!==t.render&&(t.componentWillUnmount(),t._unmounted=!0,Re.delete(t),C(t._lastInput,null)));var i=e._hooks||r;o(i)||o(i.onComponentWillUnmount)||i.onComponentWillUnmount(e._dom,i)}function b(n,t){var r=n._hooks;o(r)||o(r.onWillDetach)||r.onWillDetach(n._dom);var l=n._children;if(!o(l))if(e(l))for(var i=0;i<l.length;i++)C(l[i],null);else C(l,null)}function M(e,n,t){e.split(",").forEach(function(e){return n[e]=t})}function T(e){var n=document.createElement(e),t={};for(var o in n)t[o]=!0;return Ie.set(e,t),t}function N(e,n,o){t(n)?e.firstChild.nodeValue=o:e.textContent=o}function O(e,n){var t=Ie.get(e);return d(t)&&(t=T(e)),t[n]}function A(e,n,t){o(t)?e.appendChild(n):e.insertBefore(n,t)}function D(e,n,t){var o=n._pointer;k(n,e,!1),U(e,t,o)}function I(e,n){var t;return t=n===!0?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}function W(e,n,t){if(null===n)return document.createTextNode(e);if(t){if(""!==e)return n.textContent=e,n.firstChild;var o=document.createTextNode("");return n.appendChild(o),o}var r=document.createTextNode(e);return n.appendChild(r),r}function L(e,n,t,r,l,i){var u=null,a=e._lastInput;o(a)||(u=e,e=a),C(e,!1);var d=J(n,null,r,l,i);n._dom=d,U(t,d,e._dom),null!==u&&(u._lasInput=n)}function U(e,n,t){e.replaceChild(n,t)}function S(n){return t(n)?_(n):r(n)?m():e(n)?h(n):n}function X(e,n){var t=e[n];return e[n]=S(t)}function P(e,n){var t=e._dom;t===n?t.innerHTML="":(R(n,t),Ee&&f(e)),C(e,!1)}function R(e,n){e.removeChild(n)}function j(){return document.activeElement}function F(e,n){if(Ee){var t=n.length;if(t>5)for(var o=0;t>o;o++){var l=n[o];r(l)||f(l)}}e.textContent=""}function G(e){null!==e&&e!==document.body&&document.activeElement!==e&&e.focus()}function H(e,n){return e.complex?!1:n.length&&!o(n[0])&&!o(n[0]._key)&&e.length&&!o(e[0])&&!o(e[0]._key)}function Y(e,n){if("option"===e._tag){var t=e._props&&e._props.value;n[t]?(e._props=e._props||{},e._props.selected=!0,e._dom.selected=!0):e._dom.selected=!1}else for(var o=0,r=e._children.length;r>o;o++)Y(e._children[o],n)}function z(n){var t=n._props&&n._props.value,o={};if(e(t))for(var r=0,l=t.length;l>r;r++)o[t[r]]=t[r];else o[t]=t;for(var i=0,u=n._children.length;u>i;i++)Y(n._children[i],o);n._props&&n._props[t]&&delete n._props.value}function V(e,n,t){o(e.onCreated)||e.onCreated(t),o(e.onAttached)||n.addListener(function(){e.onAttached(t)})}function B(e){var n=e.attrs.value;o(n)||(e._dom.value=n)}function q(e,n){if("input"===e){var t=n.attrs.type;if("text"===t)B(n);else if("checkbox"===t||"radio"===t){var o=n.attrs.checked;n._dom.checked=!!o}}else"textarea"===e&&B(n)}function J(e,n,t,o,r){if(g(e))return $(e,n);if(v(e))return Z(e,n);if(w(e))return Q(e,n,t,o,r);if(x(e))return K(e,n,t,o,r);if(y(e))return oe(e,n,t,o,r);throw Error("Bad Input!")}function K(e,n,t,r,i){var a=e._tag;if(!l(a))throw new Error("Inferno Error: expects VElement to have a string as the tag name");"svg"===a&&(i=!0);var d=I(a,i),f=e._children,s=e._props,c=e._hooks;return e._dom=d,o(c)||V(c,t,d),o(f)||te(e,f,d,t,r,i),o(s)||(ee(e),re(e,s,d)),u(n)||n.appendChild(d),d}function Q(e,n,t,o,r){var l=e._items,i=document.createTextNode(""),u=document.createDocumentFragment();return ne(l,u,t,o,r),e._pointer=i,e._dom=u,u.appendChild(i),n&&A(n,u),u}function Z(e,n){var t=document.createTextNode(e._text);return e._dom=t,n&&A(n,t),t}function $(e,n){var t=document.createTextNode("");return e._dom=t,n&&A(n,t),t}function ee(e){"select"===e.tag&&z(e)}function ne(e,n,t,o,r){e.complex=!1;for(var l=0;l<e.length;l++){var i=X(e,l);v(i)?(Z(i,n),e.complex=!0):g(i)?($(i,n),e.complex=!0):w(i)?(Q(i,n,t,o,r),e.complex=!0):J(i,n,t,o,r)}}function te(n,o,l,i,u,a){e(o)?ne(o,l,i,u,a):t(o)?W(o,l,!0):r(o)||J(o,l,i,u,a)}function oe(e,t,l,i,u){var a,d=e._component,f=e._props,s=e._hooks;if(n(e)){var c=new d(f,i);c._patch=le,c._componentToDOMNodeMap=Re;var p=c.getChildContext();o(p)||(i=Object.assign({},i,p)),c._unmounted=!1,c._pendingSetState=!0,c.componentWillMount();var _=c.render();r(_)&&(_=m()),c._pendingSetState=!1,a=J(_,null,l,i,!1),c._lastInput=_,c.componentDidMount(),null===t||r(a)||t.appendChild(a),Re.set(c,a),e._dom=a,e._instance=c}else{o(s)||(o(s.onComponentWillMount)||s.onComponentWillMount(null,f),o(s.onComponentDidMount)||l.addListener(function(){s.onComponentDidMount(a,f)}));var h=d(f,i);r(h)&&(node=m()),a=J(h,null,l,i,null,!1),e._instance=h,null===t||r(a)||t.appendChild(a),e._dom=a}return a}function re(e,n,t){for(var r in n){var l=n[r];if(!o(l))if("style"===r)fe(null,l,t);else if(O(e._tag,r))t[r]=l;else{var i=Ae[r];i?t.setAttributeNS(i,r,l):t.setAttribute(r,l)}}}function le(e,n,o,l,i,u){if(e!==n)if(r(e))J(n,o,l,i,u);else if(r(n))P(e,o);else if(t(e))if(t(n))o.firstChild.nodeValue=n;else{var a=J(n,null,l,i,u);n._dom=a,U(o,a,o.firstChild)}else if(t(n))U(o,document.createTextNode(n),e._dom);else if(y(n))y(e)?se(e,n,o,l,i,u):(U(o,oe(n,null,l,i,u),e._dom),C(e,null));else if(y(e));else if(w(n))w(e)?ce(e,n,o,l,i,u):(U(o,Q(n,null),e._dom),C(e,null));else if(x(n))x(e)?ue(e,n,o,l,i,u):(U(o,J(n,null,l,i,u),e._dom),C(e,null));else if(x(e))U(o,J(n,null,l,i,u),e._dom),C(e,null);else if(w(e))D(o,e,J(n,null,l,i,u));else if(g(n))g(e)?_e(e,n):(U(o,$(n,null),e._dom),C(e,null));else if(g(e))U(o,J(n,null,l,i,u),e._dom);else if(v(n))v(e)?me(e,n):(U(o,Z(n,null),e._dom),C(e,null));else{if(!v(e))throw Error("Bad Input!");U(o,J(n,null,l,i,u),e._dom)}}function ie(n,o,l,i,u,a){r(o)?F(l,n):r(n)?t(o)?N(l,n,o):r(o)||(e(o)?ne(o,l,i,u,a):J(o,l,i,u,a)):e(o)?e(n)?(o.complex=n.complex,H(n,o)?he(n,o,l,i,u,a,null):pe(n,o,l,i,u,a,null)):pe([n],o,l,i,u,a,null):e(n)?pe(n,[o],l,i,u,a,null):le(n,o,l,i,u,a)}function ue(e,n,t,r,l,i){var u=n._hooks,a=!o(u);a&&!o(u.onWillUpdate)&&u.onWillUpdate(e._dom);var d=n._tag,f=e._tag;if("svg"===d&&(i=!0),f!==d)L(e,n,t,r,l,i);else{var s=e._dom,c=e._props,p=n._props,_=e._children,m=n._children;n._dom=s,_!==m&&ie(_,m,s,r,l,i),c!==p&&ae(e,n,c,p,s),a&&!o(u.onDidUpdate)&&u.onDidUpdate(s),q(d,n)}}function ae(e,n,t,r,l){var i=n._tag;t=t||{},r=r||{},"select"===e._tag&&z(n);for(var u in r){var a=r[u],f=t[u];if(f!==a)if(o(a))de(i,u,l);else if("style"===u)fe(f,a,l);else if(O(i,u))l[u]=a;else{var s=Ae[u];s?l.setAttributeNS(s,u,a):l.setAttribute(u,a)}}for(var c in t)d(r[c])&&de(i,c,l)}function de(e,n,t){"className"===n?t.removeAttribute("class"):"id"===n?t.removeAttribute("id"):O(e,n)?t[n]=null:t.removeAttribute(n)}function fe(e,n,t){if(l(n))t.style.cssText=n;else if(o(e)){if(!o(n))for(var r=Object.keys(n),u=0;u<r.length;u++){var a=r[u],d=n[a];i(d)&&!De[a]?t.style[a]=d+"px":t.style[a]=d}}else if(o(n))t.removeAttribute("style");else{for(var f=Object.keys(n),s=0;s<f.length;s++){var c=f[s],p=n[c];i(p)&&!De[c]?t.style[c]=p+"px":t.style[c]=p}for(var _=Object.keys(e),m=0;m<_.length;m++){var h=_[m];o(n[h])&&(t.style[h]="")}}}function se(e,t,l,i,u,a){var d=e._component,f=t._component,s=t._props||{};if(d!==f)L(e,t,l,i,u,a);else if(n(t)){var c=(e._dom,e._instance),p=c.props,_=c.state,h=c.state,v=c.getChildContext();t._instance=c,c.context=u,o(v)||(u=Object.assign({},u,v));var g=c._updateComponent(_,h,p,s);g===Ce?g=c._lastInput:o(g)&&(g=m()),le(c._lastInput,g,l,i,u,null,!1),c._lastInput=g,c.componentDidUpdate(p,_),t._dom=g._dom,Re.set(c,g._dom)}else{var w=!0,x=e._props,y=t._hooks,C=!o(y);if(C&&!o(y.onComponentShouldUpdate)&&(w=y.onComponentShouldUpdate(e._dom,x,s)),w!==!1){C&&!o(y.onComponentWillUpdate)&&y.onComponentWillUpdate(e._dom,x,s);var k=f(s,u),E=e._instance;r(k)&&(k=m()),t._dom=e._dom,le(E,k,l,i,u,null,null,!1),t._instance=k,C&&!o(y.onComponentDidUpdate)&&y.onComponentDidUpdate(E._dom,x,s)}}}function ce(e,n,t,o,r,l){var i=e._items,u=n._items,a=e._pointer;n._dom=e._dom,n._pointer=a,!i!==u&&(H(i,u)?he(i,u,t,o,r,l,n):pe(i,u,t,o,r,l,n))}function pe(e,n,t,o,r,l,i){for(var u=e.length,a=n.length,d=u>a?a:u,f=0;d>f;f++){var s=e[f],c=X(n,f);le(s,c,t,o,r,l)}if(a>u)for(f=d;a>f;f++){var p=X(n,f);A(t,J(p,null,o,r,l),i&&i.pointer)}else if(u>a)for(f=d;u>f;f++)P(e[f],t)}function _e(e,n){n._dom=e._dom}function me(e,n){var t=n._text,o=e._dom;n._dom=o,e.text!==t&&(o.nodeValue=t)}function he(e,n,t,o,r,l,i){for(var u,a=e.length,d=n.length,f=a-1,s=d-1,c=0,p=0,_=null,m=null,h=null,v=null;f>=c&&s>=p&&(m=n[p],_=e[c],m._key===_._key);)le(_,m,t,o,r,l,!1),p++,c++;for(;f>=c&&s>=p&&(h=n[s],v=e[f],h._key===v._key);)le(v,h,t,o,r,l,!1),s--,f--;for(;f>=c&&s>=p&&(h=n[s],_=e[c],h._key===_._key);)u=d>s+1?n[s+1]._dom:null,le(_,h,t,o,r,l,!1),A(t,h._dom,u),s--,c++;for(;f>=c&&s>=p&&(m=n[p],v=e[f],m._key===v._key);)u=e[c]._dom,le(v,m,t,o,r,l,!1),A(t,m._dom,u),p++,f--;if(c>f){if(s>=p)for(u=d>s+1?n[s+1]._dom:i&&i.pointer;s>=p;p++)A(t,J(n[p],null,o,r,l),u)}else if(p>s)for(;f>=c;)P(e[c++],t);else{var g,w=f-c+1,x=s-p+1,y=new Array(x);for(g=0;x>g;g++)y[g]=-1;var C,k=!1,E=0,b=0;if(16>=w*x)for(g=c;f>=g;g++){var M=!0;for(v=e[g],C=p;s>=C;C++)if(h=n[C],v._key===h._key){y[C-p]=g,b>C?k=!0:b=C,le(v,h,t,o,r,l,!1),M=!1;break}M&&(P(v,t),E++)}else{var T=new Map;for(g=p;s>=g;g++)T.set(n[g]._key,g);for(g=f;g>=c;g--)v=e[g],C=T.get(v._key),void 0===C?(P(v,t),E++):(h=n[C],y[C-p]=g,b>C?k=!0:b=C,le(v,h,t,o,r,l,!1))}var N;if(k){var O=ve(y);for(C=O.length-1,g=x-1;g>=0;g--)-1===y[g]?(N=g+p,u=d>N+1?n[N+1]._dom:i&&i.pointer,A(t,J(n[N],null,o,r,l),u)):0>C||g!==O[C]?(N=g+p,u=d>N+1?n[N+1]._dom:i&&i.pointer,A(t,n[N]._dom,u)):C--}else if(w-E!==x)for(g=x-1;g>=0;g--)-1===y[g]&&(N=g+p,u=d>N+1?n[N+1]._dom:i&&i.pointer,A(t,J(n[N],null,o,r,l),u))}}function ve(e){var n=e.slice(0),t=[];t.push(0);var o,r,l,i,u;for(o=0;o<e.length;o++)if(-1!==e[o])if(r=t[t.length-1],e[r]<e[o])n[o]=r,t.push(o);else{for(l=0,i=t.length-1;i>l;)u=(l+i)/2|0,e[t[u]]<e[o]?l=u+1:i=u;e[o]<e[t[l]]&&(l>0&&(n[o]=t[l-1]),t[l]=o)}for(l=t.length,i=t[l-1];l-- >0;)t[l]=i,i=n[i];return t}function ge(){this._listeners=[],this.scrollX=null,this.scrollY=null,this.screenHeight=Le,this.screenWidth=We}function we(e,n,t){}function xe(e){return Re.get(e)||null}function ye(e,n){var t=Pe.get(n),o=new ge;if(d(t))r(e)||(we(e,n,o)||J(e,n,o,{},null,!1),o.trigger(),Pe.set(n,{input:e}));else{var l=j();le(t.input,e,n,o,{},null,!1),o.trigger(),u(e)&&Pe.delete(n),t.input=e,G(l)}}var Ce="NO_OP",ke="undefined"!=typeof window&&window.document,Ee=!0,be={ELEMENT:0,COMPONENT:1,TEMPLATE:2,TEXT:3,PLACEHOLDER:4,FRAGMENT:5},Me="http://www.w3.org/1999/xlink",Te="http://www.w3.org/XML/1998/namespace",Ne={},Oe={},Ae={},De={};M("xlink:href,xlink:arcrole,xlink:actuate,xlink:role,xlink:titlef,xlink:type",Ae,Me),M("xml:base,xml:lang,xml:space",Ae,Te),M("volume,value",Ne,!0),M("muted,scoped,loop,open,checked,default,capture,disabled,selected,readonly,multiple,required,autoplay,controls,seamless,reversed,allowfullscreen,novalidate",Oe,!0),M("animationIterationCount,borderImageOutset,borderImageSlice,borderImageWidth,boxFlex,boxFlexGroup,boxOrdinalGroup,columnCount,flex,flexGrow,flexPositive,flexShrink,flexNegative,flexOrder,gridRow,gridColumn,fontWeight,lineClamp,lineHeight,opacity,order,orphans,tabSize,widows,zIndex,zoom,fillOpacity,floodOpacity,stopOpacity,strokeDasharray,strokeDashoffset,strokeMiterlimit,strokeOpacity,strokeWidth,",De,!0);var Ie=new Map;T("div"),T("span"),T("table"),T("tr"),T("td"),T("a"),T("p");var We=ke&&window.screen.width,Le=ke&&window.screen.height,Ue=0,Se=0,Xe=0;ke&&(window.onscroll=function(){Ue=window.scrollX,Se=window.scrollY,Xe=performance.now()},window.resize=function(){Ue=window.scrollX,Se=window.scrollY,We=window.screen.width,Le=window.screen.height,Xe=performance.now()}),ge.prototype={refresh:function(){this.scrollX=ke&&window.scrollX,this.scrollY=ke&&window.scrollY},addListener:function(e){this._listeners.push(e)},trigger:function(){for(var e=this,n=0;n<this._listeners.length;n++)e._listeners[n]()}};var Pe=(ke?document.body:null,new Map),Re=new Map,je={render:ye,findDOMNode:xe,mount:J,patch:le,unmount:C};return je});