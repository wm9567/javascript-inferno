!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e){return e instanceof Array}function n(e){return o(e)||i(e)}function t(e){return f(e)||l(e)}function r(e){return l(e)||e===!1||u(e)||f(e)}function o(e){return"string"==typeof e}function i(e){return"number"==typeof e}function l(e){return null===e}function u(e){return e===!0}function f(e){return void 0===e}function a(e){throw e||(e=G),new Error("Inferno Error: "+e)}function c(e){return e.type===Y.TEMPLATE}function d(e,n,t,r,o,i){e!==n&&(c(n)?c(e)&&p(e,n,t,r,o,i):a())}function s(t,o,i,l,u,f){if(r(o))r(t)||O(i,t,l);else if(r(t))n(o)?w(i,o):r(o)||(e(o)?mountArrayChildrenWithoutType(o,i,l,u,f):M(o,i,l,u,f));else if(n(o))n(t)?E(i,o):w(i,o);else if(n(t)){var a=N(t);a.dom=i.firstChild,s(a,o,i,l,u,f)}else e(o)?e(t)?(o.complex=t.complex,L(t,o)?m(t,o,i,l,u,f,null):patchNonKeyedChildren(t,o,i,l,u,f,null)):patchNonKeyedChildren([t],o,i,l,u,f,null):e(t)?patchNonKeyedChildren(t,[o],i,l,u,f,null):d(t,o,i,l,u,f)}function p(e,n,t,r,o,i){var l=e.dom,u=e.bp,a=n.bp;if(n.dom=l,u!==a){var c=K(n,null,r,o,i);D(t,c,l),k(e,null,r,!0)}else{var d=n.v0;n.v1,n.v2,n.v3;if(!f(d)){var s=e.v0;s!==d&&h(a.v0,s,d,l,r,o,i)}}}function h(e,n,t,r,o,i,l){switch(e){case F.CHILDREN_KEYED:m(n,t,r,o,i,l,null);break;case F.CHILDREN_TEXT:E(r,t)}}function m(e,n,t,r,o,i,u){var a,c,s,p,h,m=e.length,y=n.length,g=m-1,x=y-1,b=0,w=0,E=e[b],C=n[w],D=e[g],N=n[x],T=null,_=null;if(0===m)return void(0!==y&&R(n,t,r,o,i));if(0===y)return void(0!==m&&O(t,e,r));e:for(;;){for(;E.key===C.key;){if(d(E,C,t,r,o,i),b++,w++,b>g||w>x)break e;E=e[b],C=n[w]}for(;D.key===N.key;){if(d(D,N,t,r,o,i),g--,x--,b>g||w>x)break e;D=e[g],N=n[x]}if(D.key!==C.key){if(E.key!==N.key)break;if(d(E,N,t,r,o,i),p=x+1,s=p<n.length?n[p].dom:u&&u.pointer,I(t,N.dom,s),b++,x--,b>g||w>x)break;E=e[b],N=n[x]}else{if(d(D,C,t,r,o,i),I(t,C.dom,E.dom),g--,w++,b>g||w>x)break;D=e[g],C=n[w]}}if(b>g){if(w<=x)for(p=x+1,s=p<n.length?n[p].dom:u&&u.pointer;w<=x;)I(t,M(n[w++],null,r,o,i),s)}else if(w>x)for(;b<=g;)k(e[b++],t,r);else{m=g-b+1,y=x-w+1;var L=e,K=new Array(y);for(a=0;a<y;a++)K[a]=-1;var H=!1,A=0,P=0;if(y<=4||m*y<=16){for(a=b;a<=g;a++)if(T=e[a],P<y)for(c=w;c<=x;c++)if(_=n[c],T.key===_.key){K[c-w]=a,A>c?H=!0:A=c,d(T,_,t,r,o,i,!1),P++,L[a]=null;break}}else{var W=new Map;for(a=w;a<=x;a++)h=n[a],W.set(h.key,a);for(a=b;a<=g;a++)T=e[a],P<y&&(c=W.get(T.key),f(c)||(_=n[c],K[c-w]=a,A>c?H=!0:A=c,d(T,_,t,r,o,i,!1),P++,L[a]=null))}if(m===e.length&&0===P)for(O(t,e,r);w<y;)I(t,M(n[w++],null,r,o,i),null);else{for(a=m-P;a>0;)T=L[b++],l(T)||(k(T,t,r),a--);if(H){var X=v(K);for(c=X.length-1,a=y-1;a>=0;a--)K[a]===-1?(A=a+w,h=n[A],p=A+1,s=p<n.length?n[p].dom:u&&u.pointer,I(t,M(h,t,r,o,i),s)):c<0||a!==X[c]?(A=a+w,h=n[A],p=A+1,s=p<n.length?n[p].dom:u&&u.pointer,I(t,h.dom,s)):c--}else if(P!==y)for(a=y-1;a>=0;a--)K[a]===-1&&(A=a+w,h=n[A],p=A+1,s=p<n.length?n[p].dom:u&&u.pointer,I(t,M(h,null,r,o,i),s))}}}function v(e){var n=e.slice(0),t=[];t.push(0);var r,o,i,l,u;for(r=0;r<e.length;r++)if(e[r]!==-1)if(o=t[t.length-1],e[o]<e[r])n[r]=o,t.push(r);else{for(i=0,l=t.length-1;i<l;)u=(i+l)/2|0,e[t[u]]<e[r]?i=u+1:l=u;e[r]<e[t[i]]&&(i>0&&(n[r]=t[i-1]),t[i]=r)}for(i=t.length,l=t[i-1];i-- >0;)t[i]=l,l=n[l];return t}function y(e,n,t,r){var o=e.bp,i=e.key,l=null===i?o.pools.nonKeyed:o.pools.keyed.get(i);if(!f(l)){var u=l.pop();if(!f(u))return p(u,e,null,n,t,r),e.dom}return null}function g(e){var n=e.bp,t=e.key,r=n.pools;if(l(t))r.nonKeyed.push(e);else{var o=r.keyed.get(t);f(o)&&(o=[],r.keyed.set(t,o)),o.push(e)}}function k(e,n,t,o){r(e)||c(e)&&x(e,n,t,o)}function x(e,n,t,r){l(n)||n.removeChild(e.dom),j&&(n||r)&&g(e)}function b(e,n,t){e.split(",").forEach(function(e){return n[e]=t})}function w(e,n){""!==n?e.textContent=n:e.appendChild(document.createTextNode(""))}function E(e,n){e.firstChild.nodeValue=n}function C(e,n){e.appendChild(n)}function I(e,n,r){t(r)?C(e,n):e.insertBefore(n,r)}function D(e,n,t){e.replaceChild(n,t)}function N(t){return n(t)||r(t)||e(t),t}function T(){return document.activeElement}function O(e,n,t){e.textContent="";for(var o=0;o<n.length;o++){var i=n[o];r(i)||k(i,null,t,!0)}}function _(e){null!==e&&e!==document.body&&document.activeElement!==e&&e.focus()}function L(e,n){return!e.complex&&(n.length&&!t(n[0])&&!t(n[0].key)&&e.length&&!t(e[0])&&!t(e[0].key))}function M(e,n,t,r,o){if(c(e))return K(e,n,t,r,o)}function K(e,n,t,r,o){var i=e.bp,u=null;if(j&&(u=y(e,t,r,o)),l(u)){u=document.createElement(i.tag);var a=e.v0;e.v1,e.v2,e.v3;e.dom=u,f(a)||H(i.v0,a,u,t,r,o)}return l(n)||n.appendChild(u),u}function H(e,n,t,r,o,i){switch(e){case F.CHILDREN_KEYED:R(n,t,r,o,i);break;case F.CHILDREN_TEXT:w(t,n)}}function R(e,n,t,r,o){for(var i=0;i<e.length;i++)M(e[i],n,t,r,o)}function A(t,o,i,l,u){e(t)||(n(t)?w(o,t):r(t)||M(t,o,i,l,u))}function P(e){return Z.get(e)||null}function W(e,n){var t=Q.get(n),o=new X;if(ee===n&&a(),e!==z)if(f(t))r(e)||(A(e,n,o,{},!1),o.trigger(),Q.set(n,{input:e}));else{var i=T();l(e)?(k(t.input,n,o,!0),Q.delete(n)):s(t.input,e,n,o,{},!1),o.trigger(),t.input=e,_(i)}}var X=function(){this._listeners=[]};X.prototype.addListener=function(e){this._listeners.push(e)},X.prototype.trigger=function(){for(var e=this,n=0;n<this._listeners.length;n++)e._listeners[n]()};var z="$NO_OP",G="a runtime error occured! Use Inferno in development environment to find the error.",S="undefined"!=typeof window&&window.document,Y={TEMPLATE:0},F={CHILDREN_KEYED:1,CHILDREN_TEXT:2},j=!0,q="http://www.w3.org/1999/xlink",B="http://www.w3.org/XML/1998/namespace",U={},V={},$={},J={};b("xlink:href,xlink:arcrole,xlink:actuate,xlink:role,xlink:titlef,xlink:type",$,q),b("xml:base,xml:lang,xml:space",$,B),b("volume,value",U,!0),b("muted,scoped,loop,open,checked,default,capture,disabled,selected,readonly,multiple,required,autoplay,controls,seamless,reversed,allowfullscreen,novalidate",V,!0),b("animationIterationCount,borderImageOutset,borderImageSlice,borderImageWidth,boxFlex,boxFlexGroup,boxOrdinalGroup,columnCount,flex,flexGrow,flexPositive,flexShrink,flexNegative,flexOrder,gridRow,gridColumn,fontWeight,lineClamp,lineHeight,opacity,order,orphans,tabSize,widows,zIndex,zoom,fillOpacity,floodOpacity,stopOpacity,strokeDasharray,strokeDashoffset,strokeMiterlimit,strokeOpacity,strokeWidth,",J,!0);var Q=new Map,Z=new Map,ee=S?document.body:null,ne={render:W,findDOMNode:P,mount:M,patch:d,unmount:k};return ne});