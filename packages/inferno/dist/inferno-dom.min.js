!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e){return e instanceof Array}function n(e){return!d(e.prototype)&&!d(e.prototype.render)}function t(e){return u(e)||f(e)}function o(e){return d(e)||a(e)}function r(e){return a(e)||e===!1||c(e)||d(e)}function l(e){return"function"==typeof e}function i(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function u(e){return"string"==typeof e}function f(e){return"number"==typeof e}function a(e){return null===e}function c(e){return e===!0}function d(e){return void 0===e}function s(e){throw e||(e=we),new Error("Inferno Error: "+e)}function p(e){return e.type===Pe.ELEMENT}function m(e){return e.type===Pe.OPT_ELEMENT}function v(e){return e.type===Pe.COMPONENT}function h(e){return e.type===Pe.TEXT}function y(e){return e.type===Pe.FRAGMENT}function g(e){return e.type===Pe.FRAGMENT}function k(e){return!d(e.type)}function E(e){return e===Ae.UNKNOWN}function x(e){return e===Ae.KEYED}function N(e){return e===Ae.NON_KEYED}function C(e){return e===Ae.TEXT}function _(e){return e===Ae.NODE}function b(e,n,t,o,r,l){oe(t,de(n,null,o,r,l),e.dom),j(e,null,o)}function T(e,n,t,o,r,l){e!==n&&(m(n)?m(e)?O(e,n,t,o,r,l):(oe(t,ye(n,null,o,r,l),e.dom),j(e,null,o)):m(e)?b(e,n,t,o,r,l):v(n)?v(e)?D(e,n,t,o,r,l):(oe(t,Ce(n,null,o,r,l),e.dom),j(e,null,o)):h(n)?h(e)&&A(e,n):y(n)?y(e)?L(e,n,t,o,r,l):(oe(t,mountVFragment(n,null,o,r,l),e.dom),j(e,null,o)):s())}function O(e,n,t,o,r,l){var i=e.dom,u=e.bp,f=n.bp;if(n.dom=i,u!==f){var c=ye(n,null,o,r,l);oe(t,c,i),j(e,null,o,!0)}else{var d=f.v0;if(!a(d)){var s=e.v0,p=n.v0,m=f.v1;if(s!==p&&w(d,s,p,f.d0,i,o,r,l),!a(m)){var v=e.v1,h=n.v1,y=f.v2;if(v!==h&&w(m,v,h,f.d1,i,o,r,l),!a(y)){var g=e.v2,k=n.v2;g!==k&&w(y,g,k,f.d2,i,o,r,l)}}}}}function w(e,n,t,r,l,i,u,f){switch(e){case De.CHILDREN:M(r,n,t,l,i,u,f);break;case De.PROP_CLASS_NAME:o(t)?l.removeAttribute("class"):l.className=t;break;case De.PROP_STYLE:W(n,t,l)}}function M(e,n,t,o,r,l,i){C(e)?Q(o,t):_(e)?T(n,t,o,r,l,i):x(e)?I(n,t,o,r,l,i,null):N(e)?S(n,t,o,r,l,i,null,!1):E(e)?P(n,t,o,r,l,i):s()}function P(n,o,l,i,u,f){if(r(o))r(n)||fe(l,n,i);else if(r(n))t(o)?J(l,o):r(o)||(e(o)?mountArrayChildrenWithoutType(o,l,i,u,f):de(o,l,i,u,f));else if(k(o))T(n,o,l,i,u,f);else if(t(o))t(n)?Q(l,o):J(l,o);else if(t(n)){var a=re(n);a.dom=l.firstChild,P(a,o,l,i,u,f)}else e(o)?e(n)?(o.complex=n.complex,ce(n,o)?I(n,o,l,i,u,f,null):S(n,o,l,i,u,f,null,!0)):S([n],o,l,i,u,f,null,!0):e(n)&&S(n,[o],l,i,u,f,null,!0)}function D(e,t,l,i,u,f){var a=e.component,c=t.component,d=t.props||{};if(a!==c)te(e,t,l,i,u,f);else if(n(t)){var s=e.instance;if(s._unmounted)oe(l,Ce(t,null,i,u,f),e.dom);else{var p=s.props,m=s.state,v=s.state,h=s.getChildContext();t.instance=s,s.context=u,o(h)||(u=Object.assign({},u,h));var y=s._lastInput,g=s._updateComponent(m,v,p,d);g===Oe?g=y:r(g)&&(g=createVPlaceholder()),s._lastInput=g,T(y,g,l,i,u,null,!1),s._vComponent=t,s._lastInput=g,s.componentDidUpdate(p,m),t.dom=g.dom,Ye.set(s,g.dom)}}else{var k=!0,E=e.props,x=t.hooks,N=!o(x),C=e.instance;if(t.dom=e.dom,t.instance=C,N&&!o(x.onComponentShouldUpdate)&&(k=x.onComponentShouldUpdate(E,d)),k!==!1){N&&!o(x.onComponentWillUpdate)&&x.onComponentWillUpdate(E,d);var _=c(d,u);if(_===Oe)return;r(_)&&(_=createVPlaceholder()),T(C,_,l,i,u,null,null,!1),t.instance=_,N&&!o(x.onComponentDidUpdate)&&x.onComponentDidUpdate(E,d)}}}function A(e,n){var t=n.text,o=e.dom;n.dom=o,e.text!==t&&(o.nodeValue=t)}function L(e,n,t,o,r,l){var i=e.children,u=n.children,f=e.pointer;if(n.dom=e.dom,n.pointer=f,!i!==u){var a=e.childrenType,c=n.childrenType;if(a===c){if(x(c))return I(i,u,t,o,r,l,n);if(N(c))return S(i,u,t,o,r,l,n,!1)}ce(i,u)?I(i,u,t,o,r,l,n):S(i,u,t,o,r,l,n,!0)}}function S(e,n,t,o,r,l,i,u){for(var f=e.length,a=n.length,c=f>a?a:f,d=0;d<c;d++){var s=e[d],p=u?le(n,d):n[d];T(s,p,t,o,r,l)}if(f<a)for(d=c;d<a;d++){var m=le(n,d);ee(t,de(m,null,o,r,l),i&&i.pointer)}else if(f>a)for(d=c;d<f;d++)j(e[d],t,o)}function I(e,n,t,o,r,l,i){var u,f,c,s,p,m=e.length,v=n.length,h=m-1,y=v-1,g=0,k=0,E=e[g],x=n[k],N=e[h],C=n[y],_=null,b=null;if(0===m)return void(0!==v&&Ee(n,t,o,r,l));if(0===v)return void(0!==m&&fe(t,e,o));e:for(;;){for(;E.key===x.key;){if(T(E,x,t,o,r,l),g++,k++,g>h||k>y)break e;E=e[g],x=n[k]}for(;N.key===C.key;){if(T(N,C,t,o,r,l),h--,y--,g>h||k>y)break e;N=e[h],C=n[y]}if(N.key!==x.key){if(E.key!==C.key)break;if(T(E,C,t,o,r,l),s=y+1,c=s<n.length?n[s].dom:i&&i.pointer,ee(t,C.dom,c),g++,y--,g>h||k>y)break;E=e[g],C=n[y]}else{if(T(N,x,t,o,r,l),ee(t,x.dom,E.dom),h--,k++,g>h||k>y)break;N=e[h],x=n[k]}}if(g>h){if(k<=y)for(s=y+1,c=s<n.length?n[s].dom:i&&i.pointer;k<=y;)ee(t,de(n[k++],null,o,r,l),c)}else if(k>y)for(;g<=h;)j(e[g++],t,o);else{m=h-g+1,v=y-k+1;var O=e,w=new Array(v);for(u=0;u<v;u++)w[u]=-1;var M=!1,P=0,D=0;if(v<=4||m*v<=16){for(u=g;u<=h;u++)if(_=e[u],D<v)for(f=k;f<=y;f++)if(b=n[f],_.key===b.key){w[f-k]=u,P>f?M=!0:P=f,T(_,b,t,o,r,l,!1),D++,O[u]=null;break}}else{var A=new Map;for(u=k;u<=y;u++)p=n[u],A.set(p.key,u);for(u=g;u<=h;u++)_=e[u],D<v&&(f=A.get(_.key),d(f)||(b=n[f],w[f-k]=u,P>f?M=!0:P=f,T(_,b,t,o,r,l,!1),D++,O[u]=null))}if(m===e.length&&0===D)for(fe(t,e,o);k<v;)ee(t,de(n[k++],null,o,r,l),null);else{for(u=m-D;u>0;)_=O[g++],a(_)||(j(_,t,o),u--);if(M){var L=R(w);for(f=L.length-1,u=v-1;u>=0;u--)w[u]===-1?(P=u+k,p=n[P],s=P+1,c=s<n.length?n[s].dom:i&&i.pointer,ee(t,de(p,t,o,r,l),c)):f<0||u!==L[f]?(P=u+k,p=n[P],s=P+1,c=s<n.length?n[s].dom:i&&i.pointer,ee(t,p.dom,c)):f--}else if(D!==v)for(u=v-1;u>=0;u--)w[u]===-1&&(P=u+k,p=n[P],s=P+1,c=s<n.length?n[s].dom:i&&i.pointer,ee(t,de(p,null,o,r,l),c))}}}function R(e){var n=e.slice(0),t=[];t.push(0);var o,r,l,i,u;for(o=0;o<e.length;o++)if(e[o]!==-1)if(r=t[t.length-1],e[r]<e[o])n[o]=r,t.push(o);else{for(l=0,i=t.length-1;l<i;)u=(l+i)/2|0,e[t[u]]<e[o]?l=u+1:i=u;e[o]<e[t[l]]&&(l>0&&(n[o]=t[l-1]),t[l]=o)}for(l=t.length,i=t[l-1];l-- >0;)t[l]=i,i=n[i];return t}function U(e,n,t,r){if(Ue[e])r[e]=o(t)?"":t;else if(We[e])r[e]=!!t;else if(n!==t){if(o(t))return r.removeAttribute(e),!1;if("className"===e)return r.className=t,!1;if("style"===e)W(n,t,r);else{if("defaultChecked"===e)return a(n)&&r.addAttribute("checked"),!1;if("defaultValue"===e)return a(n)&&r.setAttribute("value",t),!1;if(i(e))r[e.toLowerCase()]=t;else if("dangerouslySetInnerHTML"===e){var l=n&&n.__html,u=t&&t.__html;o(u)&&s(),l!==u&&(r.innerHTML=u)}else if("childrenType"!==e&&"ref"!==e&&"key"!==e){var f=Ke[e];return f?r.setAttributeNS(f,e,t):r.setAttribute(e,t),!1}}}return!0}function W(e,n,t){if(u(n))t.style.cssText=n;else if(o(e)){if(!o(n))for(var r=Object.keys(n),l=0;l<r.length;l++){var i=r[l],a=n[i];f(a)&&!Ve[i]?t.style[i]=a+"px":t.style[i]=a}}else if(o(n))t.removeAttribute("style");else{for(var c=Object.keys(n),d=0;d<c.length;d++){var s=c[d],p=n[s];f(p)&&!Ve[s]?t.style[s]=p+"px":t.style[s]=p}for(var m=Object.keys(e),v=0;v<m.length;v++){var h=m[v];o(n[h])&&(t.style[h]="")}}}function K(e,n,t,o){var r=e.bp,l=e.key,i=null===l?r.pools.nonKeyed:r.pools.keyed.get(l);if(!d(i)){var u=i.pop();if(!d(u))return O(u,e,null,n,t,o),e.dom}return null}function V(e){var n=e.bp,t=e.key,o=n.pools;if(a(t))o.nonKeyed.push(e);else{var r=o.keyed.get(t);d(r)&&(r=[],o.keyed.set(t,r)),r.push(e)}}function F(e,n,t,o){var r=e.component,l=e.key,i=Se.get(r);if(!d(i)){var u=null===l?i.nonKeyed:i.keyed.get(l);if(!d(u)){var f=u.pop();if(!d(f))return D(f,e,null,n,t,o),e.dom}}return null}function Y(e){var n=e.component,t=e.key,o=Se.get(n);if(d(o)&&(o={nonKeyed:[],keyed:new Map},Se.set(n,o)),a(t))o.nonKeyed.push(e);else{var r=o.keyed.get(t);d(r)&&(r=[],o.keyed.set(t,r)),r.push(e)}}function j(e,n,t,o){r(e)||(m(e)?X(e,n,t,o):v(e)?B(e,n,t,o):p(e)?q(e,n,t):y(e)?z(e,n,!0,t):h(e)?H(e,n):g(e)&&G(e,n))}function G(e,n){n&&ie(n,e.dom)}function H(e,n){n&&ie(n,e.dom)}function X(e,n,t,o){a(n)||n.removeChild(e.dom),Le&&(n||o)&&V(e)}function z(e,n,t,o){var r=e.children,l=r.length,i=e.pointer;if(l>0)for(var u=0;u<l;u++){var f=r[u];y(f)?z(f,n,!0,o,!1):j(f,n,o,!1)}n&&t&&ie(n,i)}function B(e,n,t,r){var l=e.instance,i=null,u=null;if(!o(l)){var f=e.ref;f&&f(null),i=l.hooks,u=l.children,void 0!==l.render?(l.componentWillUnmount(),l._unmounted=!0,Ye.delete(l),j(l._lastInput,null,t,!1)):j(l,null,t,!1)}var a=e.hooks||i;o(a)||o(a.onComponentWillUnmount)||a.onComponentWillUnmount(a),n&&ie(n,e.dom),Le&&(n||r)&&Y(e)}function q(n,t,r){var l=(n.hooks,n.dom),i=n.ref;i&&i(null);var u=n.children;if(!o(u))if(e(u))for(var f=0;f<u.length;f++)j(u[f],null,r,!1);else j(u,null,r,!1);t&&ie(t,l)}function $(e,n,t){e.split(",").forEach(function(e){return n[e]=t})}function J(e,n){""!==n?e.textContent=n:e.appendChild(document.createTextNode(""))}function Q(e,n){e.firstChild.nodeValue=n}function Z(e,n){e.appendChild(n)}function ee(e,n,t){o(t)?Z(e,n):e.insertBefore(n,t)}function ne(e,n){var t;return t=n===!0?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}function te(e,n,t,r,l,i){var u=null,f=e._lastInput;o(f)||(u=e,e=f),j(e,null,r,!0);var a=de(n,null,r,l,i);n.dom=a,oe(t,a,e.dom),null!==u&&(u._lasInput=n)}function oe(e,n,t){e.replaceChild(n,t)}function re(n){return t(n)||r(n)||e(n),n}function le(e,n){var t=e[n];return e[n]=re(t)}function ie(e,n){e.removeChild(n)}function ue(){return document.activeElement}function fe(e,n,t){e.textContent="";for(var o=0;o<n.length;o++){var l=n[o];r(l)||j(l,null,t,!0)}}function ae(e){null!==e&&e!==document.body&&document.activeElement!==e&&e.focus()}function ce(e,n){return!e.complex&&(n.length&&!o(n[0])&&!o(n[0].key)&&e.length&&!o(e[0])&&!o(e[0].key))}function de(e,n,t,o,r){return m(e)?ye(e,n,t,o,r):v(e)?Ce(e,n,t,o,r):p(e)?pe(e,n,t,o,r):h(e)?he(e,n):y(e)?me(e,n,t,o,r):g(e)?se(e,n):void s()}function se(e,n){var t=document.createTextNode("");return e.dom=t,n&&Z(n,t),t}function pe(e,n,t,r,l){var i=e.tag;u(i)||s(),"svg"===i&&(l=!0);var f=ne(i,l),d=e.children,p=e.props,m=e.ref,v=!o(p);return e.dom=f,o(m)||t.addListener(function(){m(f)}),"select"===i&&v&&c(p.multiple)&&U("multiple",null,!0,f),o(d)||ke(e.childrenType,d,f,t,r,l),v&&mountProps(e,p,f),a(n)||Z(n,f),f}function me(e,n,t,o,r){var l=e.children,i=document.createTextNode(""),u=document.createDocumentFragment(),f=e.childrenType;return x(f)||N(f)?Ee(l,u,t,o,r):E(f)&&Ne(l,u,t,o,r),e.pointer=i,e.dom=u,Z(u,i),n&&Z(n,u),u}function ve(e,n){var t=e.staticVElement,o=t.tag,r=document.createElement(o),l=t.props;for(var i in l)U(i,null,l[i],r);return e.clone=r,r.cloneNode(!0)}function he(e,n){var t=document.createTextNode(e.text);return e.dom=t,a(n)||Z(n,t),t}function ye(e,n,t,o,r){var l=e.bp,i=null;if(Le&&(i=K(e,t,o,r)),a(i)){i=l.clone&&l.clone.cloneNode(!0)||ve(l,r),e.dom=i;var u=l.v0;if(!a(u)){ge(u,e.v0,l.d0,i,t,o,r);var f=l.v1;if(!a(f)){ge(f,e.v1,l.d1,i,t,o,r);var c=l.v2;a(c)||ge(c,e.v2,l.d2,i,t,o,r)}}}return a(n)||n.appendChild(i),i}function ge(e,n,t,r,l,i,u){switch(e){case De.CHILDREN:ke(t,n,r,l,i,u);break;case De.PROP_CLASS_NAME:o(n)||(r.className=n);break;case De.PROP_DATA:r.dataset[t]=n;break;case De.PROP_STYLE:W(null,n,r)}}function ke(e,n,t,o,r,l){C(e)?J(t,n):_(e)?de(n,t,o,r,l):x(e)||N(e)?Ee(n,t,o,r,l):E(e)?xe(n,t,o,r,l):s()}function Ee(e,n,t,o,r){for(var l=0;l<e.length;l++)de(e[l],n,t,o,r)}function xe(n,o,l,i,u){e(n)?Ne(n,o,l,i,u):t(n)?J(o,n):r(n)||de(n,o,l,i,u)}function Ne(e,n,t,o,r){e.complex=!1;for(var l=0;l<e.length;l++){var i=le(e,l);h(i)?(he(i,n),e.complex=!0):g(i)?(se(i,n),e.complex=!0):y(i)?(me(i,n,t,o,r),e.complex=!0):de(i,n,t,o,r)}}function Ce(e,t,i,u,f){if(Le){var c=F(e,i,u,f);if(!a(c))return a(t)||Z(t,c),c}var d,p=e.component,m=e.props,v=e.hooks,h=e.ref;if(n(e)){v&&s();var y=new p(m,u);y._patch=T,y._componentToDOMNodeMap=Ye;var g=y.getChildContext();o(g)||(u=Object.assign({},u,g)),y._unmounted=!1,y._pendingSetState=!0,y._vComponent=e,y.componentWillMount();var k=y.render();r(k)&&(k=createVPlaceholder()),y._pendingSetState=!1,d=de(k,null,i,u,!1),y._lastInput=k,a(t)||Z(t,d),h&&(l(h)?i.addListener(function(){return h(y)}):s()),a(y.componentDidMount)||i.addListener(function(){y.componentDidMount()}),Ye.set(y,d),e.dom=d,e.instance=y}else{h&&s(),o(v)||(o(v.onComponentWillMount)||v.onComponentWillMount(m),o(v.onComponentDidMount)||i.addListener(function(){return v.onComponentDidMount(d,m)}));var E=p(m,u);r(E)&&(E=createVPlaceholder()),d=de(E,null,i,u,null,!1),e.instance=E,a(t)||Z(t,d),e.dom=d}return d}function _e(e){return Ye.get(e)||null}function be(e,n){var t=Fe.get(n),o=new Te;if(je===n&&s(),e!==Oe)if(d(t))r(e)||(xe(e,n,o,{},!1),o.trigger(),Fe.set(n,{input:e}));else{var l=ue();a(e)?(j(t.input,n,o,!0),Fe.delete(n)):P(t.input,e,n,o,{},!1),o.trigger(),t.input=e,ae(l)}}var Te=function(){this._listeners=[]};Te.prototype.addListener=function(e){this._listeners.push(e)},Te.prototype.trigger=function(){for(var e=this,n=0;n<this._listeners.length;n++)e._listeners[n]()};var Oe="$NO_OP",we="a runtime error occured! Use Inferno in development environment to find the error.",Me="undefined"!=typeof window&&window.document,Pe={ELEMENT:1,OPT_ELEMENT:2,TEXT:3,FRAGMENT:4,OPT_BLUEPRINT:5},De={CHILDREN:1,PROP_CLASS_NAME:2,PROP_STYLE:3,PROP_DATA:4,PROP:5},Ae={NON_KEYED:1,KEYED:2,NODE:3,TEXT:4,UNKNOWN:5},Le=!0,Se=new Map,Ie="http://www.w3.org/1999/xlink",Re="http://www.w3.org/XML/1998/namespace",Ue={},We={},Ke={},Ve={};$("xlink:href,xlink:arcrole,xlink:actuate,xlink:role,xlink:titlef,xlink:type",Ke,Ie),$("xml:base,xml:lang,xml:space",Ke,Re),$("volume,value",Ue,!0),$("muted,scoped,loop,open,checked,default,capture,disabled,selected,readonly,multiple,required,autoplay,controls,seamless,reversed,allowfullscreen,novalidate",We,!0),$("animationIterationCount,borderImageOutset,borderImageSlice,borderImageWidth,boxFlex,boxFlexGroup,boxOrdinalGroup,columnCount,flex,flexGrow,flexPositive,flexShrink,flexNegative,flexOrder,gridRow,gridColumn,fontWeight,lineClamp,lineHeight,opacity,order,orphans,tabSize,widows,zIndex,zoom,fillOpacity,floodOpacity,stopOpacity,strokeDasharray,strokeDashoffset,strokeMiterlimit,strokeOpacity,strokeWidth,",Ve,!0);var Fe=new Map,Ye=new Map,je=Me?document.body:null,Ge={render:be,findDOMNode:_e,mount:de,patch:T,unmount:j};return Ge});