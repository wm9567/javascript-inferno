!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e){return e instanceof Array}function n(e){return!d(e.prototype)&&!d(e.prototype.render)}function t(e){return u(e)||a(e)}function o(e){return d(e)||f(e)}function r(e){return f(e)||e===!1||c(e)||d(e)}function l(e){return"function"==typeof e}function i(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function u(e){return"string"==typeof e}function a(e){return"number"==typeof e}function f(e){return null===e}function c(e){return e===!0}function d(e){return void 0===e}function s(e){throw e||(e=Ve),new Error("Inferno Error: "+e)}function p(e){return{dom:null,text:e,type:Ke.TEXT}}function m(e,n){return{children:e,childrenType:n||Ge.UNKNOWN,dom:null,pointer:null,type:Ke.FRAGMENT}}function v(){return{dom:null,type:Ke.PLACEHOLDER}}function h(e){return e.type===Ke.ELEMENT}function y(e){return e.type===Ke.OPT_ELEMENT}function g(e){return e.type===Ke.COMPONENT}function k(e){return e.type===Ke.TEXT}function E(e){return e.type===Ke.FRAGMENT}function N(e){return e.type===Ke.FRAGMENT}function x(e){return!d(e.type)}function T(e){return e===Ge.UNKNOWN}function C(e){return e===Ge.KEYED}function b(e){return e===Ge.NON_KEYED}function O(e){return e===Ge.TEXT}function _(e){return e===Ge.NODE}function P(e,n,t,o,r,l){de(t,Ne(n,null,o,r,l),e.dom),$(e,null,o)}function w(e,n,t,o,r,l){e!==n&&(y(n)?y(e)?A(e,n,t,o,r,l):(de(t,_e(n,null,o,r,l),e.dom),$(e,null,o)):y(e)?P(e,n,t,o,r,l):g(n)?g(e)?I(e,n,t,o,r,l):(de(t,Le(n,null,o,r,l),e.dom),$(e,null,o)):g(e)?P(e,n,t,o,r,l):isVElement(n)?isVElement(e)?M(e,n,t,o,r,l):(de(t,Te(n,null,o,r,l),e.dom),$(e,null,o)):isVElement(e)?P(e,n,t,o,r,l):k(n)?k(e)?R(e,n):(de(t,Oe(n,null),e.dom),$(e,null,o)):k(e)?de(t,Ne(n,null,o,r,l),e.dom):E(n)?E(e)?V(e,n,t,o,r,l):(de(t,mountVFragment(n,null,o,r,l),e.dom),$(e,null,o)):isVPlaceholder(n)?isVPlaceholder(e)?U(e,n):(de(t,xe(n,null),e.dom),$(e,null,o)):isVPlaceholder(e)?de(t,Ne(n,null,o,r,l),e.dom):E(e)?ae(t,e,Ne(n,null,o,r,l),o):s())}function M(e,n,t,o,r,l){var i=n.tag,u=e.tag;if("svg"===i&&(l=!0),u!==i)ce(e,n,t,o,r,l);else{var a=e.dom,f=e.props,c=n.props,d=e.children,s=n.children;if(n.dom=a,d!==s){var p=e.childrenType,m=n.childrenType;p===m?L(p,d,s,a,o,r,l):S(d,s,a,o,r,l)}f!==c&&H(e,n,f,c,a)}}function A(e,n,t,o,r,l){var i=e.dom,u=e.bp,a=n.bp;if(n.dom=i,u!==a){var c=_e(n,null,o,r,l);de(t,c,i),$(e,null,o,!0)}else{var d=a.v0;if(!f(d)){var s=e.v0,p=n.v0,m=a.v1;if(s!==p&&D(d,s,p,a.d0,i,o,r,l),!f(m)){var v=e.v1,h=n.v1,y=a.v2;if(v!==h&&D(m,v,h,a.d1,i,o,r,l),!f(y)){var g=e.v2,k=n.v2;g!==k&&D(y,g,k,a.d2,i,o,r,l)}}}}}function D(e,n,t,r,l,i,u,a){switch(e){case Fe.CHILDREN:L(r,n,t,l,i,u,a);break;case Fe.PROP_CLASS_NAME:o(t)?l.removeAttribute("class"):l.className=t;break;case Fe.PROP_STYLE:Y(n,t,l)}}function L(e,n,t,o,r,l,i){O(e)?le(o,t):_(e)?w(n,t,o,r,l,i):C(e)?K(n,t,o,r,l,i,null):b(e)?W(n,t,o,r,l,i,null,!1):T(e)?S(n,t,o,r,l,i):s()}function S(n,o,l,i,u,a){if(r(o))r(n)||he(l,n,i);else if(r(n))t(o)?re(l,o):r(o)||(e(o)?mountArrayChildrenWithoutType(o,l,i,u,a):Ne(o,l,i,u,a));else if(x(o))w(n,o,l,i,u,a);else if(t(o))t(n)?le(l,o):re(l,o);else if(t(n)){var f=se(n);f.dom=l.firstChild,S(f,o,l,i,u,a)}else e(o)?e(n)?(o.complex=n.complex,ge(n,o)?K(n,o,l,i,u,a,null):W(n,o,l,i,u,a,null,!0)):W([n],o,l,i,u,a,null,!0):e(n)?W(n,[o],l,i,u,a,null,!0):s()}function I(e,t,l,i,u,a){var f=e.component,c=t.component,d=t.props||{};if(f!==c)ce(e,t,l,i,u,a);else if(n(t)){var s=e.instance;if(s._unmounted)de(l,Le(t,null,i,u,a),e.dom);else{var p=s.props,m=s.state,v=s.state,h=s.getChildContext();t.instance=s,s.context=u,o(h)||(u=Object.assign({},u,h));var y=s._lastInput,g=s._updateComponent(m,v,p,d);g===Ue?g=y:r(g)&&(g=createVPlaceholder()),s._lastInput=g,w(y,g,l,i,u,null,!1),s._vComponent=t,s._lastInput=g,s.componentDidUpdate(p,m),t.dom=g.dom,Qe.set(s,g.dom)}}else{var k=!0,E=e.props,N=t.hooks,x=!o(N),T=e.instance;if(t.dom=e.dom,t.instance=T,x&&!o(N.onComponentShouldUpdate)&&(k=N.onComponentShouldUpdate(E,d)),k!==!1){x&&!o(N.onComponentWillUpdate)&&N.onComponentWillUpdate(E,d);var C=c(d,u);if(C===Ue)return;r(C)&&(C=createVPlaceholder()),w(T,C,l,i,u,null,null,!1),t.instance=C,x&&!o(N.onComponentDidUpdate)&&N.onComponentDidUpdate(E,d)}}}function R(e,n){var t=n.text,o=e.dom;n.dom=o,e.text!==t&&(o.nodeValue=t)}function U(e,n){n.dom=e.dom}function V(e,n,t,o,r,l){var i=e.children,u=n.children,a=e.pointer;if(n.dom=e.dom,n.pointer=a,!i!==u){var f=e.childrenType,c=n.childrenType;if(f===c){if(C(c))return K(i,u,t,o,r,l,n);if(b(c))return W(i,u,t,o,r,l,n,!1)}ge(i,u)?K(i,u,t,o,r,l,n):W(i,u,t,o,r,l,n,!0)}}function W(e,n,t,o,r,l,i,u){for(var a=e.length,f=n.length,c=a>f?f:a,d=0;d<c;d++){var s=e[d],p=u?pe(n,d):n[d];w(s,p,t,o,r,l)}if(a<f)for(d=c;d<f;d++){var m=pe(n,d);ue(t,Ne(m,null,o,r,l),i&&i.pointer)}else if(a>f)for(d=c;d<a;d++)$(e[d],t,o)}function K(e,n,t,o,r,l,i){var u,a,c,s,p,m=e.length,v=n.length,h=m-1,y=v-1,g=0,k=0,E=e[g],N=n[k],x=e[h],T=n[y],C=null,b=null;if(0===m)return void(0!==v&&Me(n,t,o,r,l));if(0===v)return void(0!==m&&he(t,e,o));e:for(;;){for(;E.key===N.key;){if(w(E,N,t,o,r,l),g++,k++,g>h||k>y)break e;E=e[g],N=n[k]}for(;x.key===T.key;){if(w(x,T,t,o,r,l),h--,y--,g>h||k>y)break e;x=e[h],T=n[y]}if(x.key!==N.key){if(E.key!==T.key)break;if(w(E,T,t,o,r,l),s=y+1,c=s<n.length?n[s].dom:i&&i.pointer,ue(t,T.dom,c),g++,y--,g>h||k>y)break;E=e[g],T=n[y]}else{if(w(x,N,t,o,r,l),ue(t,N.dom,E.dom),h--,k++,g>h||k>y)break;x=e[h],N=n[k]}}if(g>h){if(k<=y)for(s=y+1,c=s<n.length?n[s].dom:i&&i.pointer;k<=y;)ue(t,Ne(n[k++],null,o,r,l),c)}else if(k>y)for(;g<=h;)$(e[g++],t,o);else{m=h-g+1,v=y-k+1;var O=e,_=new Array(v);for(u=0;u<v;u++)_[u]=-1;var P=!1,M=0,A=0;if(v<=4||m*v<=16){for(u=g;u<=h;u++)if(C=e[u],A<v)for(a=k;a<=y;a++)if(b=n[a],C.key===b.key){_[a-k]=u,M>a?P=!0:M=a,w(C,b,t,o,r,l,!1),A++,O[u]=null;break}}else{var D=new Map;for(u=k;u<=y;u++)p=n[u],D.set(p.key,u);for(u=g;u<=h;u++)C=e[u],A<v&&(a=D.get(C.key),d(a)||(b=n[a],_[a-k]=u,M>a?P=!0:M=a,w(C,b,t,o,r,l,!1),A++,O[u]=null))}if(m===e.length&&0===A)for(he(t,e,o);k<v;)ue(t,Ne(n[k++],null,o,r,l),null);else{for(u=m-A;u>0;)C=O[g++],f(C)||($(C,t,o),u--);if(P){var L=F(_);for(a=L.length-1,u=v-1;u>=0;u--)_[u]===-1?(M=u+k,p=n[M],s=M+1,c=s<n.length?n[s].dom:i&&i.pointer,ue(t,Ne(p,t,o,r,l),c)):a<0||u!==L[a]?(M=u+k,p=n[M],s=M+1,c=s<n.length?n[s].dom:i&&i.pointer,ue(t,p.dom,c)):a--}else if(A!==v)for(u=v-1;u>=0;u--)_[u]===-1&&(M=u+k,p=n[M],s=M+1,c=s<n.length?n[s].dom:i&&i.pointer,ue(t,Ne(p,null,o,r,l),c))}}}function F(e){var n=e.slice(0),t=[];t.push(0);var o,r,l,i,u;for(o=0;o<e.length;o++)if(e[o]!==-1)if(r=t[t.length-1],e[r]<e[o])n[o]=r,t.push(o);else{for(l=0,i=t.length-1;l<i;)u=(l+i)/2|0,e[t[u]]<e[o]?l=u+1:i=u;e[o]<e[t[l]]&&(l>0&&(n[o]=t[l-1]),t[l]=o)}for(l=t.length,i=t[l-1];l-- >0;)t[l]=i,i=n[i];return t}function G(e,n,t,r){if(ze[e])r[e]=o(t)?"":t;else if(Be[e])r[e]=!!t;else if(n!==t){if(o(t))return r.removeAttribute(e),!1;if("className"===e)return r.className=t,!1;if("style"===e)Y(n,t,r);else{if("defaultChecked"===e)return f(n)&&r.addAttribute("checked"),!1;if("defaultValue"===e)return f(n)&&r.setAttribute("value",t),!1;if(i(e))r[e.toLowerCase()]=t;else if("dangerouslySetInnerHTML"===e){var l=n&&n.__html,u=t&&t.__html;o(u)&&s(),l!==u&&(r.innerHTML=u)}else if("childrenType"!==e&&"ref"!==e&&"key"!==e){var a=qe[e];return a?r.setAttributeNS(a,e,t):r.setAttribute(e,t),!1}}}return!0}function H(e,n,t,r,l){t=t||{},r=r||{};var i;for(var u in r){var a=r[u],f=t[u];"value"===u&&(i=a),o(a)?j(u,l):G(u,f,a,l)}for(var c in t)o(r[c])&&j(c,l);"select"===n.tag&&Ee(l,i)}function Y(e,n,t){if(u(n))t.style.cssText=n;else if(o(e)){if(!o(n))for(var r=Object.keys(n),l=0;l<r.length;l++){var i=r[l],f=n[i];a(f)&&!$e[i]?t.style[i]=f+"px":t.style[i]=f}}else if(o(n))t.removeAttribute("style");else{for(var c=Object.keys(n),d=0;d<c.length;d++){var s=c[d],p=n[s];a(p)&&!$e[s]?t.style[s]=p+"px":t.style[s]=p}for(var m=Object.keys(e),v=0;v<m.length;v++){var h=m[v];o(n[h])&&(t.style[h]="")}}}function j(e,n){"className"===e?n.removeAttribute("class"):"value"===e?n.value="":n.removeAttribute(e)}function X(e,n,t,o){var r=e.bp,l=e.key,i=null===l?r.pools.nonKeyed:r.pools.keyed.get(l);if(!d(i)){var u=i.pop();if(!d(u))return A(u,e,null,n,t,o),e.dom}return null}function z(e){var n=e.bp,t=e.key,o=n.pools;if(f(t))o.nonKeyed.push(e);else{var r=o.keyed.get(t);d(r)&&(r=[],o.keyed.set(t,r)),r.push(e)}}function B(e,n,t,o){var r=e.component,l=e.key,i=Ye.get(r);if(!d(i)){var u=null===l?i.nonKeyed:i.keyed.get(l);if(!d(u)){var a=u.pop();if(!d(a))return I(a,e,null,n,t,o),e.dom}}return null}function q(e){var n=e.component,t=e.key,o=Ye.get(n);if(d(o)&&(o={nonKeyed:[],keyed:new Map},Ye.set(n,o)),f(t))o.nonKeyed.push(e);else{var r=o.keyed.get(t);d(r)&&(r=[],o.keyed.set(t,r)),r.push(e)}}function $(e,n,t,o){r(e)||(y(e)?Z(e,n,t,o):g(e)?ne(e,n,t,o):h(e)?te(e,n,t):E(e)?ee(e,n,!0,t):k(e)?Q(e,n):N(e)&&J(e,n))}function J(e,n){n&&me(n,e.dom)}function Q(e,n){n&&me(n,e.dom)}function Z(e,n,t,o){f(n)||n.removeChild(e.dom),He&&(n||o)&&z(e)}function ee(e,n,t,o){var r=e.children,l=r.length,i=e.pointer;if(l>0)for(var u=0;u<l;u++){var a=r[u];E(a)?ee(a,n,!0,o,!1):$(a,n,o,!1)}n&&t&&me(n,i)}function ne(e,n,t,r){var l=e.instance,i=null,u=null;if(!o(l)){var a=e.ref;a&&a(null),i=l.hooks,u=l.children,void 0!==l.render?(l.componentWillUnmount(),l._unmounted=!0,Qe.delete(l),$(l._lastInput,null,t,!1)):$(l,null,t,!1)}var f=e.hooks||i;o(f)||o(f.onComponentWillUnmount)||f.onComponentWillUnmount(f),n&&me(n,e.dom),He&&(n||r)&&q(e)}function te(n,t,r){var l=(n.hooks,n.dom),i=n.ref;i&&i(null);var u=n.children;if(!o(u))if(e(u))for(var a=0;a<u.length;a++)$(u[a],null,r,!1);else $(u,null,r,!1);t&&me(t,l)}function oe(e,n,t){e.split(",").forEach(function(e){return n[e]=t})}function re(e,n){""!==n?e.textContent=n:e.appendChild(document.createTextNode(""))}function le(e,n){e.firstChild.nodeValue=n}function ie(e,n){e.appendChild(n)}function ue(e,n,t){o(t)?ie(e,n):e.insertBefore(n,t)}function ae(e,n,t,o){var r=n.pointer;ee(n,e,!1,o),de(e,t,r)}function fe(e,n){var t;return t=n===!0?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}function ce(e,n,t,r,l,i){var u=null,a=e._lastInput;o(a)||(u=e,e=a),$(e,null,r,!0);var f=Ne(n,null,r,l,i);n.dom=f,de(t,f,e.dom),null!==u&&(u._lasInput=n)}function de(e,n,t){e.replaceChild(n,t)}function se(n){return t(n)?p(n):r(n)?v():e(n)?m(n):n}function pe(e,n){var t=e[n];return e[n]=se(t)}function me(e,n){e.removeChild(n)}function ve(){return document.activeElement}function he(e,n,t){e.textContent="";for(var o=0;o<n.length;o++){var l=n[o];r(l)||$(l,null,t,!0)}}function ye(e){null!==e&&e!==document.body&&document.activeElement!==e&&e.focus()}function ge(e,n){return!e.complex&&(n.length&&!o(n[0])&&!o(n[0].key)&&e.length&&!o(e[0])&&!o(e[0].key))}function ke(e,n,t){for(var o=e.firstChild;o;){var r=o.tagName;"OPTION"===r?!t&&o.value===n||t&&n.get(o.value)?o.selected=!0:o.selected=!1:"OPTGROUP"===r&&ke(o,n,t),o=o.nextSibling}}function Ee(n,t){var r=!1;o(t)||(e(t)?(t=t.reduce(function(e,n){return e.set(n,!0)},new Map),r=!0):t+="",ke(n,t,r))}function Ne(e,n,t,o,r){return y(e)?_e(e,n,t,o,r):g(e)?Le(e,n,t,o,r):h(e)?Te(e,n,t,o,r):k(e)?Oe(e,n):E(e)?Ce(e,n,t,o,r):N(e)?xe(e,n):void s()}function xe(e,n){var t=document.createTextNode("");return e.dom=t,n&&ie(n,t),t}function Te(e,n,t,r,l){var i=e.tag;u(i)||s(),"svg"===i&&(l=!0);var a=fe(i,l),d=e.children,p=e.props,m=e.ref,v=!o(p);return e.dom=a,o(m)||t.addListener(function(){m(a)}),"select"===i&&v&&c(p.multiple)&&G("multiple",null,!0,a),o(d)||we(e.childrenType,d,a,t,r,l),v&&mountProps(e,p,a),f(n)||ie(n,a),a}function Ce(e,n,t,o,r){var l=e.children,i=document.createTextNode(""),u=document.createDocumentFragment(),a=e.childrenType;return C(a)||b(a)?Me(l,u,t,o,r):T(a)&&De(l,u,t,o,r),e.pointer=i,e.dom=u,ie(u,i),n&&ie(n,u),u}function be(e,n){var t=e.staticVElement,o=t.tag,r=document.createElement(o),l=t.props;for(var i in l)G(i,null,l[i],r);return e.clone=r,r.cloneNode(!0)}function Oe(e,n){var t=document.createTextNode(e.text);return e.dom=t,f(n)||ie(n,t),t}function _e(e,n,t,o,r){var l=e.bp,i=null;if(He&&(i=X(e,t,o,r)),f(i)){i=l.clone&&l.clone.cloneNode(!0)||be(l,r),e.dom=i;var u=l.v0;if(!f(u)){Pe(u,e.v0,l.d0,i,t,o,r);var a=l.v1;if(!f(a)){Pe(a,e.v1,l.d1,i,t,o,r);var c=l.v2;f(c)||Pe(c,e.v2,l.d2,i,t,o,r)}}}return f(n)||n.appendChild(i),i}function Pe(e,n,t,r,l,i,u){switch(e){case Fe.CHILDREN:we(t,n,r,l,i,u);break;case Fe.PROP_CLASS_NAME:o(n)||(r.className=n);break;case Fe.PROP_DATA:r.dataset[t]=n;break;case Fe.PROP_STYLE:Y(null,n,r)}}function we(e,n,t,o,r,l){O(e)?re(t,n):_(e)?Ne(n,t,o,r,l):C(e)||b(e)?Me(n,t,o,r,l):T(e)?Ae(n,t,o,r,l):s()}function Me(e,n,t,o,r){for(var l=0;l<e.length;l++)Ne(e[l],n,t,o,r)}function Ae(n,o,l,i,u){e(n)?De(n,o,l,i,u):t(n)?re(o,n):r(n)||Ne(n,o,l,i,u)}function De(e,n,t,o,r){e.complex=!1;for(var l=0;l<e.length;l++){var i=pe(e,l);k(i)?(Oe(i,n),e.complex=!0):N(i)?(xe(i,n),e.complex=!0):E(i)?(Ce(i,n,t,o,r),e.complex=!0):Ne(i,n,t,o,r)}}function Le(e,t,i,u,a){if(He){var c=B(e,i,u,a);if(!f(c))return f(t)||ie(t,c),c}var d,p=e.component,m=e.props,v=e.hooks,h=e.ref;if(n(e)){v&&s();var y=new p(m,u);y._patch=w,y._componentToDOMNodeMap=Qe;var g=y.getChildContext();o(g)||(u=Object.assign({},u,g)),y._unmounted=!1,y._pendingSetState=!0,y._vComponent=e,y.componentWillMount();var k=y.render();r(k)&&(k=createVPlaceholder()),y._pendingSetState=!1,d=Ne(k,null,i,u,!1),y._lastInput=k,f(t)||ie(t,d),h&&(l(h)?i.addListener(function(){return h(y)}):s()),f(y.componentDidMount)||i.addListener(function(){y.componentDidMount()}),Qe.set(y,d),e.dom=d,e.instance=y}else{h&&s(),o(v)||(o(v.onComponentWillMount)||v.onComponentWillMount(m),o(v.onComponentDidMount)||i.addListener(function(){return v.onComponentDidMount(d,m)}));var E=p(m,u);r(E)&&(E=createVPlaceholder()),d=Ne(E,null,i,u,null,!1),e.instance=E,f(t)||ie(t,d),e.dom=d}return d}function Se(e){return Qe.get(e)||null}function Ie(e,n){var t=Je.get(n),o=new Re;if(Ze===n&&s(),e!==Ue)if(d(t))r(e)||(Ae(e,n,o,{},!1),o.trigger(),Je.set(n,{input:e}));else{var l=ve();f(e)?($(t.input,n,o,!0),Je.delete(n)):S(t.input,e,n,o,{},!1),o.trigger(),t.input=e,ye(l)}}var Re=function(){this._listeners=[]};Re.prototype.addListener=function(e){this._listeners.push(e)},Re.prototype.trigger=function(){for(var e=this,n=0;n<this._listeners.length;n++)e._listeners[n]()};var Ue="$NO_OP",Ve="a runtime error occured! Use Inferno in development environment to find the error.",We="undefined"!=typeof window&&window.document,Ke={ELEMENT:1,OPT_ELEMENT:2,TEXT:3,FRAGMENT:4,OPT_BLUEPRINT:5},Fe={CHILDREN:1,PROP_CLASS_NAME:2,PROP_STYLE:3,PROP_DATA:4,PROP:5},Ge={NON_KEYED:1,KEYED:2,NODE:3,TEXT:4,UNKNOWN:5},He=!0,Ye=new Map,je="http://www.w3.org/1999/xlink",Xe="http://www.w3.org/XML/1998/namespace",ze={},Be={},qe={},$e={};oe("xlink:href,xlink:arcrole,xlink:actuate,xlink:role,xlink:titlef,xlink:type",qe,je),oe("xml:base,xml:lang,xml:space",qe,Xe),oe("volume,value",ze,!0),oe("muted,scoped,loop,open,checked,default,capture,disabled,selected,readonly,multiple,required,autoplay,controls,seamless,reversed,allowfullscreen,novalidate",Be,!0),oe("animationIterationCount,borderImageOutset,borderImageSlice,borderImageWidth,boxFlex,boxFlexGroup,boxOrdinalGroup,columnCount,flex,flexGrow,flexPositive,flexShrink,flexNegative,flexOrder,gridRow,gridColumn,fontWeight,lineClamp,lineHeight,opacity,order,orphans,tabSize,widows,zIndex,zoom,fillOpacity,floodOpacity,stopOpacity,strokeDasharray,strokeDashoffset,strokeMiterlimit,strokeOpacity,strokeWidth,",$e,!0);var Je=new Map,Qe=new Map,Ze=We?document.body:null,en={render:Ie,findDOMNode:Se,mount:Ne,patch:w,unmount:$};return en});