!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.InfernoDOM=t()}(this,function(){"use strict";function e(e,n){return o(e)||(t(e)&&e.length>0||!t(e))&&(n?n.children=e:n={children:e}),n}function t(e){return e.constructor===Array}function n(e){return e&&e.prototype&&e.prototype.render}function r(e){return"string"==typeof e||"number"==typeof e}function o(e){return void 0===e||null===e}function l(e){return void 0===e||null===e||e===!1}function i(e){return"function"==typeof e}function a(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function u(e){return"string"==typeof e}function d(e){return"number"==typeof e}function f(e,t,n){n?e.insertBefore(t,n):e.appendChild(t)}function c(e,t){return t?document.createElementNS(t,e):document.createElement(e)}function s(e,t,n){if(n)""!==e?t.textContent=e:t.appendChild(document.createTextNode(""));else{var r=document.createTextNode(e);t.appendChild(r)}}function v(e,t,n,r,o,l){var i=W(t,null,r,o,l);n.replaceChild(i,e.dom),t.dom=i}function p(e){if(!l(e)){n(e.instance)&&(e.instance.componentWillUnmount(),e.instance._unmounted=!0),e.events&&e.events.willDetach&&e.events.willDetach(e.dom),e.events&&e.events.componentWillUnmount&&e.events.componentWillUnmount(e.dom,e.events);var r=e.children;if(r)if(t(r))for(var o=0;o<r.length;o++)p(r[o]);else p(r)}}function m(e,t){var n=e.dom;p(e),n===t?n.innerHTML="":(t.removeChild(n),q&&O(e))}function h(e,t,n,r,o,i){return l(e)?void W(t,n,r,o):l(t)?void m(e,n):void x(e,t,n,r,o,i,null!==e.static&&null!==t.static)}function y(e,t,n){if(u(t))n.style.cssText=t;else if(t){for(var r=Object.keys(t),o=0;o<r.length;o++){var l=r[o],i=t[l];d(i)&&(i+="px"),n.style[l]=i}if(e)for(var a=Object.keys(e),o=0;o<a.length;o++){var l=a[o];t[l]||(n.style[l]="")}}else e&&n.removeAttribute("style")}function g(e,t,n,r){if(!a(e)){if(V[e])return void(r[e]=n);var l=null;":"===e[5]&&-1!==e.indexOf("xlink:")&&(l="http://www.w3.org/1999/xlink"),n===!1||o(n)?r.removeAttribute(e):l?n===!0?r.setAttributeNS(l,e,e):r.setAttributeNS(l,e,n):n===!0?r.setAttribute(e,e):r.setAttribute(e,n)}}function b(t,r,o,l,i,a,u,d,f,c){if(i=e(u,i),n(r)){var s=o.props,v=o.state,p=o.state,m=o.getChildContext();m&&(c=K.extends({},c,m)),o.context=c;var h=o._updateComponent(v,p,s,i);h&&(x(t,h,d,f,c,!1),t.dom=h.dom,o._lastNode=h)}else{var y=!0;if(a&&a.componentShouldUpdate&&(y=a.componentShouldUpdate(t.dom,l,i)),y!==!1){a&&a.componentWillUpdate&&a.componentWillUpdate(t.dom,l,i);var h=r(i),g=t.dom;h.dom=g,x(o,h,g,f,c,!1),t.instance=h,a&&a.componentDidUpdate&&a.componentDidUpdate(t.dom,l,i)}}}function k(e,n,o,i,a,u,d){var f=e.length,c=n.length;if(f>c)for(var s=void 0;f!==c;){var v=e[f-1];l(v)||o.removeChild((s=v.dom)||s&&(s=s.previousSibling)||(s=o.lastChild)),f--}else if(c>f)for(var p=0;f!==c;){var m=n[f+p];if(l(m));else{var y=W(m,null,i,i,a,u);o.appendChild(y)}c--,p++}for(var g=void 0,b=0;c>b;b++){var v=e[b],m=n[b];if(v!==m)if(l(m))l(v)||(g=g||o.childNodes,g[b+d].textContent="");else if(l(v))if(r(m))g=g||o.childNodes,g[b+d].textContent=m;else{var y=W(m,null,i,i,a,u);o.replaceChild(y,o.childNodes[b])}else r(m)?(g=g||o.childNodes,g[b+d].textContent=m):t(m)?k(v,m,o,i,a,u,b):h(v,m,o,i,a,u)}}function C(e,t,n,r,o,l,i){var a=!1,u=0,d=0,c=t.length,s=e.length,v=void 0,p=void 0;if(0===c&&s>=5){if(q)for(var h=0;s>h;h++)O(e[h]);return void(n.textContent="")}var y=c-1,g=s-1,b=s>0?e[d]:null,k=c>0?t[u]:null,C=void 0,w=void 0,N=void 0;e:for(;!a&&y>=u&&g>=d;){for(a=!0;k.key===b.key;){if(x(b,k,n,r,o,l,!0),u++,d++,u>y||d>g)break e;k=t[u],b=e[d],a=!1}for(C=t[y],w=e[g];C.key===w.key;){if(x(w,C,n,r,o,l,!0),y--,g--,u>y||d>g)break e;C=t[y],w=e[g],a=!1}for(;C.key===b.key;){if(N=c>y+1?t[y+1].dom:i,x(b,C,n,r,o,l,!0),f(n,C.dom,N),y--,d++,u>y||d>g)break e;C=t[y],b=e[d],a=!1}for(;k.key===w.key;){if(N=e[d].dom,x(w,k,n,r,o,l,!0),f(n,k.dom,N),u++,g--,u>y||d>g)break e;k=t[u],w=e[g],a=!1}}if(d>g){if(y>=u)for(N=c>y+1?t[y+1].dom:i;y>=u;u++)v=t[u],f(n,W(v,null,r,o,l),N)}else if(u>y)for(;g>=d;d++)p=e[d],m(p,n);else{for(var U={},h=d;g>=h;h++)p=e[h],U[p.key]=p;for(var j=c>y+1?t[y+1]:null,h=y;h>=u;h--){v=t[h];var M=v.key;p=U[M],void 0!==p?(U[M]=null,x(p,v,n,r,o,!0),v.dom.nextSibling!==j&&(j=j&&j.dom||i,f(n,v.dom,j)),j=v):(j=j&&j.dom||i,f(n,W(v,null,r,o,l),j)),j=v}for(var h=d;g>=h;h++)p=e[h],null!==U[p.key]&&m(p,n)}}function x(e,t,l,a,u,d,f){if(t!==!1&&null!==t){if(r(e))return void(r(t)&&(l.firstChild.nodeValue=t));var c=t.tag||(f&&t.tpl?t.tpl.tag:null),s=e.tag||(f&&e.tpl?e.tpl.tag:null),p=t.events;if(p&&p.willUpdate&&p.willUpdate(e.dom),a=a||"svg"===c?H:"math"===c?B:null,s!==c)return void(i(s)&&!i(c)?n(s)?x(e.instance._lastNode,t,l,a,u,d,!0):x(e.instance,t,l,a,u,d,!0):v(e,t,l,a,u,d));if(o(s))return void(t.dom=e.dom);if(i(s)&&i(c))return t.instance=e.instance,t.dom=e.dom,void b(t,t.tag,t.instance,e.attrs,t.attrs,t.events,t.children,l,u,d);var m=e.dom;t.dom=m,w(e,t,m,a,u,d,f);var h=t.className,g=t.style;e.className!==h&&(o(h)?m.removeAttribute("class"):m.className=h),e.style!==g&&y(e.style,g,m),N(e,t,m),U(e,t,m),p&&p.didUpdate&&p.didUpdate(m)}}function w(e,n,i,a,u,d,f){var c=n.children,s=e.children;if(s!==c)if(l(s))r(c)?i.textContent=c:c&&t(c)?S(c,i,a,u,d):c&&"object"===("undefined"==typeof c?"undefined":K.typeof(c))&&W(c,i,a,u,d);else if(l(c))i.textContent="";else if(t(s))if(t(c)){var v=c.length&&c[0]&&!o(c[0].key)||s.length&&s[0]&&!o(s[0].key);v?C(s,c,i,a,u,d,null):k(s,c,i,a,u,d,null)}else k(s,[c],i,a,u,d,null);else t(c)?k([s],c,i,a,u,d,null):x(s,c,i,a,u,d,f)}function N(e,t,n){var r=t.attrs,l=e.attrs;if(r){var i=Object.keys(r);if(0!==i.length)for(var a=0;a<i.length;a++){var u=i[a],d=l&&l[u],f=r[u];d!==f&&g(u,d,f,n,null==e.tag)}}if(l){var c=Object.keys(l);if(0!==c.length)for(var a=0;a<c.length;a++){var u=c[a];(!r||o(r[u]))&&n.removeAttribute(u)}}}function U(e,t,n){}function j(e,t,n){var r=e.key,o=e.tpl,l=void 0;if(o){if(null!==r){var i=o.pools.keyed[r];l=i&&i.pop()}else{var i=o.pools.nonKeyed;l=i&&i.pop()}if(l)return x(l,e,null,t,n,null,!0),e.dom}}function O(e){var t=e.key,n=e.tpl;if(n){var r=n.pools;if(null===t){var o=r.nonKeyed;o&&o.push(item)}else{var l=r.keyed;(l[t]||(l[t]=[])).push(e)}}}function M(e,t,n){if(z[e]){var r=z[e];r.push({callback:n,target:t})}else document.addEventListener(e,function(t){for(var n=z[e],r=n.length-1;r>-1;r--){var o=n[r];o.target===t.target&&o.callback(t)}},!1),z[e]=[]}function S(e,n,o,l,i){if(t(e))for(var a=0;a<e.length;a++){var u=e[a];r(u)?s(u,n,!1):u&&t(u)?S(u,n,o,l,i):W(u,n,o,l,i)}else r(e)?s(e,n,!0):W(e,n,o,l,i)}function _(t,r,o,l,i,a,u,d){if(o=e(i,o),n(r)){var f=new r(o);f._diffNodes=x;var c=f.getChildContext();c&&(d=K.extends({},d,c)),f.context=d,f.componentWillMount();var s=f.render(),v=void 0;return s&&(v=W(s,null,null,u,d),f._lastNode=s,a&&a.appendChild(v),u.addListener(f.componentDidMount)),t.dom=v,t.instance=f,v}var p=function(){var e=void 0;l&&(l.componentWillMount&&l.componentWillMount(null,o),l.componentDidMount&&u.addListener(function(){l.componentDidMount(e,o)}));var n=r(o);return e=W(n,null,null,u,d),t.instance=n,a&&a.appendChild(e),t.dom=e,{v:e}}();return"object"===("undefined"==typeof p?"undefined":K.typeof(p))?p.v:void 0}function A(e,t,n){for(var r=0;r<t.length;r++){var o=t[r];M(o,n,e[o])}}function D(e,t){var n=document.createTextNode("");return null!==t&&t.appendChild(n),e&&(e.dom=n),n}function W(e,n,a,d,f){var s=void 0;if(l(e)||t(e))return D(e,n);if(r(e)){var v=document.createTextNode(e);return null!==n&&n.appendChild(v),v}if(q&&(s=j(e,d,f)))return n&&n.appendChild(s),s;var p=e.tpl,m=e.tag;if(i(m))return _(e,m,e.attrs,e.events,e.children,n,d,f);if(null===m)return D(e,n);if(a=a||"svg"===m?H:"math"===m?B:null,p&&p.dom)s=p.dom.cloneNode(!0);else{if(!u(m))throw Error("Inferno Error: Expected function or string for element tag type");s=c(m,a)}var h=e.children,g=e.attrs,b=e.events,k=e.className,C=e.style;if(b){var x=Object.keys(b),w=x.length;b.click&&(M("click",s,b.click),w--),b.created&&(b.created(s),w--),b.attached&&(d.addListener(function(){b.attached(s)}),w--),w>0&&A(b,x,s)}return l(h)||S(h,s,a,d,f),g&&E(g,s),o(k)||(s.className=k),o(C)||y(null,C,s),e.dom=s,null!==n&&n.appendChild(s),s}function E(e,t){for(var n=Object.keys(e),r=0;r<n.length;r++){var o=n[r];g(o,null,e[o],t)}}function L(e){for(var t=0;t<F.length;t++){var n=F[t];if(n.dom===e)return n}return null}function T(e){for(var t=0;t<F.length;t++){var n=F[t];if(n===e)return F.splice(t,1),!0}return!1}function I(e,t){var n=L(t),r=new P;o(n)?(W(e,t,null,r,{}),r.trigger(),F.push({node:e,dom:t})):(h(n.node,e,t,null,r,{}),r.trigger(),null===e&&T(n),n.node=e)}var K={};K.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},K.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},K.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),K.extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var P=function(){function e(){K.classCallCheck(this,e),this._listeners=[]}return K.createClass(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"trigger",value:function(){for(var e=0;e<this._listeners.length;e++)this._listeners[e]()}}]),e}(),B="http://www.w3.org/1998/Math/MathML",H="http://www.w3.org/2000/svg",V={checked:1,selected:1,disabled:1,value:1},q=!0,z={},F=[],G={render:I};return G});