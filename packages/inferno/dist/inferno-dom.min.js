!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.InfernoDOM=e()}(this,function(){"use strict";function n(n){return n instanceof Array}function e(n){return a(n._isStateful)}function t(n){return i(n)||l(n)}function o(n){return f(n)||u(n)}function r(n){return u(n)||n===!1||a(n)||f(n)}function i(n){return"string"==typeof n}function l(n){return"number"==typeof n}function u(n){return null===n}function a(n){return n===!0}function f(n){return void 0===n}function c(n){return!1}function s(n){this._type=Hn.TEXT,this._text=n,this._dom=null}function d(){this._type=Hn.PLACEHOLDER,this._dom=null}function p(n){this._type=Hn.FRAGMENT,this._dom=null,this._pointer=null,this._items=n}function _(n,e,t,o){this._keyIndex=n,this._schema=null,this.mount=e,this.patch=t,this.unmount=o}function m(n,e,t,o){return new _(n,e,o)}function h(n){return new s(n)}function v(){return new d}function g(n){return new p(n)}function w(n){return n._type===Hn.TEXT}function y(n){return n._type===Hn.VARIABLE}function x(n){return n._type===Hn.PLACEHOLDER}function C(n){return n._type===Hn.FRAGMENT}function k(n){return n._type===Hn.ELEMENT}function E(n){return n._type===Hn.TEMPLATE}function b(n){return n._type===Hn.COMPONENT}function T(n,e){C(n)?M(n,e,!0):k(n)?A(n,e):b(n)&&N(n,e)}function M(n,e,t){var o=n._items,r=o.length,i=o._pointer;if(r>0)for(var l=0;r>l;l++){var u=o[l];C(u)?M(u,e,!0):(e&&G(e,u._dom),T(u,null))}e&&t&&G(e,i)}function N(n,e){var t=n._instance,r=null,i=null;o(t)||(r=t._hooks,i=t._children,void 0!==t.render&&(t.componentWillUnmount(),t._unmounted=!0,ie.delete(t),T(t._lastInput,null)));var l=n._hooks||r;o(l)||o(l.onComponentWillUnmount)||l.onComponentWillUnmount(n._dom,l)}function A(e,t){var r=e._hooks,i=e._dom;o(r)||o(r.onWillDetach)||r.onWillDetach(e._dom);var l=e._children;if(!o(l))if(n(l))for(var u=0;u<l.length;u++)T(l[u],null);else T(l,null);t&&G(t,i)}function O(n){return function(){}}function I(n,e,t){n.split(",").forEach(function(n){return e[n]=t})}function D(n){var e=document.createElement(n),t={};for(var o in e)t[o]=!0;return Zn.set(n,t),t}function L(n,e,o){t(e)?n.firstChild.nodeValue=o:n.textContent=o}function W(n,e){var t=Zn.get(n);return f(t)&&(t=D(n)),t[e]}function U(n,e,t){o(t)?n.appendChild(e):n.insertBefore(e,t)}function S(n,e,t){var o=e._pointer;M(e,n,!1),X(n,t,o)}function P(n,e){var t;return t=e===!0?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n)}function R(n,e,t){if(null===e)return document.createTextNode(n);if(t){if(""!==n)return e.textContent=n,e.firstChild;var o=document.createTextNode("");return e.appendChild(o),o}var r=document.createTextNode(n);return e.appendChild(r),r}function V(n,e,t,r,i,l){var u=null,a=n._lastInput;o(a)||(u=n,n=a),T(n,!1);var f=$(e,null,r,i,l);e._dom=f,X(t,f,n._dom),null!==u&&(u._lasInput=e)}function X(n,e,t){n.replaceChild(e,t)}function j(e){return t(e)?h(e):r(e)?v():n(e)?g(e):e}function F(n,e){var t=n[e];return n[e]=j(t)}function G(n,e){n.removeChild(e)}function B(){return document.activeElement}function H(n,e){if(Fn){var t=e.length;if(t>5)for(var o=0;t>o;o++){var i=e[o];r(i)||c(i)}}n.textContent=""}function Y(n){null!==n&&n!==document.body&&document.activeElement!==n&&n.focus()}function z(n,e){return n.complex?!1:e.length&&!o(e[0])&&!o(e[0]._key)&&n.length&&!o(n[0])&&!o(n[0]._key)}function q(n,e){if("option"===n._tag){var t=n._props&&n._props.value;e[t]?(n._props=n._props||{},n._props.selected=!0,n._dom.selected=!0):n._dom.selected=!1}else for(var o=0,r=n._children.length;r>o;o++)q(n._children[o],e)}function J(e){var t=e._props&&e._props.value,o={};if(n(t))for(var r=0,i=t.length;i>r;r++)o[t[r]]=t[r];else o[t]=t;for(var l=0,u=e._children.length;u>l;l++)q(e._children[l],o);e._props&&e._props[t]&&delete e._props.value}function K(n,e,t){o(n.onCreated)||n.onCreated(t),o(n.onAttached)||e.addListener(function(){n.onAttached(t)})}function Q(n){var e=n.attrs.value;o(e)||(n._dom.value=e)}function Z(n,e){if("input"===n){var t=e.attrs.type;if("text"===t)Q(e);else if("checkbox"===t||"radio"===t){var o=e.attrs.checked;e._dom.checked=!!o}}else"textarea"===n&&Q(e)}function $(n,e,t,o,r){if(E(n))return nn(n,e,t,o);if(x(n))return rn(n,e);if(w(n))return on(n,e);if(C(n))return tn(n,e,t,o,r);if(k(n))return en(n,e,t,o,r);if(b(n))return fn(n,e,t,o,r);throw Error("Bad Input!")}function nn(n,e,t,o){var r=n._tr;r.mount(n,e,t,o)}function en(n,e,t,r,l){var a=n._tag;if(!i(a))throw new Error("Inferno Error: expects VElement to have a string as the tag name");"svg"===a&&(l=!0);var f=P(a,l),c=n._children,s=n._props,d=n._hooks;return n._dom=f,o(d)||K(d,t,f),o(c)||an(n,c,f,t,r,l),o(s)||(ln(n),cn(n,s,f)),u(e)||e.appendChild(f),f}function tn(n,e,t,o,r){var i=n._items,l=document.createTextNode(""),u=document.createDocumentFragment();return un(i,u,t,o,r),n._pointer=l,n._dom=u,u.appendChild(l),e&&U(e,u),u}function on(n,e){var t=document.createTextNode(n._text);return n._dom=t,e&&U(e,t),t}function rn(n,e){var t=document.createTextNode("");return n._dom=t,e&&U(e,t),t}function ln(n){"select"===n.tag&&J(n)}function un(n,e,t,o,r){n.complex=!1;for(var i=0;i<n.length;i++){var l=F(n,i);w(l)?(on(l,e),n.complex=!0):x(l)?(rn(l,e),n.complex=!0):C(l)?(tn(l,e,t,o,r),n.complex=!0):$(l,e,t,o,r)}}function an(e,o,i,l,u,a){n(o)?un(o,i,l,u,a):t(o)?R(o,i,!0):r(o)||$(o,i,l,u,a)}function fn(n,t,i,l,u){var a,f=n._component,c=n._props,s=n._hooks;if(e(n)){var d=new f(c,l);d._patch=pn,d._componentToDOMNodeMap=ie;var p=d.getChildContext();o(p)||(l=Object.assign({},l,p)),d._unmounted=!1,d._pendingSetState=!0,d.componentWillMount();var _=d.render();r(_)&&(_=v()),d._pendingSetState=!1,a=$(_,null,i,l,!1),d._lastInput=_,d.componentDidMount(),null===t||r(a)||t.appendChild(a),ie.set(d,a),n._dom=a,n._instance=d}else{o(s)||(o(s.onComponentWillMount)||s.onComponentWillMount(null,c),o(s.onComponentDidMount)||i.addListener(function(){s.onComponentDidMount(a,c)}));var m=f(c,l);r(m)&&(node=v()),a=$(m,null,i,l,null,!1),n._instance=m,null===t||r(a)||t.appendChild(a),n._dom=a}return a}function cn(n,e,t){for(var r in e){var i=e[r];if(!o(i))if("style"===r)gn(null,i,t);else if(W(n._tag,r))t[r]=i;else{var l=Kn[r];l?t.setAttributeNS(l,r,i):t.setAttribute(r,i)}}}function sn(n,e){return function(e,t,o,r){var i=n._arg;e.read(i)}}function dn(n,e,t){return function(o,r,i,l){var a=n.cloneNode(t);return e||u(r)||appendChild(r,a),a}}function pn(n,e,o,i,l,u){if(n!==e)if(r(n))$(e,o,i,l,u);else if(r(e))T(n,o);else if(t(n))if(t(e))o.firstChild.nodeValue=e;else{var a=$(e,null,i,l,u);e._dom=a,X(o,a,o.firstChild)}else if(t(e))X(o,document.createTextNode(e),n._dom);else if(b(e))b(n)?wn(n,e,o,i,l,u):(X(o,fn(e,null,i,l,u),n._dom),T(n,null));else if(b(n));else if(C(e))C(n)?yn(n,e,o,i,l,u):(X(o,tn(e,null),n._dom),T(n,null));else if(k(e))k(n)?mn(n,e,o,i,l,u):(X(o,$(e,null,i,l,u),n._dom),T(n,null));else if(k(n))X(o,$(e,null,i,l,u),n._dom),T(n,null);else if(C(n))S(o,n,$(e,null,i,l,u));else if(x(e))x(n)?Cn(n,e):(X(o,rn(e,null),n._dom),T(n,null));else if(x(n))X(o,$(e,null,i,l,u),n._dom);else if(w(e))w(n)?kn(n,e):(X(o,on(e,null),n._dom),T(n,null));else{if(!w(n))throw Error("Bad Input!");X(o,$(e,null,i,l,u),n._dom)}}function _n(e,o,i,l,u,a){r(o)?H(i,e):r(e)?t(o)?L(i,e,o):r(o)||(n(o)?un(o,i,l,u,a):$(o,i,l,u,a)):n(o)?n(e)?(o.complex=e.complex,z(e,o)?En(e,o,i,l,u,a,null):xn(e,o,i,l,u,a,null)):xn([e],o,i,l,u,a,null):n(e)?xn(e,[o],i,l,u,a,null):pn(e,o,i,l,u,a)}function mn(n,e,t,r,i,l){var u=e._hooks,a=!o(u);a&&!o(u.onWillUpdate)&&u.onWillUpdate(n._dom);var f=e._tag,c=n._tag;if("svg"===f&&(l=!0),c!==f)V(n,e,t,r,i,l);else{var s=n._dom,d=n._props,p=e._props,_=n._children,m=e._children;e._dom=s,_!==m&&_n(_,m,s,r,i,l),d!==p&&hn(n,e,d,p,s),a&&!o(u.onDidUpdate)&&u.onDidUpdate(s),Z(f,e)}}function hn(n,e,t,r,i){var l=e._tag;t=t||{},r=r||{},"select"===n._tag&&J(e);for(var u in r){var a=r[u],c=t[u];if(c!==a)if(o(a))vn(l,u,i);else if("style"===u)gn(c,a,i);else if(W(l,u))i[u]=a;else{var s=Kn[u];s?i.setAttributeNS(s,u,a):i.setAttribute(u,a)}}for(var d in t)f(r[d])&&vn(l,d,i)}function vn(n,e,t){"className"===e?t.removeAttribute("class"):"id"===e?t.removeAttribute("id"):W(n,e)?t[e]=null:t.removeAttribute(e)}function gn(n,e,t){if(i(e))t.style.cssText=e;else if(o(n)){if(!o(e))for(var r=Object.keys(e),u=0;u<r.length;u++){var a=r[u],f=e[a];l(f)&&!Qn[a]?t.style[a]=f+"px":t.style[a]=f}}else if(o(e))t.removeAttribute("style");else{for(var c=Object.keys(e),s=0;s<c.length;s++){var d=c[s],p=e[d];l(p)&&!Qn[d]?t.style[d]=p+"px":t.style[d]=p}for(var _=Object.keys(n),m=0;m<_.length;m++){var h=_[m];o(e[h])&&(t.style[h]="")}}}function wn(n,t,i,l,u,a){var f=n._component,c=t._component,s=t._props||{};if(f!==c)V(n,t,i,l,u,a);else if(e(t)){var d=(n._dom,n._instance),p=d.props,_=d.state,m=d.state,h=d.getChildContext();t._instance=d,d.context=u,o(h)||(u=Object.assign({},u,h));var g=d._updateComponent(_,m,p,s);g===Xn?g=d._lastInput:o(g)&&(g=v()),pn(d._lastInput,g,i,l,u,null,!1),d._lastInput=g,d.componentDidUpdate(p,_),t._dom=g._dom,ie.set(d,g._dom)}else{var w=!0,y=n._props,x=t._hooks,C=!o(x);if(C&&!o(x.onComponentShouldUpdate)&&(w=x.onComponentShouldUpdate(n._dom,y,s)),w!==!1){C&&!o(x.onComponentWillUpdate)&&x.onComponentWillUpdate(n._dom,y,s);var k=c(s,u),E=n._instance;r(k)&&(k=v()),t._dom=n._dom,pn(E,k,i,l,u,null,null,!1),t._instance=k,C&&!o(x.onComponentDidUpdate)&&x.onComponentDidUpdate(E._dom,y,s)}}}function yn(n,e,t,o,r,i){var l=n._items,u=e._items,a=n._pointer;e._dom=n._dom,e._pointer=a,!l!==u&&(z(l,u)?En(l,u,t,o,r,i,e):xn(l,u,t,o,r,i,e))}function xn(n,e,t,o,r,i,l){for(var u=n.length,a=e.length,f=u>a?a:u,c=0;f>c;c++){var s=n[c],d=F(e,c);pn(s,d,t,o,r,i)}if(a>u)for(c=f;a>c;c++){var p=F(e,c);U(t,$(p,null,o,r,i),l&&l.pointer)}else if(u>a)for(c=f;u>c;c++)T(n[c],t)}function Cn(n,e){e._dom=n._dom}function kn(n,e){var t=e._text,o=n._dom;e._dom=o,n.text!==t&&(o.nodeValue=t)}function En(n,e,t,o,r,i,l){for(var u,a=n.length,f=e.length,c=a-1,s=f-1,d=0,p=0,_=null,m=null,h=null,v=null;c>=d&&s>=p&&(m=e[p],_=n[d],m._key===_._key);)pn(_,m,t,o,r,i,!1),p++,d++;for(;c>=d&&s>=p&&(h=e[s],v=n[c],h._key===v._key);)pn(v,h,t,o,r,i,!1),s--,c--;for(;c>=d&&s>=p&&(h=e[s],_=n[d],h._key===_._key);)u=f>s+1?e[s+1]._dom:null,pn(_,h,t,o,r,i,!1),U(t,h._dom,u),s--,d++;for(;c>=d&&s>=p&&(m=e[p],v=n[c],m._key===v._key);)u=n[d]._dom,pn(v,m,t,o,r,i,!1),U(t,m._dom,u),p++,c--;if(d>c){if(s>=p)for(u=f>s+1?e[s+1]._dom:l&&l.pointer;s>=p;p++)U(t,$(e[p],null,o,r,i),u)}else if(p>s)for(;c>=d;)T(n[d++],t);else{var g,w=c-d+1,y=s-p+1,x=new Array(y);for(g=0;y>g;g++)x[g]=-1;var C,k=!1,E=0,b=0;if(16>=w*y)for(g=d;c>=g;g++){var M=!0;for(v=n[g],C=p;s>=C;C++)if(h=e[C],v._key===h._key){x[C-p]=g,b>C?k=!0:b=C,pn(v,h,t,o,r,i,!1),M=!1;break}M&&(T(v,t),E++)}else{var N=new Map;for(g=p;s>=g;g++)N.set(e[g]._key,g);for(g=c;g>=d;g--)v=n[g],C=N.get(v._key),void 0===C?(T(v,t),E++):(h=e[C],x[C-p]=g,b>C?k=!0:b=C,pn(v,h,t,o,r,i,!1))}var A;if(k){var O=bn(x);for(C=O.length-1,g=y-1;g>=0;g--)-1===x[g]?(A=g+p,u=f>A+1?e[A+1]._dom:l&&l.pointer,U(t,$(e[A],null,o,r,i),u)):0>C||g!==O[C]?(A=g+p,u=f>A+1?e[A+1]._dom:l&&l.pointer,U(t,e[A]._dom,u)):C--}else if(w-E!==y)for(g=y-1;g>=0;g--)-1===x[g]&&(A=g+p,u=f>A+1?e[A+1]._dom:l&&l.pointer,U(t,$(e[A],null,o,r,i),u))}}function bn(n){var e=n.slice(0),t=[];t.push(0);var o,r,i,l,u;for(o=0;o<n.length;o++)if(-1!==n[o])if(r=t[t.length-1],n[r]<n[o])e[o]=r,t.push(o);else{for(i=0,l=t.length-1;l>i;)u=(i+l)/2|0,n[t[u]]<n[o]?i=u+1:l=u;n[o]<n[t[i]]&&(i>0&&(e[o]=t[i-1]),t[i]=o)}for(i=t.length,l=t[i-1];i-- >0;)t[i]=l,l=e[l];return t}function Tn(n,e){return function(){}}function Mn(){this._listeners=[],this.scrollX=null,this.scrollY=null,this.screenHeight=ne,this.screenWidth=$n}function Nn(n,e,t){}function An(n){return ie.get(n)||null}function On(n,e){var t=re.get(e),o=new Mn;if(f(t))r(n)||(Nn(n,e,o)||$(n,e,o,{},null,!1),o.trigger(),re.set(e,{input:n}));else{var i=B();pn(t.input,n,e,o,{},null,!1),o.trigger(),u(n)&&re.delete(e),t.input=n,Y(i)}}function In(e,o,i,l,a){if(!r(e)){var f,c,s,d=Gn,p=o?Bn:Gn,_=!1;if(y(e))f=sn(e,a),c=Tn(e,a),s=O(e);else if(k(e)){var h=[],v=[],g=[],w=e._tag;"svg"===w&&(a=!0);var x=P(w,a),C=e._key;!u(C)&&y(C)&&(d=C._arg);e._props,e._hooks;v.length>0&&p===Gn&&(p=i.length++);var E=e._children;if(!r(E))if(t(E));else if(n(E));else{var T=In(E,!1,i,x,a);if(!r(T)){h.push(T.mount);var M=T.patch,N=T.unmount;u(M)||v.push(M),u(N)||g.push(N)}}f=Dn(p,dn(x,o,_),h),c=Un(p,v),s=Rn(p,g)}else if(b(e))throw new Error("Inferno Error: templates cannot contain VComponent nodes. Pass a VComponent node into a template as a variable instead.");return m(d,f,c,s)}}function Dn(n,e,t){return n===Gn&&0===t.length?e:t.length<=5?Ln(n,e,t[0],t[1],t[2],t[3]):Wn(n,e,t)}function Ln(n,e,t,o,r,i){var l=n!==Gn;return function(u,a,f,c){var s=e(u,a,f,c);return l&&u.write(n,s),t&&(t(u,s,f,c),o&&(o(u,s,f,c),r&&(r(u,s,f,c),i&&i(u,s,f,c)))),s}}function Wn(n,e,t){var o=n!==Gn;return function(r,i,l,u){var a=e(r,i,l,context);o&&r.write(n,a);for(var f=0;f<t.length;f++)t[f](r,a,l,context);return a}}function Un(n,e){return 0===e.length?n!==Gn?copyTemplate(n):null:e.length<=5?Sn(n,e[0],e[1],e[2],e[3],e[4]):Pn(n,e)}function Sn(n,e,t,o,r,i){var l=n!==Gn;return function(u,a,f,c){var s;l&&(s=copyValue(u,a,n)),e&&(e(u,a,s,f,c),t&&(t(u,a,s,f,c),o&&(o(u,a,s,f,c),r&&(r(u,a,s,f,c),i&&i(u,a,s,f,c)))))}}function Pn(n,e){var t=n!==Gn;return function(o,r,i,l){var u;t&&(u=copyValue(o,r,n));for(var a=0;a<e.length;a++)e[a](o,r,u,i,l)}}function Rn(n,e){return e.length>0&&e.length<=5?Vn(n,e[0],e[1],e[2],e[3],e[4]):null}function Vn(n,e,t,o,r,i){var l=n!==Gn;return function(u,a,f,c,s){l&&(a=u.read(n)),e&&(e(u,a,f,c,s),t&&(t(u,a,f,c,s),o&&(o(u,a,f,c,s),r&&(r(u,a,f,c,s),i&&i(u,a,f,c,s)))))}}var Xn="NO_OP",jn="undefined"!=typeof window&&window.document,Fn=!0,Gn=-1,Bn=-2,Hn={ELEMENT:0,COMPONENT:1,TEMPLATE:2,TEXT:3,PLACEHOLDER:4,FRAGMENT:5,VARIABLE:6},Yn="http://www.w3.org/1999/xlink",zn="http://www.w3.org/XML/1998/namespace",qn={},Jn={},Kn={},Qn={};I("xlink:href,xlink:arcrole,xlink:actuate,xlink:role,xlink:titlef,xlink:type",Kn,Yn),I("xml:base,xml:lang,xml:space",Kn,zn),I("volume,value",qn,!0),I("muted,scoped,loop,open,checked,default,capture,disabled,selected,readonly,multiple,required,autoplay,controls,seamless,reversed,allowfullscreen,novalidate",Jn,!0),I("animationIterationCount,borderImageOutset,borderImageSlice,borderImageWidth,boxFlex,boxFlexGroup,boxOrdinalGroup,columnCount,flex,flexGrow,flexPositive,flexShrink,flexNegative,flexOrder,gridRow,gridColumn,fontWeight,lineClamp,lineHeight,opacity,order,orphans,tabSize,widows,zIndex,zoom,fillOpacity,floodOpacity,stopOpacity,strokeDasharray,strokeDashoffset,strokeMiterlimit,strokeOpacity,strokeWidth,",Qn,!0);var Zn=new Map;D("div"),D("span"),D("table"),D("tr"),D("td"),D("a"),D("p");var $n=jn&&window.screen.width,ne=jn&&window.screen.height,ee=0,te=0,oe=0;jn&&(window.onscroll=function(){ee=window.scrollX,te=window.scrollY,oe=performance.now()},window.resize=function(){ee=window.scrollX,te=window.scrollY,$n=window.screen.width,ne=window.screen.height,oe=performance.now()}),Mn.prototype={refresh:function(){this.scrollX=jn&&window.scrollX,this.scrollY=jn&&window.scrollY},addListener:function(n){this._listeners.push(n)},trigger:function(){for(var n=this,e=0;e<this._listeners.length;e++)n._listeners[e]()}};var re=(jn?document.body:null,new Map),ie=new Map,le={render:On,findDOMNode:An,mount:$,patch:pn,unmount:T,createTemplateReducers:In};return le});