!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e,t){if(!l(e)){var r=n(e);(r&&e.length>0||!r)&&(t?t.children=e:t={children:e})}return t}function n(e){return e.constructor===Array}function t(e){return!l(e)&&!l(e.prototype.render)}function r(e){return"string"==typeof e||"number"==typeof e}function l(e){return void 0===e||null===e}function i(e){return void 0===e||null===e||e===!1}function o(e){return"function"==typeof e}function a(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function d(e){return"string"==typeof e}function u(e){return e&&e.then}function f(e,n,t){e.splice(e.indexOf(n),1,t)}function s(e,n,t){l(t)?void 0!==n.append?n.append(e):e.appendChild(n):void 0!==n.insert?n.insert(e,t):void 0!==t.insert?e.insertBefore(n,t.childNodes[0]):e.insertBefore(n,t)}function c(e,n){return l(n)?document.createElement(e):document.createElementNS(n,e)}function v(e,n,t){if(!t){var r=document.createTextNode(e);return n.appendChild(r),r}if(""===e){var l=document.createTextNode("");return n.appendChild(l),l}n.textContent=e}function p(e,n,t,r,i,o,a){var d=null,u=e._lastNode;l(u)||(d=e,e=u);var f=Q(n,null,r,i,o,a);n.dom=f,t.replaceChild(f,e.dom),null!==d&&(d._lastNode=n),h(e)}function h(e){if(!i(e)&&!r(e)){var t=e.instance,o=null,a=null;l(t)||(o=t.hooks,a=t.children,void 0!==t.render&&(t.componentWillUnmount(),t._unmounted=!0));var d=e.hooks||o;l(d)||(l(d.willDetach)||d.willDetach(e.dom),l(d.componentWillUnmount)||d.componentWillUnmount(e.dom,d));var u=e.children||a;if(!l(u))if(n(u))for(var f=0;f<u.length;f++)h(u[f]);else h(u)}}function m(){return document.createTextNode("")}function g(e,n){var t=e.dom;t===n?t.innerHTML="":(n.removeChild(t),le&&K(e)),h(e)}function C(e,n){for(var t in e)n[t]=null}function y(e,n,t){for(var r=0;r<n.length;r++)e.insertBefore(n[r],t)}function k(){return document.activeElement}function x(e){e!==document.body&&document.activeElement!==e&&e.focus()}function N(){var e=[],n=document.createTextNode(""),t=null,r={childNodes:e,appendChild:function(r){e.push(r),t&&t.insertBefore(r,n)},removeChild:function(n){t&&t.removeChild(n),e.splice(e.indexOf(n),1)},insertBefore:function(n,r){t&&t.insertBefore(n,r),e.splice(e.indexOf(r),0,n)},replaceChild:function(n,r){t.replaceChild(n,r),f(e,r,n)},append:function(r){r.appendChild(n),t=r,y(t,e,n)},insert:function(r,l){r.insertBefore(n,l),t=r,y(t,e,n)},remove:function(){t.removeChild(n);for(var r=0;r<e.length;r++)t.removeChild(e[r]);t=null},getElementsByTagName:null};return Object.defineProperty(r,"parentNode",{get:function(){return t}}),Object.defineProperty(r,"firstChild",{get:function(){return e[0]}}),r}function b(e,n){return n.length&&!l(n[0])&&!l(n[0].key)||e.length&&!l(e[0])&&!l(e[0].key)}function w(e,n){if("option"===e.tag){var t=e.attrs&&e.attrs.value;n[t]&&(e.attrs=e.attrs||{},e.attrs.selected="selected")}else for(var r=0,l=e.children.length;l>r;r++)w(e.children[r],n)}function O(e){if("select"===e.tag){var t=e.attrs&&e.attrs.value;if(!l(t)){var r={};if(n(t))for(var i=0,o=t.length;o>i;i++)r[t[i]]=t[i];else r[t]=t;w(e,r),e.attrs&&e.attrs[t]&&delete e.attrs.value}}}function U(e){switch(e.length){case 5:return"value"===e;case 7:return"checked"===e;case 8:return"disabled"===e||"selected"===e;default:return!1}}function _(e,n,t){r(n)?e.firstChild.nodeValue=t:e.textContent=t}function M(e,n,t,l,o,a,d,u){if(null!==u)P(e,n,t,l,o,a,d,u);else if(i(e))Q(n,t,l,o,a,d);else if(i(n))g(e,t);else if(r(e))if(r(n))t.firstChild.nodeValue=n;else{var f=Q(n,null,l,o,a,d);n.dom=f,t.replaceChild(f,t.firstChild)}else if(r(n)){var s=document.createTextNode(n);t.replaceChild(s,e.dom)}else P(e,n,t,l,o,a,d,null!==e.tpl&&null!==n.tpl)}function T(e,n,t){if(d(n))t.style.cssText=n;else if(l(e)){if(!l(n))for(var r=Object.keys(n),i=0;i<r.length;i++){var o=r[i],a=n[o];t.style[o]=a}}else if(l(n))t.removeAttribute("style");else{for(var u=Object.keys(n),f=0;f<u.length;f++){var s=u[f],c=n[s];t.style[s]=c}for(var v=Object.keys(e),p=0;p<v.length;p++){var h=v[p];l(n[h])&&(t.style[h]="")}}}function j(e,n,t){for(var r in n){var i=n[r],o=e[r];o!==i&&(t[r]=i)}for(var a in e)l(n[a])&&(t[a]=null)}function S(e,n,t){if(!a(e)){if(U(e))return void(t[e]=n);n===!1||l(n)?t.removeAttribute(e):":"===e[5]&&-1!==e.indexOf("xlink:")?t.setAttributeNS("http://www.w3.org/1999/xlink",e,n===!0?e:n):":"===e[4]&&-1!==e.indexOf("xml:")?t.setAttributeNS("http://www.w3.org/XML/1998/namespace",e,n===!0?e:n):t.setAttribute(e,n===!0?e:n)}}function B(n,r,i,o,a,d,u,f,s,c){if(a=e(u,a),t(r)){var v=i.props,p=i.state,h=i.state,m=i.getChildContext();l(m)||(c=ee.extends({},c,m)),i.context=c;var g=i._updateComponent(p,h,v,a);l(g)||(P(n,g,f,null,s,c,i,!0),n.dom=g.dom,i._lastNode=g)}else{var C=!0,y=!l(d);if(y&&!l(d.componentShouldUpdate)&&(C=d.componentShouldUpdate(n.dom,o,a)),C!==!1){y&&!l(d.componentWillUpdate)&&d.componentWillUpdate(n.dom,o,a);var k=r(a),x=n.dom;k.dom=x,P(i,k,x,null,s,c,null,!0),n.instance=k,y&&!l(d.componentDidUpdate)&&d.componentDidUpdate(n.dom,o,a)}}}function E(e,t,o,a,d,u,f,c,v){var p=void 0===o.append,g=e.length,C=t.length,y=g===C;if(y===!1)if(g>C)for(;g!==C;){var k=e[g-1];i(k)||(o.removeChild(a[g-1+v]),h(k)),g--}else for(;g!==C;){var x=t[g],w=Q(x,null,d,u,f,c);s(o,w),p&&(1===g&&a.push(o.firstChild),p&&a.splice(g+v,0,w)),g++}for(var O=0;C>O;O++){var U=e[O],_=t[O],T=O+v;if(U!==_)if(i(_)){if(!i(U)){var j=a[T];if(!l(j))if(r(U))j.nodeValue="";else if(y===!0){var S=m();n(U)&&0===U.length?(s(o,S),p&&a.splice(T,0,S)):(o.replaceChild(S,a[T]),p&&a.splice(T,1,S),h(U))}}}else if(i(U)){if(r(_)){var B=document.createTextNode(_);o.replaceChild(B,a[T]),p&&a.splice(T,1,B)}else if(y===!0){var W=Q(_,null,d,u,f,c);o.replaceChild(W,a[T]),p&&a.splice(T,1,W)}}else if(r(_))if(1===g)r(U)?void 0!==o.getElementsByTagName?o.firstChild.nodeValue=_:o.nodeValue=_:(h(U),o.textContent=_);else{var A=document.createTextNode(_),V=a[T];l(V)?o.nodeValue=A.nodeValue:void 0===V.append?(p&&a.splice(T,1,A),o.replaceChild(A,V)):(o.insertBefore(A,V.firstChild),V.remove(),a.splice(0,a.length,A)),h(U)}else if(n(_))if(b(U,_))D(U,_,a[T],d,u,f,c);else if(n(U)){var L=a[T];if(void 0===L.append)if(_.length>1&&1===U.length){var P=N();P.insert(o,L),P.appendChild(L),p&&a.splice(T,1,P),E(U,_,P,P.childNodes,d,u,f,c,0)}else E(U,_,o,a,d,u,f,c,0);else E(U,_,a[T],a[T].childNodes,d,u,f,c,0)}else if(_.length>1){var I=N();I.appendChild(o.firstChild),s(o,I,o.firstChild),p&&a.splice(T,1,I),E([U],_,I,I.childNodes,d,u,f,c,O)}else E([U],_,o,a,d,u,f,c,O);else n(U)?E(U,[_],a,a[T].childNodes,d,u,f,c,0):M(U,_,o,d,u,f,c,null)}}function D(e,n,t,r,i,o,a){var d=n.length,u=e.length;if(0===d&&u>=5){if(le)for(var f=0;u>f;f++)K(e[f]);return void(t.textContent="")}var c=void 0,v=!1,p=0,h=0,m=d-1,C=u-1,y=u>0?e[h]:null,k=d>0?n[p]:null,x=void 0,N=void 0,b=void 0;e:for(;!v&&m>=p&&C>=h;){for(v=!0;k.key===y.key;){if(P(y,k,t,r,i,o,a,!0),p++,h++,p>m||h>C)break e;k=n[p],y=e[h],v=!1}for(x=n[m],N=e[C];x.key===N.key;){if(P(N,x,t,r,i,o,a,!0),m--,C--,p>m||h>C)break e;x=n[m],N=e[C],v=!1}for(;x.key===y.key;){if(b=d>m+1?n[m+1].dom:null,P(y,x,t,r,i,o,a,!0),s(t,x.dom,b),m--,h++,p>m||h>C)break e;x=n[m],y=e[h],v=!1}for(;k.key===N.key;){if(b=e[h].dom,P(N,k,t,r,i,o,a,!0),s(t,k.dom,b),p++,C--,p>m||h>C)break e;k=n[p],N=e[C],v=!1}}if(h>C){if(m>=p)for(b=d>m+1?n[m+1].dom:null;m>=p;p++)s(t,Q(n[p],null,r,i,o,a),b)}else if(p>m)for(;C>=h;h++)c=e[h],g(c,t);else{for(var w=new Map,O=h;C>=O;O++)c=e[O],w.set(c.key,c);b=d>m+1?n[m+1]:null;for(var U=m;U>=p;U--){var _=n[U],M=_.key;c=w.get(M),b=l(b)?void 0:b.dom,void 0===c?s(t,Q(_,null,r,i,o,a),b):(w.delete(M),P(c,_,t,r,i,o,a,!0),_.dom.nextSibling!==b&&s(t,_.dom,b)),b=_}for(var T=h;C>=T;T++)c=e[T],w.has(c.key)&&g(c,t)}}function W(e,t,o,a,d,u,f,s){var c=t.children,v=e.children;if(v!==c){var p=null;e.domChildren&&(p=t.domChildren=e.domChildren),i(v)?r(c)?_(o,v,c):l(c)||(n(c)?X(t,c,o,a,d,u,f):Q(c,o,a,d,u,f)):i(c)?o.textContent="":n(v)?n(c)?null===p&&v.length>1?D(v,c,o,a,d,u,f):b(v,c)?D(v,c,o,a,d,u,f):E(v,c,o,p||(t.domChildren=[]),a,d,u,f,0):E(v,[c],o,p||[],a,d,u,f,0):n(c)?E([v],c,o,p||(t.domChildren=[o.firstChild]),a,d,u,f,0):r(c)?_(o,v,c):r(v)?M(v,c,o,a,d,u,f,null):M(v,c,o,a,d,u,f,s)}}function A(e,n,t,r){e&&(d(n)&&delete e.refs[n],d(t)&&(e.refs[t]=r))}function V(e,n,t){var r=n.events,i=e.events,o=!l(r),a=!l(i);o?a?j(i,r,t):F(r,t):a&&C(i,t)}function L(e,n,t,r){"select"===e.tag&&O(n);var i=n.attrs,o=e.attrs,a=l(i),d=l(o);if(!a)for(var u=Object.keys(i),f=u.length,s=0;f>s;s++){var c=u[s],v=!d&&o[c],p=i[c];v!==p&&("ref"===c?A(r,v,p,t):S(c,p,t))}if(!d)for(var h=Object.keys(o),m=h.length,g=0;m>g;g++){var C=h[g];(a||l(i[C]))&&("ref"===C?A(r,o[C],null,t):t.removeAttribute(C))}}function P(e,n,r,i,a,d,u,f){if(void 0!==n.then)n.then(function(n){P(e,n,r,i,a,d,f,u)});else{var s=n.hooks,c=!l(s);c&&!l(s.willUpdate)&&s.willUpdate(e.dom);var v=n.tag||(f&&!l(n.tpl)?n.tpl.tag:null),h=e.tag||(f&&!l(e.tpl)?e.tpl.tag:null);if(i=i||"svg"===v?re:"math"===v?te:null,h!==v){var m=e.instance;o(h)?o(v)?p(m||e,n,r,i,a,d,u):t(h)?P(m._lastNode,n,r,i,a,d,u,!0):P(m,n,r,i,a,d,u,!0):p(m||e,n,r,i,a,d,u)}else if(l(h))n.dom=e.dom;else if(o(h))o(v)&&(n.instance=e.instance,n.dom=e.dom,B(n,n.tag,n.instance,e.attrs||{},n.attrs||{},n.hooks,n.children,r,a,d));else{var g=e.dom,C=n.className,y=n.style;n.dom=g,e!==n&&(W(e,n,g,i,a,d,u,f),L(e,n,g,u),V(e,n,g)),e.className!==C&&(l(C)?g.removeAttribute("class"):g.className=C),e.style!==y&&T(e.style,y,g),c&&!l(s.didUpdate)&&s.didUpdate(g)}}}function I(e,n,t,r){var i=e.tpl;if(!l(i)){var o=e.key,a=null===o?i.pools.nonKeyed:i.pools.keyed[o];if(!l(a)){var d=a.pop();if(!l(d))return P(d,e,null,null,n,t,r,!0),e.dom}}}function K(e){var n=e.tpl;if(!l(n)){var t=e.key,r=n.pools;if(null===t){var i=r.nonKeyed;i&&i.push(e)}else{var o=r.keyed;(o[t]||(o[t]=[])).push(e)}return!0}return!1}function H(e,n,t,r,l,i,o){var a=m();t&&t.push(a),e.then(function(e){var d=Q(e,null,r,l,i,o);n.replaceChild(d,a),t&&f(t,a,d)}),n.appendChild(a)}function X(e,t,o,a,d,f,c){for(var p=[],h=!1,m=!1,g=0;g<t.length;g++){var C=t[g];if(r(C))h=!0,p.push(v(C,o,!1));else if(!l(C)&&n(C)){var y=N();h=!0,X(e,C,y,a,d,f,c),s(o,y),p.push(y)}else if(u(C))H(C,o,p,a,d,f,c);else{var k=Q(C,o,a,d,f,c);h||!m&&C&&l(C.key)?(h=!0,p.push(k)):i(C)?(h=!0,p.push(k)):m===!1&&(m=!0)}}p.length>1&&h===!0&&(e.domChildren=p)}function q(e,t,l,i,o,a,d){n(t)?X(e,t,l,i,o,a,d):r(t)?v(t,l,!0):u(t)?H(t,l,null,i,o,a,d):Q(t,l,i,o,a,d)}function z(e,n,t){!i(e)&&d(n)&&(e.refs[n]=t)}function F(e,n){for(var t in e)n[t]=e[t]}function G(n,r,i,o,a,d,u,f){i=e(a,i);var s=void 0;if(t(r)){var c=new r(i);c._diffNodes=P;var v=c.getChildContext();l(v)||(f=ee.extends({},f,v)),c.context=f,c._pendingSetState=!0,c.componentWillMount();var p=c.shouldComponentUpdate();if(p){c.componentWillUpdate();var h=c._pendingState,m=c.state;c.state=ee.extends({},m,h)}var g=c.render();return c._pendingSetState=!1,l(g)||(s=Q(g,null,null,u,f,c),c._lastNode=g,null!==d&&d.appendChild(s),c.componentDidMount(),c.componentDidUpdate()),n.dom=s,n.instance=c,s}l(o)||(l(o.componentWillMount)||o.componentWillMount(null,i),l(o.componentDidMount)||u.addListener(function(){o.componentDidMount(s,i)}));var C=r(i);return s=Q(C,null,null,u,f,null),n.instance=C,null!==d&&d.appendChild(s),n.dom=s,s}function J(e,n){var t=m();return null!==n&&n.appendChild(t),i(e)||(e.dom=t),t}function Q(e,t,a,u,f,s){if(i(e)||n(e))return J(e,t);var v=void 0;if(r(e))return v=document.createTextNode(e),null!==t&&t.appendChild(v),v;if(le&&(v=I(e,u,f,s),!l(v)))return null!==t&&t.appendChild(v),v;var p=e.tag;if(null===p)return J(e,t);if(o(p))return G(e,p,e.attrs||{},e.hooks,e.children,t,u,f);a=a||"svg"===p?re:"math"===p?te:null;var h=e.tpl;if(l(h)||l(h.dom)){if(!d(p)||""===p)throw Error("Inferno Error: Expected function or string for element tag type");v=c(p,a)}else v=h.dom.cloneNode(!1);var m=e.children,g=e.attrs,C=e.events,y=e.hooks,k=e.className,x=e.style;return e.dom=v,l(y)||(l(y.created)||y.created(v),l(y.attached)||u.addListener(function(){y.attached(v)})),i(m)||q(e,m,v,a,u,f,s),l(g)||R(e,g,v,s),l(k)||(v.className=k),l(x)||T(null,x,v),l(C)||F(C,v),null!==t&&t.appendChild(v),v}function R(e,n,t,r){"select"===e.tag&&O(e);for(var l=Object.keys(n),i=0;i<l.length;i++){var o=l[i];"ref"===o?z(r,n[o],t):S(o,n[o],t)}}function Y(e){for(var n=0;n<ie.length;n++){var t=ie[n];if(t.dom===e)return t}return null}function Z(e){for(var n=0;n<ie.length;n++){var t=ie[n];if(t===e)return void ie.splice(n,1)}}function $(e,n){var t=Y(n),r=new ne;if(null===t)Q(e,n,null,r,{},null),r.trigger(),ie.push({node:e,dom:n});else{var l=k();M(t.node,e,n,null,r,{},null,null),r.trigger(),null===e&&Z(t),t.node=e,x(l)}}var ee={};ee.classCallCheck=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},ee.createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),ee.extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};var ne=function(){function e(){ee.classCallCheck(this,e),this._listeners=[]}return ee.createClass(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"trigger",value:function(){for(var e=0;e<this._listeners.length;e++)this._listeners[e]()}}]),e}(),te="http://www.w3.org/1998/Math/MathML",re="http://www.w3.org/2000/svg",le=!0,ie=[],oe={render:$};return oe});