!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e,t){if(!r(e)){var o=n(e);(o&&e.length>0||!o)&&(t?t.children=e:t={children:e})}return t}function n(e){return e.constructor===Array}function t(e){return!r(e)&&!r(e.prototype.render)}function o(e){return"string"==typeof e||"number"==typeof e}function r(e){return void 0===e||null===e}function l(e){return void 0===e||null===e||e===!1}function i(e){return"function"==typeof e}function a(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function d(e){return"string"==typeof e}function u(e){return"number"==typeof e}function f(e,t,o,r){if(e.dom===t)return o.callback(r),!0;var l=e.children;if(l)if(n(l))for(var i=0;i<l.length;i++){var a=l[i];if("object"===("undefined"==typeof a?"undefined":q.typeof(a))){var d=f(a,t,o,r);if(d)return!0}}else if(l.dom){var u=f(l,t,o,r);if(u)return!0}}function c(e){for(var n=Q[e.type],t=n.length-1;t>-1;t--){var o=n[t],r=o.node,l=e.target;f(r,l,o,e)}}function s(e,n){if(!r(n)){var t=Q[e];if(!r(t))for(var o=0;o<t.length;o++){var l=t[o];if(l.callback===n)return void t.splice(o,1)}}}function v(e,n,t){var o=Q[e];r(o)?(document.addEventListener(e,c,!1),Q[e]=[{callback:t,node:n}]):o.push({callback:t,node:n})}function p(e,n,t){r(t)?e.appendChild(n):e.insertBefore(n,t)}function h(e,n){return r(n)?document.createElement(e):document.createElementNS(n,e)}function m(e,n,t){if(t)""!==e?n.textContent=e:n.appendChild(document.createTextNode(""));else{var o=document.createTextNode(e);n.appendChild(o)}}function y(e,n,t,r,l,i,a){if(o(n)){var d=document.createTextNode(n);t.replaceChild(d,d)}else if(o(e)){var u=G(n,null,r,l,i,a);n.dom=u,t.replaceChild(u,t.firstChild)}else{g(e);var f=G(n,null,r,l,i,a);n.dom=f,t.replaceChild(f,e.dom)}}function g(e){if(!l(e)){var t=e.instance;r(t)||void 0===t.render||(t.componentWillUnmount(),t._unmounted=!0);var o=e.hooks||!r(t)&&t.hooks;r(o)||(r(o.willDetach)||o.willDetach(e.dom),r(o.componentWillUnmount)||o.componentWillUnmount(e.dom,o));var i=e.events;if(!r(i))for(var a in i)s(a,i[a]);var d=e.children;if(!r(d))if(n(d))for(var u=0;u<d.length;u++)g(d[u]);else g(d)}}function k(e,n){g(e);var t=e.dom;t===n?t.innerHTML="":(n.removeChild(t),Z&&E(e))}function b(e){switch(e.length){case 5:return"value"===e;case 7:return"checked"===e;case 8:return"disabled"===e||"selected"===e;default:return!1}}function C(e,n,t,o,r,i,a){return l(e)?void G(n,t,o,r,i,a):l(n)?void k(e,t):void D(e,n,t,o,r,i,null!==e.tpl&&null!==n.tpl,a)}function x(e,n,t){if(d(n))t.style.cssText=n;else if(r(e)){if(!r(n))for(var o=Object.keys(n),l=0;l<o.length;l++){var i=o[l],a=n[i];u(a)&&!Y[i]&&(a+="px"),t.style[i]=a}}else if(r(n))t.removeAttribute("style");else{for(var f=Object.keys(n),c=0;c<f.length;c++){var s=f[c],v=n[s];u(v)&&!Y[s]&&(v+="px"),t.style[s]=v}for(var p=Object.keys(e),h=0;h<p.length;h++){var m=p[h];r(n[m])&&(t.style[m]="")}}}function w(e,n,t){if(!a(e)){if(b(e))return void(t[e]=n);if(n===!1||r(n))t.removeAttribute(e);else{var o=null;":"===e[5]&&-1!==e.indexOf("xlink:")&&(o="http://www.w3.org/1999/xlink"),null!==o?t.setAttributeNS(o,e,n===!0?e:n):t.setAttribute(e,n===!0?e:n)}}}function N(n,o,l,i,a,d,u,f,c,s){if(a=e(u,a),t(o)){var v=l.props,p=l.state,h=l.state,m=l.getChildContext();r(m)||(s=q.extends({},s,m)),l.context=s;var y=l._updateComponent(p,h,v,a);r(y)||(D(n,y,f,null,c,s,!0,l),n.dom=y.dom,l._lastNode=y)}else{var g=!0,k=!r(d);if(k&&!r(d.componentShouldUpdate)&&(g=d.componentShouldUpdate(n.dom,i,a)),g!==!1){k&&!r(d.componentWillUpdate)&&d.componentWillUpdate(n.dom,i,a);var b=o(a),C=n.dom;b.dom=C,D(l,b,C,null,c,s,!0,null),n.instance=b,k&&!r(d.componentDidUpdate)&&d.componentDidUpdate(n.dom,i,a)}}}function O(e,t,i,a,u,f,c,s){var v=e.length,h=t.length;if(v>h)for(var m=void 0;v!==h;){var y=e[v-1];l(y)||i.removeChild((m=y.dom)||m&&(m=m.previousSibling)||(m=i.lastChild)),v--}else if(h>v){var g=void 0,b=e[v-1];g=r(b)?r(c)?null:i.childNodes[c]:r(b.dom)?null:b.dom.nextSibling;for(var x=0;v!==h;x++){var w=t[v+x];p(i,G(w,null,a,u,f,s),g),h--}}for(var N=void 0,S=0;h>S;S++){var j=e[S],_=t[S];if(j!==_)if(l(_)){if(!l(j)){N=N||i.childNodes;var T=N[S+c];r(T)||(d(j)?T.textContent="":k(j,i))}}else if(l(j))if(o(_)){N=N||i.childNodes;var M=N[S+c];r(M)?i.appendChild(document.createTextNode(_)):M.textContent=_}else{var W=G(_,null,a,u,f,s);p(i,W,i.childNodes[S])}else if("object"===("undefined"==typeof _?"undefined":q.typeof(_)))n(_)?n(j)?U(j,_,i,a,u,f,S,s):O([j],_,i,a,u,f,S,s):C(j,_,i,a,u,f,s);else{N=N||i.childNodes;var D=N[S+c];r(D)?i.appendChild(document.createTextNode(_)):D.textContent=_}}}function S(e,n,t,o,l,i,a,d){var u=n.length,f=e.length;if(0===u&&f>=5){if(Z)for(var c=0;f>c;c++)E(e[c]);return void(t.textContent="")}var s=void 0,v=!1,h=0,m=0,y=u-1,g=f-1,b=f>0?e[m]:null,C=u>0?n[h]:null,x=void 0,w=void 0,N=void 0;e:for(;!v&&y>=h&&g>=m;){for(v=!0;C.key===b.key;){if(D(b,C,t,o,l,i,!0,d),h++,m++,h>y||m>g)break e;C=n[h],b=e[m],v=!1}for(x=n[y],w=e[g];x.key===w.key;){if(D(w,x,t,o,l,i,!0,d),y--,g--,h>y||m>g)break e;x=n[y],w=e[g],v=!1}for(;x.key===b.key;){if(N=u>y+1?n[y+1].dom:null,D(b,x,t,o,l,i,!0,d),p(t,x.dom,N),y--,m++,h>y||m>g)break e;x=n[y],b=e[m],v=!1}for(;C.key===w.key;){if(N=e[m].dom,D(w,C,t,o,l,i,!0,d),p(t,C.dom,N),h++,g--,h>y||m>g)break e;C=n[h],w=e[g],v=!1}}if(m>g){if(y>=h){if(u>y+1)N=n[y+1].dom;else{var O=e[g];N=r(O)?r(a)?null:t.childNodes[a]:O.dom.nextSibling}for(;y>=h;h++)p(t,G(n[h],null,o,l,i,d),N)}}else if(h>y)for(;g>=m;m++)s=e[m],k(s,t);else{for(var S=[],U=m;g>=U;U++)s=e[U],S[s.key]=s;N=u>y+1?n[y+1]:null;for(var j=y;j>=h;j--){var _=n[j],T=_.key;s=S[T],N=r(N)?void 0:N.dom,void 0===s?p(t,G(_,null,o,l,i,d),N):(S[T]=null,D(s,_,t,o,l,i,!0,d),_.dom.nextSibling!==N&&p(t,_.dom,N)),N=_}for(var M=m;g>=M;M++)s=e[M],null!==S[s.key]&&k(s,t)}}function U(e,n,t,o,l,i,a,d){var u=n.length&&!r(n[0])&&!r(n[0].key)||e.length&&!r(e[0])&&!r(e[0].key);u?S(e,n,t,o,l,i,a,d):O(e,n,t,o,l,i,a,d)}function j(e,n,t){o(n)?e.firstChild.nodeValue=t:e.textContent=t}function _(e,t,i,a,d,u,f,c){var s=t.children,v=e.children;v!==s&&(l(v)?o(s)?j(i,v,s):r(s)||"object"===("undefined"==typeof s?"undefined":q.typeof(s))&&(n(s)?L(s,i,a,d,u,c):G(s,i,a,d,u,c)):l(s)?i.textContent="":n(v)?n(s)?U(v,s,i,a,d,u,null,c):O(v,[s],i,a,d,u,null,c):n(s)?O([v],s,i,a,d,u,null,c):o(s)?j(i,v,s):D(v,s,i,a,d,u,f,c))}function T(e,n,t,o){r(e)||(d(n)&&delete e.refs[n],d(t)&&(e.refs[t]=o))}function M(e,n,t,o){var l=n.attrs,i=e.attrs,a=r(l),d=r(i);if(!a)for(var u=Object.keys(l),f=u.length,c=0;f>c;c++){var s=u[c],v=!d&&i[s],p=l[s];v!==p&&("ref"===s?T(o,v,p,t):w(s,p,t))}if(!d)for(var h=Object.keys(i),m=h.length,y=0;m>y;y++){var g=h[y];(a||r(l[g]))&&("ref"===g?T(o,i[g],null,t):t.removeAttribute(g))}}function W(e,n,t){var o=e.events;if(!r(o)){var l=n.events;if(!r(l))for(var i=Object.keys(o),a=0;a<i.length;a++){var d=i[a],u=l[d],f=o[d];r(u)?s(d,f):u!==f&&(s(d,f),v(d,n,u))}}}function D(e,n,l,a,d,u,f,c){if(n!==!1&&null!==n){if(!r(n.then))return void n.then(function(n){D(e,n,l,a,d,u,f,c)});if(o(e))return void(o(n)?l.firstChild.nodeValue=n:y(e,n,l,a,d,u,c));var s=n.hooks;r(s)||r(s.willUpdate)||s.willUpdate(e.dom);var v=n.tag||(f&&!r(n.tpl)?n.tpl.tag:null),p=e.tag||(f&&!r(e.tpl)?e.tpl.tag:null);if(a=a||"svg"===v?X:"math"===v?R:null,p!==v)return void(i(p)&&!i(v)?t(p)?D(e.instance._lastNode,n,l,a,d,u,!0,c):D(e.instance,n,l,a,d,u,!0,c):y(e,n,l,a,d,u,c));if(r(p))return void(n.dom=e.dom);if(i(p)&&i(v))return n.instance=e.instance,n.dom=e.dom,void N(n,n.tag,n.instance,e.attrs||{},n.attrs||{},n.hooks,n.children,l,d,u);var h=e.dom;n.dom=h,_(e,n,h,a,d,u,f,c);var m=n.className,g=n.style;e.className!==m&&(r(m)?h.removeAttribute("class"):h.className=m),e.style!==g&&x(e.style,g,h),M(e,n,h,c),W(e,n,h),r(s)||r(s.didUpdate)||s.didUpdate(h)}}function A(e,n,t){var o=e.tpl;if(!r(o)){var l=e.key,i=void 0;if(null!==l){var a=o.pools.keyed[l];i=a&&a.pop()}else{var d=o.pools.nonKeyed;i=d&&d.pop()}if(!r(i))return D(i,e,null,null,n,t,!0),e.dom}}function E(e){var n=e.tpl;if(!r(n)){var t=e.key,o=n.pools;if(null===t){var l=o.nonKeyed;l&&l.push(e)}else{var i=o.keyed;(i[t]||(i[t]=[])).push(e)}}}function L(e,t,l,i,a,d){if(n(e))for(var u=0;u<e.length;u++){var f=e[u],c=!r(f);o(f)?m(f,t,!1):c&&n(f)?L(f,t,l,i,a,d):c&&!r(f.then)?!function(){var e=document.createTextNode("");f.then(function(n){var o=G(n,null,l,i,a,d);t.replaceChild(o,e)}),t.appendChild(e)}():G(f,t,l,i,a,d)}else o(e)?m(e,t,!0):r(e)||r(e.then)?G(e,t,l,i,a,d):!function(){var n=document.createTextNode("");e.then(function(e){var o=G(e,null,l,i,a,d);t.replaceChild(o,n)}),t.appendChild(n)}()}function I(e,n,t){!r(e)&&d(n)&&(e.refs[n]=t)}function z(n,o,l,i,a,d,u,f){l=e(a,l);var c=void 0;if(t(o)){var s=new o(l);s._diffNodes=D;var v=s.getChildContext();r(v)||(f=q.extends({},f,v)),s.context=f,s._pendingSetState=!0,s.componentWillMount();var p=s.shouldComponentUpdate();if(p){s.componentWillUpdate();var h=s._pendingState,m=s.state;s.state=q.extends({},m,h)}var y=s.render();return s._pendingSetState=!1,r(y)||(c=G(y,null,null,u,f,s),s._lastNode=y,null!==d&&d.appendChild(c),s.componentDidMount(),s.componentDidUpdate()),n.dom=c,n.instance=s,c}r(i)||(r(i.componentWillMount)||i.componentWillMount(null,l),r(i.componentDidMount)||u.addListener(function(){i.componentDidMount(c,l)}));var g=o(l);return c=G(g,null,null,u,f,null),n.instance=g,null!==d&&d.appendChild(c),n.dom=c,c}function P(e,n){for(var t=Object.keys(e),o=0;o<t.length;o++){var r=t[o];d(r)&&v(r,n,e[r])}}function F(e,n){var t=document.createTextNode("");return null!==n&&n.appendChild(t),r(e)||(e.dom=t),t}function G(e,t,a,u,f,c){if(l(e)||n(e))return F(e,t);var s=void 0;if(o(e))return s=document.createTextNode(e),null!==t&&t.appendChild(s),s;if(Z&&(s=A(e,u,f)))return t&&t.appendChild(s),s;var v=e.tag;if(null===v)return F(e,t);if(i(v))return z(e,v,e.attrs||{},e.hooks,e.children,t,u,f);a=a||"svg"===v?X:"math"===v?R:null;var p=e.tpl;if(r(p)||r(p.dom)){if(!d(v)||""===v)throw Error("Inferno Error: Expected function or string for element tag type");s=h(v,a)}else s=p.dom.cloneNode(!0);var m=e.children,y=e.attrs,g=e.events,k=e.hooks,b=e.className,C=e.style;return r(k)||(r(k.created)||k.created(s),r(k.attached)||u.addListener(function(){k.attached(s)})),r(g)||P(g,e),l(m)||L(m,s,a,u,f,c),r(y)||H(y,s,c),r(b)||(s.className=b),r(C)||x(null,C,s),e.dom=s,null!==t&&t.appendChild(s),s}function H(e,n,t){for(var o=Object.keys(e),r=0;r<o.length;r++){var l=o[r];"ref"===l?I(t,e[l],n):w(l,e[l],n)}}function K(e){for(var n=0;n<$.length;n++){var t=$[n];if(t.dom===e)return t}return null}function V(e){for(var n=0;n<$.length;n++){var t=$[n];if(t===e)return void $.splice(n,1)}}function B(e,n){var t=K(n),o=new J;null===t?(G(e,n,null,o,{},null),o.trigger(),$.push({node:e,dom:n})):(C(t.node,e,n,null,o,{},null),o.trigger(),null===e&&V(t),t.node=e)}var q={};q.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},q.classCallCheck=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},q.createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),q.extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};var J=function(){function e(){q.classCallCheck(this,e),this._listeners=[]}return q.createClass(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"trigger",value:function(){for(var e=0;e<this._listeners.length;e++)this._listeners[e]()}}]),e}(),Q={},R="http://www.w3.org/1998/Math/MathML",X="http://www.w3.org/2000/svg",Y={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},Z=!0,$=[],ee={render:B};return ee});