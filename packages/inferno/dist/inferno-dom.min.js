!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e,t){if(!o(e)){var r=n(e);(r&&e.length>0||!r)&&(t?t.children=e:t={children:e})}return t}function n(e){return e.constructor===Array}function t(e){return!o(e)&&!o(e.prototype.render)}function r(e){return"string"==typeof e||"number"==typeof e}function o(e){return void 0===e||null===e}function l(e){return void 0===e||null===e||e===!1}function i(e){return"function"==typeof e}function a(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function u(e){return"string"==typeof e}function f(e){return"number"==typeof e}function d(e){return"object"===("undefined"==typeof e?"undefined":ie.typeof(e))}function c(e){return e&&e.then}function s(e,n,t){e.splice(e.indexOf(n),1,t)}function v(e,t,r,o){if(e.dom===t)return r.callback(o),!0;var l=e.children;if(l)if(n(l))for(var i=0;i<l.length;i++){var a=l[i];if("object"===("undefined"==typeof a?"undefined":ie.typeof(a))){var u=v(a,t,r,o);if(u)return!0}}else if(l.dom){var f=v(l,t,r,o);if(f)return!0}}function p(e){return fe[e]||!1}function h(e){for(var n=ue[e.type],t=n.length-1;t>-1;t--){var r=n[t],o=r.node,l=e.target;v(o,l,r,e)}}function m(e,n){if(!o(n)){var t=ue[e];if(!o(t))for(var r=0;r<t.length;r++){var l=t[r];if(l.callback===n)return void t.splice(r,1)}}}function y(e,n,t){n.dom.addEventListener(e,t,!1)}function g(e,n,t){n.dom.removeEventListener(e,t)}function C(e,n,t){var r=ue[e];o(r)?(document.addEventListener(e,h,!1),ue[e]=[{callback:t,node:n}]):r.push({callback:t,node:n})}function k(e,n,t){o(t)?n.append?n.append(e):e.appendChild(n):n.insert?n.insert(e,t):t.insert?e.insertBefore(n,t.childNodes[0]):e.insertBefore(n,t)}function b(e,n){return o(n)?document.createElement(e):document.createElementNS(n,e)}function x(e,n,t){if(!t){var r=document.createTextNode(e);return n.appendChild(r),r}if(""===e){var o=document.createTextNode("");return n.appendChild(o),o}n.textContent=e}function w(e,n,t,l,i,a,u){var f=null,d=e._lastNode;if(o(d)||(f=e,e=d),r(n)){var c=document.createTextNode(n);t.replaceChild(c,c)}else if(r(e)){var s=ne(n,null,l,i,a,u);n.dom=s,t.replaceChild(s,t.firstChild)}else{var v=ne(n,null,l,i,a,u);n.dom=v,t.replaceChild(v,e.dom),null!==f&&(f._lastNode=n),N(e,ve&&!o(e.tpl))}}function N(e,t){if(!l(e)&&!r(e)){var i=e.instance,a=!o(i),u=null,f=null,d=null;a&&(u=i.hooks,f=i.events,d=i.children,void 0!==i.render&&(i.componentWillUnmount(),i._unmounted=!0));var c=e.hooks||u;o(c)||(o(c.willDetach)||c.willDetach(e.dom),o(c.componentWillUnmount)||c.componentWillUnmount(e.dom,c),t===!1&&(o(u)?e.hooks=null:i.hooks=null));var s=e.events||f;if(!o(s))for(var v in s)p(v)?g(v,e,s[v]):m(v,s[v]);var h=e.children||d;if(!o(h)){if(n(h))for(var y=0;y<h.length;y++)N(h[y]);else N(h);if(t===!1){e.children=null;var C=e.domChildren;o(C)||(e.domChildren=null)}}}}function O(){return document.createTextNode("")}function j(e,n){var t=e.dom;t===n?(t.innerHTML="",N(e,ve&&!o(e.tpl))):(n.removeChild(t),ve?(Q(e),N(e,!o(e.tpl))):N(e,!1))}function S(e,n,t){for(var r=0;r<n.length;r++)e.insertBefore(n[r],t)}function U(){return document.activeElement}function _(e){e!==document.body&&document.activeElement!==e&&e.focus()}function E(){var e=[],n=document.createTextNode(""),t=null,r={childNodes:e,appendChild:function(r){e.push(r),t&&t.insertBefore(r,n)},removeChild:function(n){t&&t.removeChild(n),e.splice(e.indexOf(n),1)},insertBefore:function(n,r){t&&t.insertBefore(n,r),e.splice(e.indexOf(r),0,n)},replaceChild:function(n,r){t.replaceChild(n,r),s(e,r,n)},append:function(r){r.appendChild(n),t=r,S(t,e,n)},insert:function(r,o){r.insertBefore(n,o),t=r,S(t,e,n)},remove:function(){t.removeChild(n);for(var r=0;r<e.length;r++)t.removeChild(e[r]);t=null}};return Object.defineProperty(r,"parentNode",{get:function(){return t}}),Object.defineProperty(r,"firstChild",{get:function(){return e[0]}}),r}function M(e,n){if("option"===e.tag){var t=e.attrs&&e.attrs.value;n[t]&&(e.attrs=e.attrs||{},e.attrs.selected="selected")}else for(var r=0,o=e.children.length;o>r;r++)M(e.children[r],n)}function T(e){if("select"===e.tag){var t=e.attrs&&e.attrs.value;if(!o(t)){var r={};if(n(t))for(var l=0,i=t.length;i>l;l++)r[t[l]]=t[l];else r[t]=t;M(e,r),e.attrs&&e.attrs[t]&&delete e.attrs.value}}}function W(e){switch(e.length){case 5:return"value"===e;case 7:return"checked"===e;case 8:return"disabled"===e||"selected"===e;default:return!1}}function D(e,n,t){r(n)?e.firstChild.nodeValue=t:e.textContent=t}function B(e,n,t,r,o,i,a){return l(e)?void ne(n,t,r,o,i,a):l(n)?void j(e,t):void q(e,n,t,r,o,i,null!==e.tpl&&null!==n.tpl,a)}function L(e,n,t){if(u(n))t.style.cssText=n;else if(o(e)){if(!o(n))for(var r=Object.keys(n),l=0;l<r.length;l++){var i=r[l],a=n[i];f(a)&&!se[i]&&(a+="px"),t.style[i]=a}}else if(o(n))t.removeAttribute("style");else{for(var d=Object.keys(n),c=0;c<d.length;c++){var s=d[c],v=n[s];f(v)&&!se[s]&&(v+="px"),t.style[s]=v}for(var p=Object.keys(e),h=0;h<p.length;h++){var m=p[h];o(n[m])&&(t.style[m]="")}}}function A(e,n,t){if(!a(e)){if(W(e))return void(t[e]=n);if(n===!1||o(n))t.removeAttribute(e);else{var r=null;":"===e[5]&&-1!==e.indexOf("xlink:")&&(r="http://www.w3.org/1999/xlink"),null!==r?t.setAttributeNS(r,e,n===!0?e:n):t.setAttribute(e,n===!0?e:n)}}}function I(n,r,l,i,a,u,f,d,c,s){if(a=e(f,a),t(r)){var v=l.props,p=l.state,h=l.state,m=l.getChildContext();o(m)||(s=ie.extends({},s,m)),l.context=s;var y=l._updateComponent(p,h,v,a);o(y)||(q(n,y,d,null,c,s,!0,l),n.dom=y.dom,l._lastNode=y)}else{var g=!0,C=!o(u);if(C&&!o(u.componentShouldUpdate)&&(g=u.componentShouldUpdate(n.dom,i,a)),g!==!1){C&&!o(u.componentWillUpdate)&&u.componentWillUpdate(n.dom,i,a);var k=r(a),b=n.dom;k.dom=b,q(l,k,b,null,c,s,!0,null),n.instance=k,C&&!o(u.componentDidUpdate)&&u.componentDidUpdate(n.dom,i,a)}}}function P(e,n){return n.length&&!o(n[0])&&!o(n[0].key)||e.length&&!o(e[0])&&!o(e[0].key)}function V(e,t,i,a,u,f,c,s,v){var p=!o(i.append),h=e.length,m=t.length,y=h===m;if(y===!1)if(h>m)for(;h!==m;){var g=e[h-1];l(g)||(i.removeChild(a[h-1+v]),N(g)),h--}else if(m>h)for(;h!==m;){var C=t[h],b=ne(C,null,u,f,c,s);k(i,b),!p&&a.push(b),h++}for(var x=0;m>x;x++){var w=e[x],j=t[x],S=x+v;if(w!==j)if(l(j)){if(!l(w)){var U=a[S];if(!o(U))if(r(w))U.nodeValue="";else if(y===!0){var _=O();n(w)&&0===w.length?(k(i,_),!p&&a.splice(S,0,_)):(i.replaceChild(_,a[S]),!p&&a.splice(S,1,_),N(w,ve&&!o(w.tpl)))}}}else if(l(w)){if(r(j)){var E=document.createTextNode(j);i.replaceChild(E,a[S]),!p&&a.splice(S,1,E)}else if(y===!0){var M=ne(j,null,u,f,c,s);i.replaceChild(M,a[S]),!p&&a.splice(S,1,M)}}else if(d(j))n(j)?P(w,j)?z(w,j,a[S],u,f,c,s):n(w)?V(w,j,a[S],a[S].childNodes,u,f,c,s,0):V([w],j,i,a,u,f,c,s,x):n(w)?V(w,[j],a,a[S].childNodes,u,f,c,s,0):B(w,j,i,u,f,c,s);else if(r(j)){var T=document.createTextNode(j),W=a[S];o(W)?i.nodeValue=T.nodeValue:o(W.append)?(!p&&a.splice(S,1,T),i.replaceChild(T,W)):(i.insertBefore(T,W.firstChild),W.remove(),a.splice(0,a.length,T)),N(w,ve&&!o(w.tpl))}}}function z(e,n,t,r,l,i,a){var u=n.length,f=e.length;if(0===u&&f>=5){if(ve)for(var d=0;f>d;d++)Q(e[d]);return void(t.textContent="")}var c=void 0,s=!1,v=0,p=0,h=u-1,m=f-1,y=f>0?e[p]:null,g=u>0?n[v]:null,C=void 0,b=void 0,x=void 0;e:for(;!s&&h>=v&&m>=p;){for(s=!0;g.key===y.key;){if(q(y,g,t,r,l,i,!0,a),v++,p++,v>h||p>m)break e;g=n[v],y=e[p],s=!1}for(C=n[h],b=e[m];C.key===b.key;){if(q(b,C,t,r,l,i,!0,a),h--,m--,v>h||p>m)break e;C=n[h],b=e[m],s=!1}for(;C.key===y.key;){if(x=u>h+1?n[h+1].dom:null,q(y,C,t,r,l,i,!0,a),k(t,C.dom,x),h--,p++,v>h||p>m)break e;C=n[h],y=e[p],s=!1}for(;g.key===b.key;){if(x=e[p].dom,q(b,g,t,r,l,i,!0,a),k(t,g.dom,x),v++,m--,v>h||p>m)break e;g=n[v],b=e[m],s=!1}}if(p>m){if(h>=v)for(x=u>h+1?n[h+1].dom:null;h>=v;v++)k(t,ne(n[v],null,r,l,i,a),x)}else if(v>h)for(;m>=p;p++)c=e[p],j(c,t);else{for(var w=[],N=p;m>=N;N++)c=e[N],w[c.key]=c;x=u>h+1?n[h+1]:null;for(var O=h;O>=v;O--){var S=n[O],U=S.key;c=w[U],x=o(x)?void 0:x.dom,void 0===c?k(t,ne(S,null,r,l,i,a),x):(w[U]=null,q(c,S,t,r,l,i,!0,a),S.dom.nextSibling!==x&&k(t,S.dom,x)),x=S}for(var _=p;m>=_;_++)c=e[_],null!==w[c.key]&&j(c,t)}}function F(e,t,i,a,u,f,d,c){var s=t.children,v=e.children;if(v!==s){var p=null;e.domChildren&&(p=t.domChildren=e.domChildren),l(v)?r(s)?D(i,v,s):o(s)||"object"===("undefined"==typeof s?"undefined":ie.typeof(s))&&(n(s)?X(t,s,i,a,u,f,c):ne(s,i,a,u,f,c)):l(s)?i.textContent="":n(v)?n(s)?null===p?z(v,s,i,a,u,f,c):V(v,s,i,p||[],a,u,f,c,0):V(v,[s],i,p||[],a,u,f,c,0):n(s)?V([v],s,i,p||(t.domChildren=[i.firstChild]),a,u,f,c,0):r(s)?D(i,v,s):q(v,s,i,a,u,f,d,c)}}function G(e,n,t,r){e&&(u(n)&&delete e.refs[n],u(t)&&(e.refs[t]=r))}function H(e,n,t,r){"select"===e.tag&&T(n);var l=n.attrs,i=e.attrs,a=o(l),u=o(i);if(!a)for(var f=Object.keys(l),d=f.length,c=0;d>c;c++){var s=f[c],v=!u&&i[s],p=l[s];v!==p&&("ref"===s?G(r,v,p,t):A(s,p,t))}if(!u)for(var h=Object.keys(i),m=h.length,y=0;m>y;y++){var g=h[y];(a||o(l[g]))&&("ref"===g?G(r,i[g],null,t):t.removeAttribute(g))}}function K(e,n){var t=e.events;if(!o(t)){var r=Object.keys(t),l=n.events;if(o(l))for(var i=0;i<r.length;i++){var a=r[i],u=t[a];p(a)?g(a,e,u):m(a,u)}else for(var f=0;f<r.length;f++){var d=r[f],c=l[d],s=t[d];o(c)?p(d)?g(d,e,s):m(d,s):c!==s&&(p(d)?(g(d,e,s),y(d,n,c)):(m(d,s),C(d,n,c)))}}}function q(e,n,l,a,u,f,d,c){if(n!==!1&&null!==n)if(o(n.then))if(r(e))r(n)?l.firstChild.nodeValue=n:(console.log(e),w(e,n,l,a,u,f,c));else{var s=n.hooks;s&&s.willUpdate&&s.willUpdate(e.dom);var v=n.tag||(d&&n.tpl?n.tpl.tag:null),p=e.tag||(d&&e.tpl?e.tpl.tag:null);if(a=a||"svg"===v?ce:"math"===v?de:null,p!==v){var h=e.instance;i(p)?i(v)?w(h||e,n,l,a,u,f,c):t(p)?q(h._lastNode,n,l,a,u,f,!0,c):q(h,n,l,a,u,f,!0,c):w(h||e,n,l,a,u,f,c)}else if(o(p))n.dom=e.dom;else if(i(p))i(v)&&(n.instance=e.instance,n.dom=e.dom,I(n,n.tag,n.instance,e.attrs||{},n.attrs||{},n.hooks,n.children,l,u,f));else{var m=e.dom,y=n.className,g=n.style;n.dom=m,e!==n&&(F(e,n,m,a,u,f,d,c),H(e,n,m,c),K(e,n)),e.className!==y&&(o(y)?m.removeAttribute("class"):m.className=y),e.style!==g&&L(e.style,g,m),o(s)||o(s.didUpdate)||s.didUpdate(m)}}else n.then(function(n){q(e,n,l,a,u,f,d,c)})}function J(e,n,t){var r=e.tpl;if(!o(r)){var l=e.key,i=void 0;if(null!==l){var a=r.pools.keyed[l];i=a&&a.pop()}else{var u=r.pools.nonKeyed;i=u&&u.pop()}if(!o(i))return q(i,e,null,null,n,t,!0),e.dom}}function Q(e){var n=e.tpl;if(!o(n)){var t=e.key,r=n.pools;if(null===t){var l=r.nonKeyed;l&&l.push(e)}else{var i=r.keyed;(i[t]||(i[t]=[])).push(e)}return!0}return!1}function R(e,n,t,r,o,l,i){var a=O();t&&t.push(a),e.then(function(e){var u=ne(e,null,r,o,l,i);n.replaceChild(u,a),t&&s(t,a,u)}),n.appendChild(a)}function X(e,t,i,a,u,f,d){var s=[],v=!1,p=!1;if(n(t))for(var h=0;h<t.length;h++){var m=t[h];if(r(m))v=!0,s.push(x(m,i,!1));else if(!o(m)&&n(m)){var y=E();v=!0,X(e,m,y,a,u,f,d),k(i,y),s.push(y)}else if(c(m))R(m,i,s,a,u,f,d);else{var g=ne(m,i,a,u,f,d);v||!p&&m&&o(m.key)?(v=!0,s.push(g)):l(m)?(v=!0,s.push(g)):p===!1&&(p=!0)}}else r(t)?x(t,i,!0):c(t)?R(t,i,null,a,u,f,d):ne(t,i,a,u,f,d);s.length>1&&v===!0&&(e.domChildren=s)}function Y(e,n,t){!o(e)&&u(n)&&(e.refs[n]=t)}function Z(n,r,l,i,a,u,f,d){l=e(a,l);var c=void 0;if(t(r)){var s=new r(l);s._diffNodes=q;var v=s.getChildContext();o(v)||(d=ie.extends({},d,v)),s.context=d,s._pendingSetState=!0,s.componentWillMount();var p=s.shouldComponentUpdate();if(p){s.componentWillUpdate();var h=s._pendingState,m=s.state;s.state=ie.extends({},m,h)}var y=s.render();return s._pendingSetState=!1,o(y)||(c=ne(y,null,null,f,d,s),s._lastNode=y,null!==u&&u.appendChild(c),s.componentDidMount(),s.componentDidUpdate()),n.dom=c,n.instance=s,c}o(i)||(o(i.componentWillMount)||i.componentWillMount(null,l),o(i.componentDidMount)||f.addListener(function(){i.componentDidMount(c,l)}));var g=r(l);return c=ne(g,null,null,f,d,null),n.instance=g,null!==u&&u.appendChild(c),n.dom=c,c}function $(e,n){for(var t=Object.keys(e),r=0;r<t.length;r++){var o=t[r];p(o)?y(o,n,e[o]):u(o)&&C(o,n,e[o])}}function ee(e,n){var t=O();return null!==n&&n.appendChild(t),o(e)||(e.dom=t),t}function ne(e,t,a,f,d,c){if(l(e)||n(e))return ee(e,t);var s=void 0;if(r(e))return s=document.createTextNode(e),null!==t&&t.appendChild(s),s;if(ve&&(s=J(e,f,d)))return t&&t.appendChild(s),s;var v=e.tag;if(null===v)return ee(e,t);if(i(v))return Z(e,v,e.attrs||{},e.hooks,e.children,t,f,d);a=a||"svg"===v?ce:"math"===v?de:null;var p=e.tpl;if(o(p)||o(p.dom)){if(!u(v)||""===v)throw Error("Inferno Error: Expected function or string for element tag type");s=b(v,a)}else s=p.dom.cloneNode(!0);var h=e.children,m=e.attrs,y=e.events,g=e.hooks,C=e.className,k=e.style;return e.dom=s,o(g)||(o(g.created)||g.created(s),o(g.attached)||f.addListener(function(){g.attached(s)})),o(y)||$(y,e),l(h)||X(e,h,s,a,f,d,c),o(m)||te(e,m,s,c),o(C)||(s.className=C),o(k)||L(null,k,s),null!==t&&t.appendChild(s),s}function te(e,n,t,r){"select"===e.tag&&T(e);for(var o=Object.keys(n),l=0;l<o.length;l++){var i=o[l];"ref"===i?Y(r,n[i],t):A(i,n[i],t)}}function re(e){for(var n=0;n<pe.length;n++){var t=pe[n];if(t.dom===e)return t}return null}function oe(e){for(var n=0;n<pe.length;n++){var t=pe[n];if(t===e)return void pe.splice(n,1)}}function le(e,n){var t=re(n),r=new ae;if(null===t)ne(e,n,null,r,{},null),r.trigger(),pe.push({node:e,dom:n});else{var o=U();B(t.node,e,n,null,r,{},null),r.trigger(),null===e&&oe(t),t.node=e,_(o)}}var ie={};ie.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},ie.classCallCheck=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},ie.createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),ie.extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};var ae=function(){function e(){ie.classCallCheck(this,e),this._listeners=[]}return ie.createClass(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"trigger",value:function(){for(var e=0;e<this._listeners.length;e++)this._listeners[e]()}}]),e}(),ue={},fe={focus:!0,blur:!0,mouseenter:!0,mouseleave:!0,scroll:!0,load:!0,error:!0},de="http://www.w3.org/1998/Math/MathML",ce="http://www.w3.org/2000/svg",se={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},ve=!0,pe=[],he={render:le};return he});