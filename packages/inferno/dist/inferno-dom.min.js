!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e){return e.constructor===Array}function n(e){return"string"==typeof e||"number"==typeof e}function t(e){return void 0===e||null===e}function r(e){return"function"==typeof e}function i(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function o(e){return"string"==typeof e}function l(e,n,t){if(t)""!==e?n.textContent=e:n.appendChild(document.createTextNode(""));else{var r=document.createTextNode(e);n.appendChild(r)}}function a(e,n,t,r,i){var o=g(n,null,r,i);t.replaceChild(o,e.dom),n.dom=o}function u(e,t,i,o,l,f){if(t!==!1&&null!==t){if(n(e))return void(n(t)&&(i.firstChild.nodeValue=t));var v=t.tag||(f?t["static"].tag:null),p=e.tag||(f?e["static"].tag:null);if(e.events&&e.events.willUpdate&&e.events.willUpdate(e.dom),p!==v)return void(r(p)&&!r(v)?isStatefulComponent(p)?u(e.instance._lastNode,t,i,o,l,!0):u(e.instance,t,i,o,l,!0):a(e,t,i,o,l));if(r(p)&&r(v))return t.instance=e.instance,t.dom=e.dom,void updateComponent(t,t.tag,t.instance,e.attrs,t.attrs,t.events,t.children,i,o,l);var h=e.dom;t.dom=h,d(e,t,h,o,l,f),c(e,t,h),s(e,t,h),t.events&&t.events.didUpdate&&t.events.didUpdate(h)}}function d(r,i,o,l,a,d){var c=i.children,s=r.children;if(s!==c&&!t(s)&&!t(c))if(e(s))if(e(c)){var f=c.length&&!t(c[0].key)||s.length&&!t(s[0].key);f?patchKeyedChildren(s,c,o,l,a,null):p(s,c,o,l,a,null)}else p(s,[c],o,l,a,null);else e(c)?p([s],c,o,l,a,null):n(s)?n(c)&&(o.firstChild.nodeValue=c):u(s,c,o,l,a,!0)}function c(e,n,t){var r=n.attrs,i=e.attrs;if(r)for(var o=0;o<r.length;o++){var l=i[o],a=r[o],u=l&&l.name,d=a&&a.name,c=l&&l.value,s=a&&a.value;u&&u===d&&v(u,c,s,t)}}function s(e,n,t){}function f(e,n,r,i,o){return t(e)?void mountNode(n,r,i):t(n)?void remove(e,r):e["static"]!==n["static"]?void u(e,n,r,i,o,!0):void u(e,n,r,i,o,!1)}function v(e,n,t,r){if(n!==t)if("className"===e)r.className=t;else if("style"===e)if(o(t))r.style.cssText=t;else for(var l in t){var a=t[l];r.style[l]=a}else i(e)||(t===!1||null==t?r.removeAttribute(e):t===!0?r.setAttribute(e,e):r.setAttribute(e,t))}function p(e,n,t,r,i,o){var l=e.length,a=n.length,u=0,d=void 0;if(l>a)for(;l!==a;){var c=e[l-1];t.removeChild((d=c.dom)||d&&(d=d.previousSibling)||(d=t.lastChild)),l--}else if(a>l)for(;l!==a;){var s=n[l+u],v=mountNode(s,null,r,i);t.appendChild(v),a--,u++}for(var p=0;a>p;p++){var c=e[p],s=n[p];c!==s&&f(c,s,t,r,i)}}function h(t,r,i,o){if(e(t))for(var a=0;a<t.length;a++){var u=t[a];n(u)?l(u,r,!1):g(u,r,i,o)}else n(t)?l(t,r,!0):g(t,r,i,o)}function m(e,n,t,r,i,o,l,a){if(t=addChildrenToProps(i,t),isStatefulComponent(n)){var u=new n(t);u._diffNodes=diffNodes;var d=u.getChildContext();d&&(a=_extends({},a,d)),u.context=a,u.componentWillMount();var c,s=u.render();return s&&(c=g(s,null,l,a),u._lastNode=s,o&&o.appendChild(c),l.addListener(u.componentDidMount)),e.dom=c,e.instance=u,c}var c;r&&(r.componentWillMount&&r.componentWillMount(null,t),r.componentDidMount&&l.addListener(function(){r.componentDidMount(c,t)}));var s=n(t);return c=g(s,null,l,a),e.instance=s,o&&o.appendChild(c),e.dom=c,c}function g(i,o,l,a){var u;if(null!==i&&null!=i&&!e(i)){if(n(i))return document.createTextNode(i);if(_&&(u=recycle(i,l,a)))return o&&o.appendChild(u),u;if(r(i.tag))return m(i,i.tag,i.attrs,i.events,i.children,o,l,a);u=i["static"].dom?i["static"].dom.cloneNode(!0):document.createElement(i.tag);var d=i.children,c=i.attrs,s=i.events;return s&&(s.click&&handleEvent("click",u,s.click),s.created&&s.created(u),s.attached&&l.addListener(function(){s.attached(u)})),c&&C(c,u),t(d)||h(d,u,l,a),i.dom=u,null!==o&&o.appendChild(u),u}}function C(e,n){for(var t=0;t<e.length;t++){var r=e[t],i=r&&r.name,o=r&&r.value;i&&v(i,null,o,n)}}function y(e){for(var n=0;n<w.length;n++){var t=w[n];if(t.dom===e)return t}return null}function N(e){for(var n=0;n<w.length;n++){var t=w[n];if(t===rootNode)return w.splice(n,1),!0}return!1}function b(e,n){var r=y(n),i=new x;t(r)?(g(e,n,i,{}),i.trigger(),w.push({node:e,dom:n})):(f(r.node,e,n,i,{}),i.trigger(),null===e&&N(r),r.node=e)}var k={};k.classCallCheck=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},k.createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var x=function(){function e(){k.classCallCheck(this,e),this._listeners=[]}return k.createClass(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"trigger",value:function(){for(var e=0;e<this._listeners.length;e++)this._listeners[e]()}}]),e}(),_=!1,w=[],M={render:b};return M});