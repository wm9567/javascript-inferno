!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e,t){if(!r(e)){var l=n(e);(l&&e.length>0||!l)&&(t?t.children=e:t={children:e})}return t}function n(e){return e instanceof Array}function t(e){return void 0!==e.prototype.render}function l(e){return"string"==typeof e||"number"==typeof e}function r(e){return void 0===e||null===e}function o(e){return null===e||e===!1||void 0===e}function i(e){return"function"==typeof e}function a(e){return"string"==typeof e}function s(e){return e instanceof Promise}function d(e,n,t){e.splice(e.indexOf(n),1,t)}function c(e,n,t,l,o){if(void 0!==n){var i=e.key,a=null===i?n.pools.nonKeyed:n.pools.keyed[i];if(!r(a)){var s=a.pop();if(!r(s))return ne(s,e,null,null,t,l,o,!0),e.dom}}return null}function u(e){var n=e.bp;if(!r(n)){var t=e.key,l=n.pools;if(null===t){var o=l.nonKeyed;o&&o.push(e)}else{var i=l.keyed;(i[t]||(i[t]=[])).push(e)}return!0}return!1}function f(e,t,l,r,i,a){if(n(e))return L(e,t);if(o(e))return null;var s=e.bp;if(Ce){var d=c(e,s,l,r,i);if(null!==d)return null!==t&&t.appendChild(d),d}return h(void 0!==s,e,s,t,l,r,i,a)}function v(e){"select"===e.tag&&H(e)}function h(e,n,t,l,s,d,c,u){var h=n.tag;if(e&&!h&&(h=t.tag),null===h)return L(n,l);if(e&&t.isComponent||!e&&i(h))return w(n,h,n.attrs||{},n.hooks,n.children,c,l,s,d);if(a(h)&&""!==h){(e&&t.isSVG||"svg"===h)&&(u=!0);var p=_(h,u),C=n.hooks;n.dom=p,(e&&t.hasHooks||!e&&!r(C))&&P(C,s,p),e&&t.lazy&&ce(n,s,p);var x=n.children;if(e)switch(t.childrenType){case 1:U(x,p,!0);break;case 2:f(x,p,s,d,c,u);break;case 3:g(n,x,p,s,d,c,u);break;case 4:m(x,p,s,d,c,u);break;case 5:y(n,x,p,s,d,c,u)}else o(x)||y(n,x,p,s,d,c,u);var N=n.attrs,O=n.events,j=n.className,T=n.style;if(e&&t.hasAttrs||!e&&!r(N)){v(n);var S=void 0;if(e){if(null===t.attrKeys){var D=Object.keys(N);t.attrKeys=t.attrKeys?t.attrKeys.concat(D):D}S=t.attrKeys}else S=Object.keys(N);b(N,S,p,c)}if(r(j)||(p.className=j),r(T)||te(null,T,p),e&&t.hasEvents||!e&&!r(O)){var K=void 0;e?(null===t.eventKeys&&(t.eventKeys=Object.keys(O)),K=t.eventKeys):K=Object.keys(O),k(O,K,p)}return null!==l&&l.appendChild(p),p}}function p(e,n,t,l,r,i,a){var s=D();t&&t.push(s),e.then(function(e){var c=f(e,null,l,r,i,a);null===n||o(c)||n.replaceChild(c,s),t&&d(t,s,c)}),n.appendChild(s)}function m(e,n,t,l,r,o){for(var i=0;i<e.length;i++)f(e[i],n,t,l,r,o)}function g(e,t,i,a,d,c,u){for(var v=null,h=!1,m=!1,y=0;y<t.length;y++){var C=t[y];if(l(C))h=!0,v=v||[],v.push(U(C,i,!1));else if(!r(C)&&n(C)){var k=Y();h=!0,g(e,C,k,a,d,c,u),N(i,k),v=v||[],v.push(k)}else if(s(C))p(C,i,v,a,d,c,u);else{var w=f(C,i,a,d,c,u);h||!m&&!r(C)&&r(C.key)?(h=!0,v=v||[],v.push(w)):o(C)?(h=!0,v=v||[],v.push(w)):m===!1&&(m=!0)}}null!==v&&v.length>1&&h===!0&&(e.domChildren=v)}function y(e,t,r,o,i,a,d){n(t)?g(e,t,r,o,i,a,d):l(t)?U(t,r,!0):s(t)?p(t,r,null,o,i,a,d):f(t,r,o,i,a,d)}function C(e,n,t){!o(e)&&a(n)&&(e.refs[n]=t)}function k(e,n,t){for(var l=0;l<n.length;l++){var r=n[l];t[r]=e[r]}}function w(n,l,i,a,s,d,c,u,v){i=e(s,i);var h=void 0;if(t(l)){var p=new l(i);p._patch=ne,!r(d)&&i.ref&&C(d,i.ref,p);var m=p.getChildContext();r(m)||(v=ye.extends({},v,m)),p.context=v,p._unmounted=!1,p._pendingSetState=!0,p.componentWillMount();var g=p.shouldComponentUpdate();if(g){p.componentWillUpdate();var y=p._pendingState,k=p.state;p.state=ye.extends({},k,y)}var w=p.render();p._pendingSetState=!1,r(w)||(h=f(w,null,u,v,p),p._lastNode=w,null===c||o(h)||c.appendChild(h),p.componentDidMount(),p.componentDidUpdate()),n.dom=h,n.instance=p}else{r(a)||(r(a.componentWillMount)||a.componentWillMount(null,i),r(a.componentDidMount)||u.addListener(function(){a.componentDidMount(h,i)}));var b=l(i);h=f(b,null,u,v,null),n.instance=b,null===c||o(h)||c.appendChild(h),n.dom=h}return h}function b(e,n,t,l){for(var r=0;r<n.length;r++){var o=n[r];"ref"===o?C(l,e[o],t):re(o,e[o],t)}}function x(e){return!r(e.append)}function N(e,n,t){r(t)?x(n)?n.append(e):e.appendChild(n):x(n)?n.insert(e,t):x(t)?e.insertBefore(n,t.childNodes[0]||t.dom):e.insertBefore(n,t)}function O(e,n,t){r(t)?e.appendChild(n):e.insertBefore(n,t)}function _(e,n){var t=void 0;return t=n===!0?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}function U(e,n,t){if(null===n)return document.createTextNode(e);if(t){if(""!==e)return n.textContent=e,n.firstChild;var l=document.createTextNode("");return n.appendChild(l),l}var r=document.createTextNode(e);return n.appendChild(r),r}function j(e,n,t,l,o,i,a){var s=null,d=e._lastNode;r(d)||(s=e,e=d);var c=f(n,null,l,o,i,a);n.dom=c,T(t,c,e.dom),null!==s&&(s._lastNode=n),S(e)}function T(e,n,t){x(t)?t.replaceWith(n):e.replaceChild(n,t)}function S(e){if(!o(e)&&!l(e)){var t=e.instance,i=null,a=null;r(t)||(i=t.hooks,a=t.children,void 0!==t.render&&(t.componentWillUnmount(),t._unmounted=!0));var s=e.hooks||i;r(s)||(r(s.willDetach)||s.willDetach(e.dom),r(s.componentWillUnmount)||s.componentWillUnmount(e.dom,s));var d=e.children||a;if(!r(d))if(n(d))for(var c=0;c<d.length;c++)S(d[c]);else S(d)}}function D(){return document.createTextNode("")}function K(e,n){var t=e.dom;t===n?t.innerHTML="":(n.removeChild(t),Ce&&u(e)),S(e)}function A(e,n,t){for(var l=n||Object.keys(e),r=0;r<l.length;r++){var o=l[r];t[o]=null}}function E(e,n,t){for(var l=0;l<n.length;l++)e.insertBefore(n[l],t)}function W(){return document.activeElement}function B(e,n){if(Ce){var t=n.length;if(t>5)for(var l=0;t>l;l++){var r=n[l];o(r)||u(r)}}e.textContent=""}function M(e){e!==document.body&&document.activeElement!==e&&e.focus()}function Y(){var e=[],n=document.createTextNode(""),t=null,l={dom:n,childNodes:e,appendChild:function(l){e.push(l),t&&t.insertBefore(l,n)},removeChild:function(n){t&&t.removeChild(n),e.splice(e.indexOf(n),1)},insertBefore:function(n,l){t&&t.insertBefore(n,l),e.splice(e.indexOf(l),0,n)},replaceChild:function(n,l){t.replaceChild(n,l),d(e,l,n)},append:function(l){l.appendChild(n),t=l,E(t,e,n)},insert:function(l,r){l.insertBefore(n,r),t=l,E(t,e,n)},remove:function(){t.removeChild(n);for(var l=0;l<e.length;l++)t.removeChild(e[l]);t=null},replaceWith:function(l){t.replaceChild(l,n);for(var r=0;r<e.length;r++)t.removeChild(e[r]);t=null},getElementsByTagName:null};return Object.defineProperty(l,"parentNode",{get:function(){return t}}),Object.defineProperty(l,"firstChild",{get:function(){return e[0]}}),l}function V(e){return e.length&&!r(e[0])&&!r(e[0].key)}function X(e,n){if("option"===e.tag){var t=e.attrs&&e.attrs.value;n[t]?(e.attrs=e.attrs||{},e.attrs.selected="selected",e.dom.selected=!0):e.dom.selected=!1}else for(var l=0,r=e.children.length;r>l;l++)X(e.children[l],n)}function H(e){var t=e.attrs&&e.attrs.value,l={};if(n(t))for(var r=0,o=t.length;o>r;r++)l[t[r]]=t[r];else l[t]=t;for(var i=0,a=e.children.length;a>i;i++)X(e.children[i],l);e.attrs&&e.attrs[t]&&delete e.attrs.value}function L(e,n){var t=D();return null!==n&&n.appendChild(t),o(e)||(e.dom=t),t}function P(e,n,t){r(e.created)||e.created(t),r(e.attached)||n.addListener(function(){e.attached(t)})}function z(e){var n=e.attrs.value;r(n)||(e.dom.value=n)}function q(e,n){if("input"===e){var t=n.attrs.type;if("text"===t)z(n);else if("checkbox"===t||"radio"===t){var l=n.attrs.checked;n.dom.checked=!!l}}else"textarea"===e&&z(n)}function G(e,t,i,a,s,d,c){var u=t.children,v=e.children;if(v!==u){var h=null;e.domChildren&&(h=t.domChildren=e.domChildren),o(v)?l(u)?$(i,v,u):r(u)||(n(u)?g(t,u,i,a,s,d,c):f(u,i,a,s,d,c)):o(u)?B(i,v):n(v)?n(u)?null===h&&v.length>1?ae(v,u,i,a,s,d,c):V(u)?ae(v,u,i,a,s,d,c):ie(v,u,i,h||(t.domChildren=[]),a,s,d,0,c):ie(v,[u],i,h||[],a,s,d,0):n(u)?ie([v],u,i,h||(t.domChildren=[i.firstChild]),a,s,d,0,c):l(u)?$(i,v,u):l(v)?ne(v,u,i,a,s,d,null,c):ne(v,u,i,a,s,d,!0,c)}}function I(e,n,t,l){e&&(a(n)&&delete e.refs[n],a(t)&&(e.refs[t]=l))}function R(e,n,t,l,o){var i=n.events,a=e.events,s=!r(i),d=!r(a);s?d?le(a,i,t,l,o):k(i,l,o):d&&A(a,t,o)}function F(e,n,t,l,o,i){"select"===e.tag&&H(n);var a=n.attrs,s=e.attrs,d=r(a),c=!r(s);if(!d)for(var u=l||Object.keys(a),f=u.length,v=0;f>v;v++){var h=u[v],p=c&&s[h],m=a[h];p!==m&&("ref"===h?I(i,p,m,o):re(h,m,o))}if(c)for(var g=t||Object.keys(s),y=g.length,C=0;y>C;C++){var k=g[C];(d||r(a[k]))&&("ref"===k?I(i,s[k],null,o):o.removeAttribute(k))}}function J(e,n,l,i,a,s,d,c,u){var v=void 0;n.hasHooks===!0&&(v=n.hooks&&!r(v.willUpdate))&&v.willUpdate(e.dom);var h=n.tag||i.tag,p=e.tag||l.tag;if(p!==h)if(l.isComponent===!0){var m=e.instance;i.isComponent===!0?(j(m||e,n,a,s,d,c,!1),S(e)):t(p)?Q(m._lastNode,n,a,s,d,c,!0):Q(m,n,a,s,d,c,!0)}else j(e,n,a,s,d,c,!1);else if(r(p))n.dom=e.dom;else if(l.isComponent===!0){if(i.isComponent===!0){var y=e.instance;!r(y)&&y._unmounted?(null!==a&&K(e,a),w(n,p,n.attrs||{},n.hooks,n.children,y,a,s,d)):(n.instance=y,n.dom=e.dom,oe(!0,n,n.tag,i,y,e.attrs||{},n.attrs||{},n.hooks,n.children,a,s,d))}}else{var C=e.dom,k=l.childrenType,b=i.childrenType;if(n.dom=C,i.lazy===!0&&u===!1){var x=e.clipData;if(null===s.scrollY&&s.refresh(),n.clipData=x,(x.pending===!0||x.top-s.scrollY>s.screenHeight)&&he(x,C,e,n,a,s))return;if(x.bottom<s.scrollY&&he(x,C,e,n,a,s))return}if(k>0||b>0)if(5===b||5===k)G(e,n,C,s,d,c);else{var N=e.children,O=n.children;0===k||o(N)?b>2?g(n,O,C,s,d,c):f(O,C,s,d,c):0===b||o(O)?k>2?B(C,N):K(N,C):N!==O&&(4===k&&4===b?ae(N,O,C,s,d,c):2===k&&2===b?ne(N,O,C,s,d,c,!0,!1):1===k&&1===b?$(C,N,O):G(e,n,C,s,d,c))}if((l.hasAttrs===!0||i.hasAttrs===!0)&&F(e,n,l.attrKeys,i.attrKeys,C,c),(l.hasEvents===!0||i.hasEvents===!0)&&R(e,n,l.eventKeys,i.eventKeys,C),l.hasClassName===!0||i.hasClassName===!0){var _=n.className;e.className!==_&&(r(_)?C.removeAttribute("class"):C.className=_)}if(l.hasStyle===!0||i.hasStyle===!0){var U=n.style;e.style!==U&&te(e.style,U,C)}n.hasHooks!==!0||r(v.didUpdate)||v.didUpdate(C),q(h,n)}}function Q(e,n,l,o,a,d,c){if(s(n))n.then(function(n){ne(e,n,l,o,a,d,null,!1)});else{var u=n.hooks,f=!r(u);f&&!r(u.willUpdate)&&u.willUpdate(e.dom);var v=n.tag||(r(n.bp)?null:n.bp.tag),h=e.tag||(r(e.bp)?null:e.bp.tag);if("svg"===v&&(c=!0),h!==v){var p=e.instance;i(h)?i(v)?j(p||e,n,l,o,a,d,c):t(h)?Q(p._lastNode,n,l,o,a,d,!0,c):Q(p,n,l,o,a,d,!0,c):j(p||e,n,l,o,a,d,c)}else if(r(h))n.dom=e.dom;else if(i(h)){if(i(v)){var m=e._instance;!r(m)&&m._unmounted?(null!==l&&K(e,l),w(n,h,n.attrs||{},n.hooks,n.children,m,l,o,a)):(n.instance=e.instance,n.dom=e.dom,oe(!1,n,n.tag,null,n.instance,e.attrs||{},n.attrs||{},n.hooks,n.children,l,o,a))}}else{var g=e.dom,y=n.className,C=n.style;n.dom=g,G(e,n,g,o,a,d,c),F(e,n,null,null,g,d),R(e,n,null,null,g),e.className!==y&&(r(y)?g.removeAttribute("class"):g.className=y),e.style!==C&&te(e.style,C,g),f&&!r(u.didUpdate)&&u.didUpdate(g),q(v,n)}}}function Z(e,n,t){e.split(",").forEach(function(e){return n[e]=t})}function $(e,n,t){l(n)?e.firstChild.nodeValue=t:e.textContent=t}function ee(e,n,t,l,r,o,i,a){var s=e.bp,d=n.bp;void 0===s||void 0===d?Q(e,n,t,l,r,o,i):J(e,n,s,d,t,l,r,o,a)}function ne(e,n,t,r,i,a,s,d){if(null!==s)ee(e,n,t,r,i,a,d,!1);else if(o(e))f(n,t,r,i,a,d);else if(o(n))K(e,t);else if(l(e))if(l(n))t.firstChild.nodeValue=n;else{var c=f(n,null,r,i,a,d);n.dom=c,T(t,c,t.firstChild)}else if(l(n)){var u=document.createTextNode(n);T(t,u,e.dom)}else ee(e,n,t,r,i,a,d,!1)}function te(e,n,t){if(a(n))t.style.cssText=n;else if(r(e)){if(!r(n))for(var l=Object.keys(n),o=0;o<l.length;o++){var i=l[o];t.style[i]=n[i]}}else if(r(n))t.removeAttribute("style");else{for(var s=Object.keys(n),d=0;d<s.length;d++){var c=s[d];t.style[c]=n[c]}for(var u=Object.keys(e),f=0;f<u.length;f++){var v=u[f];r(n[v])&&(t.style[v]="")}}}function le(e,n,t,l,o){for(var i=l||Object.keys(n),a=0;a<i.length;a++){var s=i[a],d=e[s],c=n[s];d!==c&&(o[s]=c)}for(var u=t||Object.keys(e),f=0;f<u.length;f++){var v=u[f];r(n[v])&&(o[v]=null)}}function re(e,n,t){if(be[e])t[e]=null===n?"":n;else if(xe[e])t[e]=n?!0:!1;else{var l=Ne[e];n===!1||r(n)?void 0!==l?t.removeAttributeNS(l,e):t.removeAttribute(e):void 0!==l?t.setAttributeNS(l,e,n===!0?e:n):t.setAttribute(e,n===!0?e:n)}}function oe(n,l,i,a,s,d,c,u,f,v,h,p){if(c=e(f,c),t(i)){var m=s.props,g=s.state,y=s.state,C=s.getChildContext();r(C)||(p=ye.extends({},p,C)),s.context=p;var k=s._updateComponent(g,y,m,c);o(k)||(ne(s._lastNode,k,v,h,p,s,null,!1),l.dom=k.dom,s._lastNode=k)}else{var w=!0,b=n&&a.hasHooks===!0||!r(u);if(b&&!r(u.componentShouldUpdate)&&(w=u.componentShouldUpdate(l.dom,d,c)),w!==!1){b&&!r(u.componentWillUpdate)&&u.componentWillUpdate(l.dom,d,c);var x=i(c);if(!o(x)){var N=l.dom;x.dom=N,ne(s,x,v,h,p,null,null,!1),l.instance=x,b&&!r(u.componentDidUpdate)&&u.componentDidUpdate(l.dom,d,c)}}}}function ie(e,t,i,a,s,d,c,u,v){var h=void 0===i.append,p=e.length,m=t.length,g=p===m;if(g===!1)if(p>m)for(;p!==m;){var y=e[p-1];o(y)||(i.removeChild(a[p-1+u]),h&&a.splice(p-1+u,1),S(y),p--,e.pop())}else for(;p!==m;){var C=t[p],k=void 0;e.push(C),k=l(C)?document.createTextNode(C):f(C,null,d,c,v),o(k)||N(i,k),h&&(1===p&&a.push(i.firstChild),h&&a.splice(p+u,0,k)),p++}for(var w=0;m>w;w++){var b=e[w],x=t[w],O=w+u;if(b!==x)if(o(x)){if(!o(b))if(n(b)&&0===b.length)for(var _=0;_<b.length;_++)K(b[_],i);else{var U=a[O];r(U)&&O--,i.removeChild(a[O]),h&&(a.splice(O,1),u--),S(b)}}else if(o(b)){if(l(x)){var j=document.createTextNode(x),D=a[O];if(r(D)){var A=a[O+1];N(i,j,A),h&&a.splice(O,1,j)}else N(i,j,D),h&&a.splice(O,0,j)}else if(g===!0){var E=f(x,null,s,d,c,v),W=a[O];if(r(W)){var B=a[O+1];N(i,E,B),h&&a.splice(O,1,E)}else N(i,E,W),h&&a.splice(O,0,E)}}else if(l(x))if(1===p)l(b)?void 0===i.getElementsByTagName?i.nodeValue=x:i.firstChild.nodeValue=x:(S(b),i.textContent=x);else{var M=document.createTextNode(x),X=a[O];r(X)?i.nodeValue=M.nodeValue:l(b)?X.nodeValue=x:void 0===X.append?(h&&a.splice(O,1,M),T(i,M,X)):(N(i,M,X.firstChild),X.remove(),a.splice(0,a.length,M)),S(b)}else if(n(x))if(V(x))ae(b,x,a[O],s,d,c,v);else if(n(b)){var H=a[O];if(void 0===H.append)if(x.length>1&&1===b.length){var L=Y();L.insert(i,H),L.appendChild(H),h&&a.splice(O,1,L),ie(b,x,L,L.childNodes,s,d,c,0,v)}else ie(b,x,i,a,s,d,c,0,v);else ie(b,x,a[O],a[O].childNodes,s,d,c,0,v)}else if(x.length>1){var P=Y();P.appendChild(i.firstChild),N(i,P,i.firstChild),h&&a.splice(O,1,P),ie([b],x,P,P.childNodes,s,d,c,w,v)}else ie([b],x,i,a,s,d,c,w,v);else n(b)?ie(b,[x],a,a[O].childNodes,s,d,c,0,v):ne(b,x,i,s,d,c,null,v)}}function ae(e,n,t,l,r,o,i){for(var a=e.length,s=n.length,d=void 0,c=a-1,u=s-1,v=0,h=0,p=null,m=null,g=null,y=null,C=void 0,k=void 0,w=0,b=void 0,x=void 0;c>=v&&u>=h&&(m=n[h],p=e[v],m.key===p.key);)ne(p,m,t,l,r,o,!0,i),h++,v++;for(;c>=v&&u>=h&&(g=n[u],y=e[c],g.key===y.key);)ne(y,g,t,l,r,o,!0,i),u--,c--;for(;c>=v&&u>=h&&(g=n[u],p=e[v],g.key===p.key);)k=s>u+1?n[u+1].dom:null,ne(p,g,t,l,r,o,!0,i),O(t,g.dom,k),u--,v++;for(;c>=v&&u>=h&&(m=n[h],y=e[c],m.key===y.key);)k=e[v].dom,ne(y,m,t,l,r,o,!0,i),O(t,m.dom,k),h++,c--;if(v>c){if(u>=h)for(k=s>u+1?n[u+1].dom:null;u>=h;h++)O(t,f(n[h],null,l,r,o,i),k)}else if(h>u)for(;c>=v;)K(e[v++],t);else{var N=c-v+1,_=u-h+1,U=new Array(_);for(d=0;_>d;d++)U[d]=-1;var j=!1,T=0;if(16>=N*_)for(d=v;c>=d;d++){var S=!0;for(y=e[d],C=h;u>=C;C++)if(g=n[C],y.key===g.key){U[C-h]=d,w>C?j=!0:w=C,ne(y,g,t,l,r,o,!0,i),S=!1;break}S&&(K(y,t),T++)}else{var D=new Map;for(d=h;u>=d;d++)x=n[d],D.set(x.key,d);for(d=c;d>=v;d--)y=e[d],C=D.get(y.key),void 0===C?(K(y,t),T++):(g=n[C],U[C-h]=d,w>C?j=!0:w=C,ne(y,g,t,l,r,o,!0,i))}if(j){var A=se(U);for(C=A.length-1,d=_-1;d>=0;d--)-1===U[d]?(b=d+h,k=s>b+1?n[b+1].dom:null,O(t,f(n[b],null,l,r,o,i),k)):0>C||d!==A[C]?(b=d+h,k=s>b+1?n[b+1].dom:null,O(t,n[b].dom,k)):C--}else if(N-T!==_)for(d=_-1;d>=0;d--)-1===U[d]&&(b=d+h,k=s>b+1?n[b+1].dom:null,O(t,f(n[b],null,l,r,o,i),k))}}function se(e){var n=e.slice(0),t=[];t.push(0);var l=void 0,r=void 0,o=void 0,i=void 0,a=void 0;for(l=0;l<e.length;l++)if(-1!==e[l])if(r=t[t.length-1],e[r]<e[l])n[l]=r,t.push(l);else{for(o=0,i=t.length-1;i>o;)a=(o+i)/2|0,e[t[a]]<e[l]?o=a+1:i=a;e[l]<e[t[o]]&&(o>0&&(n[l]=t[o-1]),t[o]=l)}for(o=t.length,i=t[o-1];o-- >0;)t[o]=i,i=n[i];return t}function de(){this._listeners=[],this.scrollX=null,this.scrollY=null,this.screenHeight=_e,this.screenWidth=Oe}function ce(e,n,t){n.addListener(function(){var l=t.getBoundingClientRect();null===n.scrollY&&n.refresh(),e.clipData={top:l.top+n.scrollY,left:l.left+n.scrollX,bottom:l.bottom+n.scrollY,right:l.right+n.scrollX,pending:!1}})}function ue(e){ee(e.lastNode,e.nextNode,e.parentDom,e.lifecycle,null,null,!1,!0),e.clipData.pending=!1}function fe(){De=!0,setTimeout(ve,100)}function ve(){Se.forEach(ue),Se.clear(),De=!1}function he(e,n,t,l,r,o){if(performance.now()>Te+2e3){var i=Se.get(n);return void 0===i?Se.set(n,{lastNode:t,nextNode:l,parentDom:r,clipData:e,lifecycle:o}):i.nextNode=l,e.pending=!0,De===!1&&fe(),!0}return ve(),!1}function pe(e){for(var n=0;n<Ke.length;n++){var t=Ke[n];if(t.dom===e)return t}return null}function me(e){for(var n=0;n<Ke.length;n++){var t=Ke[n];if(t===e)return void Ke.splice(n,1)}}function ge(e,n){var t=pe(n),l=new de;if(null===t)f(e,n,l,{},null,!1),l.trigger(),Ke.push({node:e,dom:n});else{var r=W();ne(t.node,e,n,l,{},null,null,!1),l.trigger(),null===e&&me(t),t.node=e,window.node=e,M(r)}}var ye={};ye.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},ye.classCallCheck=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},ye.createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var l=n[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(n,t,l){return t&&e(n.prototype,t),l&&e(n,l),n}}(),ye.extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e};var Ce=!0,ke="http://www.w3.org/1999/xlink",we="http://www.w3.org/XML/1998/namespace",be={},xe={},Ne={};Z("xlink:href,xlink:arcrole,xlink:actuate,xlink:role,xlink:titlef,xlink:type",Ne,ke),Z("xml:base,xml:lang,xml:space",Ne,we),Z("volume,value",be,!0),Z("muted,scoped,loop,open,checked,default,capture,disabled,selected,readonly,multiple,required,autoplay,controls,seamless,reversed,allowfullscreen,novalidate",xe,!0);var Oe=window.screen.width,_e=window.screen.height,Ue=0,je=0,Te=0;window.onscroll=function(e){Ue=window.scrollX,je=window.scrollY,Te=performance.now()},window.resize=function(e){Ue=window.scrollX,je=window.scrollY,Oe=window.screen.width,_e=window.screen.height,Te=performance.now()},de.prototype={refresh:function(){this.scrollX=window.scrollX,this.scrollY=window.scrollY},addListener:function(e){this._listeners.push(e)},trigger:function(){for(var e=0;e<this._listeners.length;e++)this._listeners[e]()}};var Se=new Map,De=!1,Ke=[],Ae={render:ge};return Ae});