!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e,t){if(!o(e)){var r=n(e);(r&&e.length>0||!r)&&(t?t.children=e:t={children:e})}return t}function n(e){return e.constructor===Array}function t(e){return!o(e)&&e.prototype&&e.prototype.render}function r(e){return"string"==typeof e||"number"==typeof e}function o(e){return void 0===e||null===e}function l(e){return void 0===e||null===e||e===!1}function i(e){return"function"==typeof e}function a(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function u(e){return"string"==typeof e}function d(e){return"number"==typeof e}function f(e){return e instanceof Promise}function c(e,n,t){o(t)?e.appendChild(n):e.insertBefore(n,t)}function s(e,n){return n?document.createElementNS(n,e):document.createElement(e)}function v(e,n,t){if(t)""!==e?n.textContent=e:n.appendChild(document.createTextNode(""));else{var r=document.createTextNode(e);n.appendChild(r)}}function p(e,n,t,o,l,i,a){var u=void 0;r(n)?(u=document.createTextNode(n),t.replaceChild(u,u)):r(e)?(u=P(n,null,o,l,i,a),n.dom=u,t.replaceChild(u,t.firstChild)):(u=P(n,null,o,l,i,a),n.dom=u,t.replaceChild(u,e.dom))}function h(e){if(!l(e)){var t=e.instance;t&&void 0!==t.render&&(t.componentWillUnmount(),t._unmounted=!0);var r=e.hooks;r&&!o(r.willDetach)&&r.willDetach(e.dom),r&&!o(r.componentWillUnmount)&&r.componentWillUnmount(e.dom,r);var i=e.children;if(!o(i))if(n(i))for(var a=0;a<i.length;a++)h(i[a]);else h(i)}}function m(e,n){var t=e.dom;h(e),t===n?t.innerHTML="":(n.removeChild(t),G&&T(e))}function y(e){switch(e.length){case 5:return"value"===e;case 7:return"checked"===e;case 8:return"disabled"===e||"selected"===e;default:return!1}}function g(e,n,t,r,o,i,a){return l(e)?void P(n,t,r,o,i,a):l(n)?void m(e,t):void M(e,n,t,r,o,i,null!==e.tpl&&null!==n.tpl,a)}function k(e,n,t){if(u(n))t.style.cssText=n;else if(o(e)){if(!o(n))for(var r=Object.keys(n),l=0;l<r.length;l++){var i=r[l],a=n[i];d(a)&&(a+="px"),t.style[i]=a}}else if(o(n))t.removeAttribute("style");else{for(var f=Object.keys(n),c=0;c<f.length;c++){var s=f[c],v=n[s];d(v)&&(v+="px"),t.style[s]=v}for(var p=Object.keys(e),h=0;h<p.length;h++){var m=p[h];n[m]||(t.style[m]="")}}}function C(e,n,t,r){if(!a(e)){if(y(e))return void(r[e]=t);if(t===!1||o(t))r.removeAttribute(e);else{var l=null;":"===e[5]&&-1!==e.indexOf("xlink:")&&(l="http://www.w3.org/1999/xlink"),null!==l?r.setAttributeNS(l,e,t===!0?e:t):r.setAttribute(e,t===!0?e:t)}}}function b(n,r,o,l,i,a,u,d,f,c){if(i=e(u,i),t(r)){var s=o.props,v=o.state,p=o.state,h=o.getChildContext();h&&(c=V.extends({},c,h)),o.context=c;var m=o._updateComponent(v,p,s,i);m&&(M(n,m,d,null,f,c,!0,o),n.dom=m.dom,o._lastNode=m)}else{var y=!0;if(a&&a.componentShouldUpdate&&(y=a.componentShouldUpdate(n.dom,l,i)),y!==!1){a&&a.componentWillUpdate&&a.componentWillUpdate(n.dom,l,i);var g=r(i),k=n.dom;g.dom=k,M(o,g,k,null,f,c,!0,null),n.instance=g,a&&a.componentDidUpdate&&a.componentDidUpdate(n.dom,l,i)}}}function x(e,t,o,i,a,u,d,f){var c=e.length,s=t.length;if(c>s)for(var v=void 0;c!==s;){var p=e[c-1];l(p)||o.removeChild((v=p.dom)||v&&(v=v.previousSibling)||(v=o.lastChild)),c--}else if(s>c)for(var h=0;c!==s;){var m=t[c+h];if(l(m));else{var y=P(m,null,i,a,u,f);o.appendChild(y)}s--,h++}for(var k=void 0,C=0;s>C;C++){var b=e[C],w=t[C];if(b!==w)if(l(w))l(b)||(k=k||o.childNodes,k[C+d].textContent="");else if(l(b))if(r(w))k=k||o.childNodes,k[C+d].textContent=w;else{var N=P(w,null,i,a,u,f);o.replaceChild(N,o.childNodes[C])}else"object"===("undefined"==typeof w?"undefined":V.typeof(w))?n(w)?n(b)?x(b,w,o,i,a,u,C,f):x([b],w,o,i,a,u,C,f):g(b,w,o,i,a,u,f):(k=k||o.childNodes,k[C+d].textContent=w)}}function w(e,n,t,r,o,l,i,a){var u=!1,d=0,f=0,s=n.length,v=e.length,p=void 0;if(0===s&&v>=5){if(G)for(var h=0;v>h;h++)T(e[h]);return void(t.textContent="")}var y=s-1,g=v-1,k=v>0?e[f]:null,C=s>0?n[d]:null,b=void 0,x=void 0,w=void 0;e:for(;!u&&y>=d&&g>=f;){for(u=!0;C.key===k.key;){if(M(k,C,t,r,o,l,!0,a),d++,f++,d>y||f>g)break e;C=n[d],k=e[f],u=!1}for(b=n[y],x=e[g];b.key===x.key;){if(M(x,b,t,r,o,l,!0,a),y--,g--,d>y||f>g)break e;b=n[y],x=e[g],u=!1}for(;b.key===k.key;){if(w=s>y+1?n[y+1].dom:i,M(k,b,t,r,o,l,!0,a),c(t,b.dom,w),y--,f++,d>y||f>g)break e;b=n[y],k=e[f],u=!1}for(;C.key===x.key;){if(w=e[f].dom,M(x,C,t,r,o,l,!0,a),c(t,C.dom,w),d++,g--,d>y||f>g)break e;C=n[d],x=e[g],u=!1}}if(f>g){if(y>=d)for(w=s>y+1?n[y+1].dom:i;y>=d;d++)c(t,P(n[d],null,r,o,l,a),w)}else if(d>y)for(;g>=f;f++)p=e[f],m(p,t);else{for(var N={},j=f;g>=j;j++)p=e[j],N[p.key]=p;w=s>y+1?n[y+1]:null;for(var O=y;O>=d;O--){var U=n[O],S=U.key;p=N[S],void 0!==p?(N[S]=null,M(p,U,t,r,o,l,!0,a),w=w&&w.dom||i,c(t,U.dom,w),w=U):(w=w&&w.dom||i,c(t,P(U,null,r,o,l,a),w)),w=U}for(var _=f;g>=_;_++)p=e[_],null!==N[p.key]&&m(p,t)}}function N(e,t,i,a,u,d,f,c){var s=t.children,v=e.children;if(v!==s)if(l(v))r(s)?i.textContent=s:o(s)||"object"===("undefined"==typeof s?"undefined":V.typeof(s))&&(n(s)?D(s,i,a,u,d,c):P(s,i,a,u,d,c));else if(l(s))i.textContent="";else if(n(v))if(n(s)){var p=s.length&&s[0]&&!o(s[0].key)||v.length&&v[0]&&!o(v[0].key);p?w(v,s,i,a,u,d,null,c):x(v,s,i,a,u,d,null,c)}else x(v,[s],i,a,u,d,null,c);else n(s)?x([v],s,i,a,u,d,null,c):r(s)?i.textContent=s:M(v,s,i,a,u,d,f,c)}function j(e,n,t,r){e&&(isString(n)&&delete e.refs[n],e&&isString(t)&&(e.refs[t]=r))}function O(e,n,t,r){var l=n.attrs,i=e.attrs,a=o(l),u=o(i);if(!a)for(var d=Object.keys(l),f=d.length,c=0;f>c;c++){var s=d[c],v=!u&&i[s],p=l[s];v!==p&&("ref"===s?j(r,v,p,t):C(s,v,p,t,null===e.tag))}if(!u)for(var h=Object.keys(i),m=h.length,y=0;m>y;y++){var g=h[y];(a||o(l[g]))&&("ref"===g?j(r,i[g],null,t):t.removeAttribute(g))}}function U(e,n,t){var r=e.events;if(!o(r)){var l=n.events;if(!o(l))for(var i=Object.keys(r),a=(Object.keys(l),0);a<i.length;a++){var u=i[a];!l[u]}}}function M(e,n,l,a,u,d,f,c){if(n!==!1&&null!==n){if(!o(n.then))return void n.then(function(n){M(e,n,l,a,u,d,f,c)});if(r(e))return void(r(n)?l.firstChild.nodeValue=n:p(e,n,l,a,u,d,c));var s=n.tag||(f&&!o(n.tpl)?n.tpl.tag:null),v=e.tag||(f&&!o(e.tpl)?e.tpl.tag:null),h=(n.events,n.hooks);if(o(h)||o(h.willUpdate)||h.willUpdate(e.dom),a=a||"svg"===s?F:"math"===s?z:null,v!==s)return void(i(v)&&!i(s)?t(v)?M(e.instance._lastNode,n,l,a,u,d,!0,c):M(e.instance,n,l,a,u,d,!0,c):p(e,n,l,a,u,d,c));if(o(v))return void(n.dom=e.dom);if(i(v)&&i(s))return n.instance=e.instance,n.dom=e.dom,void b(n,n.tag,n.instance,e.attrs||{},n.attrs||{},n.hooks,n.children,l,u,d);var m=e.dom;n.dom=m,N(e,n,m,a,u,d,f,c);var y=n.className,g=n.style;e.className!==y&&(o(y)?m.removeAttribute("class"):m.className=y),e.style!==g&&k(e.style,g,m),O(e,n,m,c),U(e,n,m),o(h)||o(h.didUpdate)||h.didUpdate(m)}}function S(e,n,t){var r=e.tpl;if(!o(r)){var l=e.key,i=void 0;if(null!==l){var a=r.pools.keyed[l];i=a&&a.pop()}else{var u=r.pools.nonKeyed;i=u&&u.pop()}if(i)return M(i,e,null,null,n,t,!0),e.dom}}function T(e){var n=e.tpl;if(!o(n)){var t=e.key,r=n.pools;if(null===t){var l=r.nonKeyed;l&&l.push(e)}else{var i=r.keyed;(i[t]||(i[t]=[])).push(e)}}}function _(e,n,t){if(J[e]){var r=J[e];r.push({callback:t,target:n})}else document.addEventListener(e,function(n){for(var t=J[e],r=t.length-1;r>-1;r--){var o=t[r];o.target===n.target&&o.callback(n)}},!1),J[e]=[]}function D(e,t,o,l,i,a){if(n(e))for(var u=0;u<e.length;u++){var d=e[u];r(d)?v(d,t,!1):d&&n(d)?D(d,t,o,l,i,a):f(d)?!function(){var e=document.createTextNode("");d.then(function(n){var r=P(n,null,o,l,i,a);t.replaceChild(r,e)}),t.appendChild(e)}():P(d,t,o,l,i,a)}else r(e)?v(e,t,!0):f(e)?!function(){var n=document.createTextNode("");e.then(function(e){var r=P(e,null,o,l,i,a);t.replaceChild(r,n)}),t.appendChild(n)}():P(e,t,o,l,i,a)}function W(e,n,t){e&&u(n)&&(e.refs[n]=t)}function A(n,r,l,i,a,u,d,f){l=e(a,l);var c=void 0;if(t(r)){var s=new r(l);s._diffNodes=M;var v=s.getChildContext();o(v)||(f=V.extends({},f,v)),s.context=f,s.componentWillMount();var p=s.render();return o(p)||(c=P(p,null,null,d,f,s),s._lastNode=p,null!==u&&u.appendChild(c),d.addListener(s.componentDidMount)),n.dom=c,n.instance=s,c}o(i)||(i.componentWillMount&&i.componentWillMount(null,l),i.componentDidMount&&d.addListener(function(){i.componentDidMount(c,l)}));var h=r(l);return c=P(h,null,null,d,f,null),n.instance=h,null!==u&&u.appendChild(c),n.dom=c,c}function E(e,n){for(var t=Object.keys(e),r=0;r<t.length;r++){var o=t[r];u(o)&&_(o,n,e[o])}}function L(e,n){var t=document.createTextNode("");return null!==n&&n.appendChild(t),e&&(e.dom=t),t}function P(e,t,a,d,f,c){var v=void 0;if(l(e)||n(e))return L(e,t);if(r(e))return v=document.createTextNode(e),null!==t&&t.appendChild(v),v;if(G&&(v=S(e,d,f)))return t&&t.appendChild(v),v;var p=e.tpl,h=e.tag;if(null===h)return L(e,t);if(i(h))return A(e,h,e.attrs||{},e.hooks,e.children,t,d,f);if(a=a||"svg"===h?F:"math"===h?z:null,!o(p)&&p.dom)v=p.dom.cloneNode(!0);else{if(!u(h))throw Error("Inferno Error: Expected function or string for element tag type");v=s(h,a)}var m=e.children,y=e.attrs,g=e.events,C=e.hooks,b=e.className,x=e.style;return o(C)||(C.created&&C.created(v),C.attached&&d.addListener(function(){C.attached(v)})),o(g)||E(g,v),l(m)||D(m,v,a,d,f,c),o(y)||I(y,v,c),o(b)||(v.className=b),o(x)||k(null,x,v),e.dom=v,null!==t&&t.appendChild(v),v}function I(e,n,t){for(var r=Object.keys(e),o=0;o<r.length;o++){var l=r[o];"ref"===l?W(t,e[l],n):C(l,null,e[l],n)}}function K(e){for(var n=0;n<Q.length;n++){var t=Q[n];if(t.dom===e)return t}return null}function B(e){for(var n=0;n<Q.length;n++){var t=Q[n];if(t===e)return Q.splice(n,1),!0}return!1}function H(e,n){var t=K(n),r=new q;o(t)?(P(e,n,null,r,{},null),r.trigger(),Q.push({node:e,dom:n})):(g(t.node,e,n,null,r,{},null),r.trigger(),null===e&&B(t),t.node=e)}var V={};V.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},V.classCallCheck=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},V.createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),V.extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};var q=function(){function e(){V.classCallCheck(this,e),this._listeners=[]}return V.createClass(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"trigger",value:function(){for(var e=0;e<this._listeners.length;e++)this._listeners[e]()}}]),e}(),z="http://www.w3.org/1998/Math/MathML",F="http://www.w3.org/2000/svg",G=!0,J={},Q=[],R={render:H};return R});