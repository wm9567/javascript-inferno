!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e){return e instanceof Array}function n(e){return i(e)||l(e)}function t(e){return a(e)||u(e)}function r(e){return u(e)||e===!1||f(e)||a(e)}function o(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function i(e){return"string"==typeof e}function l(e){return"number"==typeof e}function u(e){return null===e}function f(e){return e===!0}function a(e){return void 0===e}function c(e){throw e||(e=U),new Error("Inferno Error: "+e)}function s(e){return e.type===J.TEMPLATE}function d(e){return e.type===J.TEXT}function p(e,n,t,r,o,i){e!==n&&(s(n)?s(e)&&h(e,n,t,r,o,i):d(n)?d(e)&&m(e,n):c())}function v(t,o,i,l,u,f){if(r(o))r(t)||S(i,t,l);else if(r(t))n(o)?D(i,o):r(o)||(e(o)?mountArrayChildrenWithoutType(o,i,l,u,f):K(o,i,l,u,f));else if(n(o))n(t)?L(i,o):D(i,o);else if(n(t)){var a=A(t);a.dom=i.firstChild,v(a,o,i,l,u,f)}else e(o)?e(t)?(o.complex=t.complex,P(t,o)?g(t,o,i,l,u,f,null):k(t,o,i,l,u,f,null)):k([t],o,i,l,u,f,null):e(t)?k(t,[o],i,l,u,f,null):p(t,o,i,l,u,f)}function m(e,n){var t=n.text,r=e.dom;n.dom=r,e.text!==t&&(r.nodeValue=t)}function h(e,n,t,r,o,i){var l=e.dom,u=e.bp,f=n.bp;if(n.dom=l,u!==f){var c=W(n,null,r,o,i);T(t,c,l),C(e,null,r,!0)}else{var s=n.v0,d=n.v1;n.v2,n.v3;if(!a(s)){var p=e.v0;if(p!==s&&y(f.v0,p,s,l,r,o,i),!a(d)){var v=e.v1;v!==d&&y(f.v1,v,d,l,r,o,i)}}}}function y(e,n,r,o,i,l,u){switch(e){case Q.CHILDREN_KEYED:g(n,r,o,i,l,u,null);break;case Q.CHILDREN_NON_KEYED:k(n,r,o,i,l,u,null);break;case Q.CHILDREN_TEXT:L(o,r);break;case Q.CHILDREN_NODE:p(n,r,o,i,l,u);break;case Q.PROPS_CLASS_NAME:t(r)?o.removeAttribute("class"):o.className=r}}function k(e,n,t,r,o,i,l){for(var u=e.length,f=n.length,a=u>f?f:u,c=0;c<a;c++){var s=e[c],d=R(n,c);p(s,d,t,r,o,i)}if(u<f)for(c=a;c<f;c++){var v=R(n,c);O(t,K(v,null,r,o,i),l&&l.pointer)}else if(u>f)for(c=a;c<u;c++)C(e[c],t,r)}function g(e,n,t,r,o,i,l){var f,c,s,d,v,m=e.length,h=n.length,y=m-1,k=h-1,g=0,b=0,N=e[g],x=n[b],_=e[y],w=n[k],D=null,L=null;if(0===m)return void(0!==h&&G(n,t,r,o,i));if(0===h)return void(0!==m&&S(t,e,r));e:for(;;){for(;N.key===x.key;){if(p(N,x,t,r,o,i),g++,b++,g>y||b>k)break e;N=e[g],x=n[b]}for(;_.key===w.key;){if(p(_,w,t,r,o,i),y--,k--,g>y||b>k)break e;_=e[y],w=n[k]}if(_.key!==x.key){if(N.key!==w.key)break;if(p(N,w,t,r,o,i),d=k+1,s=d<n.length?n[d].dom:l&&l.pointer,O(t,w.dom,s),g++,k--,g>y||b>k)break;N=e[g],w=n[k]}else{if(p(_,x,t,r,o,i),O(t,x.dom,N.dom),y--,b++,g>y||b>k)break;_=e[y],x=n[b]}}if(g>y){if(b<=k)for(d=k+1,s=d<n.length?n[d].dom:l&&l.pointer;b<=k;)O(t,K(n[b++],null,r,o,i),s)}else if(b>k)for(;g<=y;)C(e[g++],t,r);else{m=y-g+1,h=k-b+1;var I=e,T=new Array(h);for(f=0;f<h;f++)T[f]=-1;var A=!1,R=0,H=0;if(h<=4||m*h<=16){for(f=g;f<=y;f++)if(D=e[f],H<h)for(c=b;c<=k;c++)if(L=n[c],D.key===L.key){T[c-b]=f,R>c?A=!0:R=c,p(D,L,t,r,o,i,!1),H++,I[f]=null;break}}else{var M=new Map;for(f=b;f<=k;f++)v=n[f],M.set(v.key,f);for(f=g;f<=y;f++)D=e[f],H<h&&(c=M.get(D.key),a(c)||(L=n[c],T[c-b]=f,R>c?A=!0:R=c,p(D,L,t,r,o,i,!1),H++,I[f]=null))}if(m===e.length&&0===H)for(S(t,e,r);b<h;)O(t,K(n[b++],null,r,o,i),null);else{for(f=m-H;f>0;)D=I[g++],u(D)||(C(D,t,r),f--);if(A){var P=E(T);for(c=P.length-1,f=h-1;f>=0;f--)T[f]===-1?(R=f+b,v=n[R],d=R+1,s=d<n.length?n[d].dom:l&&l.pointer,O(t,K(v,t,r,o,i),s)):c<0||f!==P[c]?(R=f+b,v=n[R],d=R+1,s=d<n.length?n[d].dom:l&&l.pointer,O(t,v.dom,s)):c--}else if(H!==h)for(f=h-1;f>=0;f--)T[f]===-1&&(R=f+b,v=n[R],d=R+1,s=d<n.length?n[d].dom:l&&l.pointer,O(t,K(v,null,r,o,i),s))}}}function E(e){var n=e.slice(0),t=[];t.push(0);var r,o,i,l,u;for(r=0;r<e.length;r++)if(e[r]!==-1)if(o=t[t.length-1],e[o]<e[r])n[r]=o,t.push(r);else{for(i=0,l=t.length-1;i<l;)u=(i+l)/2|0,e[t[u]]<e[r]?i=u+1:l=u;e[r]<e[t[i]]&&(i>0&&(n[r]=t[i-1]),t[i]=r)}for(i=t.length,l=t[i-1];i-- >0;)t[i]=l,l=n[l];return t}function b(e,n,r,i){if(te[e])i[e]=t(r)?"":r;else if(re[e])i[e]=!!r;else if(n!==r){if(t(r))return i.removeAttribute(e),!1;if("className"===e)return i.className=r,!1;if("style"===e)patchStyle(n,r,i);else{if("defaultChecked"===e)return u(n)&&i.addAttribute("checked"),!1;if("defaultValue"===e)return u(n)&&i.setAttribute("value",r),!1;if(o(e))i[e.toLowerCase()]=r;else if("dangerouslySetInnerHTML"===e){var l=n&&n.__html,f=r&&r.__html;t(f)&&c(),l!==f&&(i.innerHTML=f)}else if("childrenType"!==e&&"ref"!==e&&"key"!==e){var a=oe[e];return a?i.setAttributeNS(a,e,r):i.setAttribute(e,r),!1}}}return!0}function N(e,n,t,r){var o=e.bp,i=e.key,l=null===i?o.pools.nonKeyed:o.pools.keyed.get(i);if(!a(l)){var u=l.pop();if(!a(u))return h(u,e,null,n,t,r),e.dom}return null}function x(e){var n=e.bp,t=e.key,r=n.pools;if(u(t))r.nonKeyed.push(e);else{var o=r.keyed.get(t);a(o)&&(o=[],r.keyed.set(t,o)),o.push(e)}}function C(e,n,t,o){r(e)||s(e)&&_(e,n,t,o)}function _(e,n,t,r){u(n)||n.removeChild(e.dom),Z&&(n||r)&&x(e)}function w(e,n,t){e.split(",").forEach(function(e){return n[e]=t})}function D(e,n){""!==n?e.textContent=n:e.appendChild(document.createTextNode(""))}function L(e,n){e.firstChild.nodeValue=n}function I(e,n){e.appendChild(n)}function O(e,n,r){t(r)?I(e,n):e.insertBefore(n,r)}function T(e,n,t){e.replaceChild(n,t)}function A(t){return n(t)||r(t)||e(t),t}function R(e,n){var t=e[n];return e[n]=A(t)}function H(){return document.activeElement}function S(e,n,t){e.textContent="";for(var o=0;o<n.length;o++){var i=n[o];r(i)||C(i,null,t,!0)}}function M(e){null!==e&&e!==document.body&&document.activeElement!==e&&e.focus()}function P(e,n){return!e.complex&&(n.length&&!t(n[0])&&!t(n[0].key)&&e.length&&!t(e[0])&&!t(e[0].key))}function K(e,n,t,r,o){return s(e)?W(e,n,t,r,o):d(e)?Y(e,n):void 0}function X(e,n){var t=e.static,r=t.tag,o=document.createElement(r),i=t.props;for(var l in i)b(l,null,i[l],o);return e.clone=o,o.cloneNode(!0)}function Y(e,n){var t=document.createTextNode(e.text);return e.dom=t,u(n)||I(n,t),t}function W(e,n,t,r,o){var i=e.bp,l=null;if(Z&&(l=N(e,t,r,o)),u(l)){l=i.clone&&i.clone.cloneNode(!0)||X(i,o);var f=e.v0,c=e.v1;e.v2,e.v3;e.dom=l,a(f)||(z(i.v0,f,l,t,r,o),a(c)||z(i.v1,c,l,t,r,o))}return u(n)||n.appendChild(l),l}function z(e,n,r,o,i,l){switch(e){case Q.CHILDREN_KEYED:case Q.CHILDREN_NON_KEYED:G(n,r,o,i,l);break;case Q.CHILDREN_TEXT:D(r,n);break;case Q.CHILDREN_NODE:K(n,r,o,i,l);break;case Q.PROPS_CLASS_NAME:t(n)||(r.className=n)}}function G(e,n,t,r,o){for(var i=0;i<e.length;i++)K(e[i],n,t,r,o)}function V(t,o,i,l,u){e(t)||(n(t)?D(o,t):r(t)||K(t,o,i,l,u))}function F(e){return ue.get(e)||null}function j(e,n){var t=le.get(n),o=new q;if(fe===n&&c(),e!==B)if(a(t))r(e)||(V(e,n,o,{},!1),o.trigger(),le.set(n,{input:e}));else{var i=H();u(e)?(C(t.input,n,o,!0),le.delete(n)):v(t.input,e,n,o,{},!1),o.trigger(),t.input=e,M(i)}}var q=function(){this._listeners=[]};q.prototype.addListener=function(e){this._listeners.push(e)},q.prototype.trigger=function(){for(var e=this,n=0;n<this._listeners.length;n++)e._listeners[n]()};var B="$NO_OP",U="a runtime error occured! Use Inferno in development environment to find the error.",$="undefined"!=typeof window&&window.document,J={TEMPLATE:1,TEXT:2},Q={CHILDREN_KEYED:1,CHILDREN_NON_KEYED:2,CHILDREN_TEXT:3,CHILDREN_NODE:4,PROPS_CLASS_NAME:5},Z=!0,ee="http://www.w3.org/1999/xlink",ne="http://www.w3.org/XML/1998/namespace",te={},re={},oe={},ie={};w("xlink:href,xlink:arcrole,xlink:actuate,xlink:role,xlink:titlef,xlink:type",oe,ee),w("xml:base,xml:lang,xml:space",oe,ne),w("volume,value",te,!0),w("muted,scoped,loop,open,checked,default,capture,disabled,selected,readonly,multiple,required,autoplay,controls,seamless,reversed,allowfullscreen,novalidate",re,!0),w("animationIterationCount,borderImageOutset,borderImageSlice,borderImageWidth,boxFlex,boxFlexGroup,boxOrdinalGroup,columnCount,flex,flexGrow,flexPositive,flexShrink,flexNegative,flexOrder,gridRow,gridColumn,fontWeight,lineClamp,lineHeight,opacity,order,orphans,tabSize,widows,zIndex,zoom,fillOpacity,floodOpacity,stopOpacity,strokeDasharray,strokeDashoffset,strokeMiterlimit,strokeOpacity,strokeWidth,",ie,!0);var le=new Map,ue=new Map,fe=$?document.body:null,ae={render:j,findDOMNode:F,mount:K,patch:p,unmount:C};return ae});