!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.InfernoDOM=e()}(this,function(){"use strict";function n(n){return n instanceof Array}function e(n){return a(n._isStateful)}function t(n){return i(n)||l(n)}function o(n){return f(n)||u(n)}function r(n){return u(n)||n===!1||a(n)||f(n)}function i(n){return"string"==typeof n}function l(n){return"number"==typeof n}function u(n){return null===n}function a(n){return n===!0}function f(n){return void 0===n}function c(n){return!1}function d(n){this._type=Jn.TEXT,this._text=n,this._dom=null}function s(){this._type=Jn.PLACEHOLDER,this._dom=null}function p(n){this._type=Jn.FRAGMENT,this._dom=null,this._pointer=null,this._items=n}function _(n,e,t,o){this._keyIndex=n,this._schema=null,this.mount=e,this.patch=t,this.unmount=o}function m(n,e,t,o){return new _(n,e,t,o)}function h(n){return new d(n)}function v(){return new s}function g(n){return new p(n)}function w(n){return n._type===Jn.TEXT}function y(n){return n._type===Jn.VARIABLE}function E(n){return n._type===Jn.PLACEHOLDER}function x(n){return n._type===Jn.FRAGMENT}function C(n){return n._type===Jn.ELEMENT}function k(n){return n._type===Jn.TEMPLATE}function T(n){return n._type===Jn.COMPONENT}function b(n,e,t){k(n)?N(n,e):x(n)?O(n,e,!0):C(n)?A(n,e):T(n)&&I(n,e)}function N(n,e){var t=n._dom,o=n._tr;o.unmount(n),u(e)||G(e,t)}function O(n,e,t){var o=n._items,r=o.length,i=o._pointer;if(r>0)for(var l=0;r>l;l++){var u=o[l];x(u)?O(u,e,!0):(e&&G(e,u._dom),b(u,null))}e&&t&&G(e,i)}function I(n,e){var t=n._instance,r=null,i=null;o(t)||(r=t._hooks,i=t._children,void 0!==t.render&&(t.componentWillUnmount(),t._unmounted=!0,ce.delete(t),b(t._lastInput,null)));var l=n._hooks||r;o(l)||o(l.onComponentWillUnmount)||l.onComponentWillUnmount(n._dom,l)}function A(e,t){var r=e._hooks,i=e._dom;o(r)||o(r.onWillDetach)||r.onWillDetach(e._dom);var l=e._children;if(!o(l))if(n(l))for(var u=0;u<l.length;u++)b(l[u],null);else b(l,null);t&&G(t,i)}function M(n,e){return function(n){}}function D(n,e,t){n.split(",").forEach(function(n){return e[n]=t})}function L(n){var e=document.createElement(n),t={};for(var o in e)t[o]=!0;return oe.set(n,t),t}function S(n,e){""!==e?n.textContent=e:n.appendChild(document.createTextNode(""))}function W(n,e,o){t(e)?n.firstChild.nodeValue=o:n.textContent=o}function U(n,e){var t=oe.get(n);return f(t)&&(t=L(n)),t[e]}function X(n,e,t){o(t)?n.appendChild(e):n.insertBefore(e,t)}function P(n,e,t){var o=e._pointer;O(e,n,!1),V(n,t,o)}function R(n,e){var t;return t=e===!0?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n)}function Y(n,e,t,r,i,l){var u=null,a=n._lastInput;o(a)||(u=n,n=a),b(n,!1);var f=nn(e,null,r,i,l);e._dom=f,V(t,f,n._dom),null!==u&&(u._lasInput=e)}function V(n,e,t){n.replaceChild(e,t)}function j(e){return t(e)?h(e):r(e)?v():n(e)?g(e):e}function F(n,e){var t=n[e];return n[e]=j(t)}function G(n,e){n.removeChild(e)}function B(){return document.activeElement}function H(n,e){if(Hn){var t=e.length;if(t>5)for(var o=0;t>o;o++){var i=e[o];r(i)||c(i)}}n.textContent=""}function K(n){null!==n&&n!==document.body&&document.activeElement!==n&&n.focus()}function z(n,e){return n.complex?!1:e.length&&!o(e[0])&&!o(e[0]._key)&&n.length&&!o(n[0])&&!o(n[0]._key)}function q(n,e){if("option"===n._tag){var t=n._props&&n._props.value;e[t]?(n._props=n._props||{},n._props.selected=!0,n._dom.selected=!0):n._dom.selected=!1}else for(var o=0,r=n._children.length;r>o;o++)q(n._children[o],e)}function J(e){var t=e._props&&e._props.value,o={};if(n(t))for(var r=0,i=t.length;i>r;r++)o[t[r]]=t[r];else o[t]=t;for(var l=0,u=e._children.length;u>l;l++)q(e._children[l],o);e._props&&e._props[t]&&delete e._props.value}function Q(n,e,t){o(n.onCreated)||n.onCreated(t),o(n.onAttached)||e.addListener(function(){n.onAttached(t)})}function Z(n){var e=n.attrs.value;o(e)||(n._dom.value=e)}function $(n,e){if("input"===n){var t=e.attrs.type;if("text"===t)Z(e);else if("checkbox"===t||"radio"===t){var o=e.attrs.checked;e._dom.checked=!!o}}else"textarea"===n&&Z(e)}function nn(n,e,t,o,r){if(k(n))return en(n,e,t,o,r);if(E(n))return ln(n,e);if(w(n))return rn(n,e);if(x(n))return on(n,e,t,o,r);if(C(n))return tn(n,e,t,o,r);if(T(n))return fn(n,e,t,o,r);throw Error("Inferno Error: Bad input argument called on mount(). Input argument may need normalising.")}function en(n,e,t,o,r){var i=n._tr,l=i.mount(n,null,t,o,r);return n._dom=l,u(e)||e.appendChild(l),l}function tn(n,e,t,r,l){var a=n._tag;if(!i(a))throw new Error("Inferno Error: expects VElement to have a string as the tag name");"svg"===a&&(l=!0);var f=R(a,l),c=n._children,d=n._props,s=n._hooks;return n._dom=f,o(s)||Q(s,t,f),o(c)||an(n._childrenType,c,f,t,r,l),o(d)||(un(n),cn(n,d,f)),u(e)||e.appendChild(f),f}function on(n,e,t,o,r){var i=n._items,l=document.createTextNode(""),u=document.createDocumentFragment();return mountArrayChildren(i,u,t,o,r),n._pointer=l,n._dom=u,u.appendChild(l),e&&X(e,u),u}function rn(n,e){var t=document.createTextNode(n._text);return n._dom=t,e&&X(e,t),t}function ln(n,e){var t=document.createTextNode("");return n._dom=t,e&&X(e,t),t}function un(n){"select"===n.tag&&J(n)}function an(n,e,t,o,r,i){if(n===Kn.KEYED_LIST)for(var l=0;l<e.length;l++)nn(e[l],t,o,r,i);else n===Kn.TEXT&&S(t,e)}function fn(n,t,i,l,u){var a,f=n._component,c=n._props,d=n._hooks;if(e(n)){var s=new f(c,l);s._patch=pn,s._componentToDOMNodeMap=ce;var p=s.getChildContext();o(p)||(l=Object.assign({},l,p)),s._unmounted=!1,s._pendingSetState=!0,s.componentWillMount();var _=s.render();r(_)&&(_=v()),s._pendingSetState=!1,a=nn(_,null,i,l,!1),s._lastInput=_,s.componentDidMount(),null===t||r(a)||t.appendChild(a),ce.set(s,a),n._dom=a,n._instance=s}else{o(d)||(o(d.onComponentWillMount)||d.onComponentWillMount(null,c),o(d.onComponentDidMount)||i.addListener(function(){d.onComponentDidMount(a,c)}));var m=f(c,l);r(m)&&(node=v()),a=nn(m,null,i,l,null,!1),n._instance=m,null===t||r(a)||t.appendChild(a),n._dom=a}return a}function cn(n,e,t){for(var r in e){var i=e[r];if(!o(i))if("style"===r)yn(null,i,t);else if(U(n._tag,r))t[r]=i;else{var l=ee[r];l?t.setAttributeNS(l,r,i):t.setAttribute(r,i)}}}function dn(n,e,t,o){var r=n._arg;return function(n,i,l,u,a){var f=n.read(r);return t?an(o,f,i,l,u,a||e):nn(f,i,l,u,a||e)}}function sn(n,e,t){return function(e,o,r,i){var l=n.cloneNode(t);return u(o)||appendChild(o,l),l}}function pn(n,e,t,o,r,i){if(n!==e)if(k(e))k(n)&&hn(n,e,t,o,r,i);else if(k(n));else if(T(e))T(n)?En(n,e,t,o,r,i):(V(t,fn(e,null,o,r,i),n._dom),b(n,null));else if(T(n));else if(x(e))x(n)?xn(n,e,t,o,r,i):(V(t,on(e,null),n._dom),b(n,null));else if(C(e))C(n)?vn(n,e,t,o,r,i):(V(t,nn(e,null,o,r,i),n._dom),b(n,null));else if(C(n))V(t,nn(e,null,o,r,i),n._dom),b(n,null);else if(x(n))P(t,n,nn(e,null,o,r,i));else if(E(e))E(n)?kn(n,e):(V(t,ln(e,null),n._dom),b(n,null));else if(E(n))V(t,nn(e,null,o,r,i),n._dom);else if(w(e))w(n)?Tn(n,e):(V(t,rn(e,null),n._dom),b(n,null));else{if(!w(n))throw Error("Inferno Error: Bad input argument called on patch(). Input argument may need normalising.");V(t,nn(e,null,o,r,i),n._dom)}}function _n(n,e,t,o,r,i,l){n===Kn.KEYED_LIST?bn(e,t,o,r,i,l,null):n===Kn.TEXT&&W(o,e,t)}function mn(e,o,i,l,u,a){r(o)?H(i,e):r(e)?t(o)?W(i,e,o):r(o)||(n(o)?mountChildren(o,i,l,u,a):nn(o,i,l,u,a)):n(o)?n(e)?(o.complex=e.complex,z(e,o)?bn(e,o,i,l,u,a,null):Cn(e,o,i,l,u,a,null)):Cn([e],o,i,l,u,a,null):n(e)?Cn(e,[o],i,l,u,a,null):pn(e,o,i,l,u,a)}function hn(n,e,t,o,r,i){var l=n._dom,u=n._tr,a=e._tr;u!==a||(e._dom=l,a.patch(n,e,o,r,i))}function vn(n,e,t,r,i,l){var u=e._hooks,a=!o(u);a&&!o(u.onWillUpdate)&&u.onWillUpdate(n._dom);var f=e._tag,c=n._tag;if("svg"===f&&(l=!0),c!==f)Y(n,e,t,r,i,l);else{var d=n._dom,s=n._props,p=e._props,_=n._children,m=e._children;if(e._dom=d,_!==m){var h=n._childrenType,v=e._childrenType;h===v?_n(h,_,m,d,r,i,l):mn(_,m,d,r,i,l)}s!==p&&gn(n,e,s,p,d),a&&!o(u.onDidUpdate)&&u.onDidUpdate(d),$(f,e)}}function gn(n,e,t,r,i){var l=e._tag;t=t||{},r=r||{},"select"===n._tag&&J(e);for(var u in r){var a=r[u],c=t[u];if(c!==a)if(o(a))wn(l,u,i);else if("style"===u)yn(c,a,i);else if(U(l,u))i[u]=a;else{var d=ee[u];d?i.setAttributeNS(d,u,a):i.setAttribute(u,a)}}for(var s in t)f(r[s])&&wn(l,s,i)}function wn(n,e,t){"className"===e?t.removeAttribute("class"):"id"===e?t.removeAttribute("id"):U(n,e)?t[e]=null:t.removeAttribute(e)}function yn(n,e,t){if(i(e))t.style.cssText=e;else if(o(n)){if(!o(e))for(var r=Object.keys(e),u=0;u<r.length;u++){var a=r[u],f=e[a];l(f)&&!te[a]?t.style[a]=f+"px":t.style[a]=f}}else if(o(e))t.removeAttribute("style");else{for(var c=Object.keys(e),d=0;d<c.length;d++){var s=c[d],p=e[s];l(p)&&!te[s]?t.style[s]=p+"px":t.style[s]=p}for(var _=Object.keys(n),m=0;m<_.length;m++){var h=_[m];o(e[h])&&(t.style[h]="")}}}function En(n,t,i,l,u,a){var f=n._component,c=t._component,d=t._props||{};if(f!==c)Y(n,t,i,l,u,a);else if(e(t)){var s=(n._dom,n._instance),p=s.props,_=s.state,m=s.state,h=s.getChildContext();t._instance=s,s.context=u,o(h)||(u=Object.assign({},u,h));var g=s._updateComponent(_,m,p,d);g===Gn?g=s._lastInput:o(g)&&(g=v()),pn(s._lastInput,g,i,l,u,null,!1),s._lastInput=g,s.componentDidUpdate(p,_),t._dom=g._dom,ce.set(s,g._dom)}else{var w=!0,y=n._props,E=t._hooks,x=!o(E);if(x&&!o(E.onComponentShouldUpdate)&&(w=E.onComponentShouldUpdate(n._dom,y,d)),w!==!1){x&&!o(E.onComponentWillUpdate)&&E.onComponentWillUpdate(n._dom,y,d);var C=c(d,u),k=n._instance;r(C)&&(C=v()),t._dom=n._dom,pn(k,C,i,l,u,null,null,!1),t._instance=C,x&&!o(E.onComponentDidUpdate)&&E.onComponentDidUpdate(k._dom,y,d)}}}function xn(n,e,t,o,r,i){var l=n._items,u=e._items,a=n._pointer;e._dom=n._dom,e._pointer=a,!l!==u&&(z(l,u)?bn(l,u,t,o,r,i,e):Cn(l,u,t,o,r,i,e))}function Cn(n,e,t,o,r,i,l){for(var u=n.length,a=e.length,f=u>a?a:u,c=0;f>c;c++){var d=n[c],s=F(e,c);pn(d,s,t,o,r,i)}if(a>u)for(c=f;a>c;c++){var p=F(e,c);X(t,nn(p,null,o,r,i),l&&l.pointer)}else if(u>a)for(c=f;u>c;c++)b(n[c],t)}function kn(n,e){e._dom=n._dom}function Tn(n,e){var t=e._text,o=n._dom;e._dom=o,n.text!==t&&(o.nodeValue=t)}function bn(n,e,t,o,r,i,l){for(var u,a=n.length,f=e.length,c=a-1,d=f-1,s=0,p=0,_=null,m=null,h=null,v=null;c>=s&&d>=p&&(m=e[p],_=n[s],m._key===_._key);)pn(_,m,t,o,r,i,!1),p++,s++;for(;c>=s&&d>=p&&(h=e[d],v=n[c],h._key===v._key);)pn(v,h,t,o,r,i,!1),d--,c--;for(;c>=s&&d>=p&&(h=e[d],_=n[s],h._key===_._key);)u=f>d+1?e[d+1]._dom:null,pn(_,h,t,o,r,i,!1),X(t,h._dom,u),d--,s++;for(;c>=s&&d>=p&&(m=e[p],v=n[c],m._key===v._key);)u=n[s]._dom,pn(v,m,t,o,r,i,!1),X(t,m._dom,u),p++,c--;if(s>c){if(d>=p)for(u=f>d+1?e[d+1]._dom:l&&l.pointer;d>=p;p++)X(t,nn(e[p],null,o,r,i),u)}else if(p>d)for(;c>=s;)b(n[s++],t);else{var g,w=c-s+1,y=d-p+1,E=new Array(y);for(g=0;y>g;g++)E[g]=-1;var x,C=!1,k=0,T=0;if(16>=w*y)for(g=s;c>=g;g++){var N=!0;for(v=n[g],x=p;d>=x;x++)if(h=e[x],v._key===h._key){E[x-p]=g,T>x?C=!0:T=x,pn(v,h,t,o,r,i,!1),N=!1;break}N&&(b(v,t),k++)}else{var O=new Map;for(g=p;d>=g;g++)O.set(e[g]._key,g);for(g=c;g>=s;g--)v=n[g],x=O.get(v._key),void 0===x?(b(v,t),k++):(h=e[x],E[x-p]=g,T>x?C=!0:T=x,pn(v,h,t,o,r,i,!1))}var I;if(C){var A=Nn(E);for(x=A.length-1,g=y-1;g>=0;g--)-1===E[g]?(I=g+p,u=f>I+1?e[I+1]._dom:l&&l.pointer,X(t,nn(e[I],null,o,r,i),u)):0>x||g!==A[x]?(I=g+p,u=f>I+1?e[I+1]._dom:l&&l.pointer,X(t,e[I]._dom,u)):x--}else if(w-k!==y)for(g=y-1;g>=0;g--)-1===E[g]&&(I=g+p,u=f>I+1?e[I+1]._dom:l&&l.pointer,X(t,nn(e[I],null,o,r,i),u))}}function Nn(n){var e=n.slice(0),t=[];t.push(0);var o,r,i,l,u;for(o=0;o<n.length;o++)if(-1!==n[o])if(r=t[t.length-1],n[r]<n[o])e[o]=r,t.push(o);else{for(i=0,l=t.length-1;l>i;)u=(i+l)/2|0,n[t[u]]<n[o]?i=u+1:l=u;n[o]<n[t[i]]&&(i>0&&(e[o]=t[i-1]),t[i]=o)}for(i=t.length,l=t[i-1];i-- >0;)t[i]=l,l=e[l];return t}function On(n,e,t,o){var r=n._arg;return function(n,i,l,u,a,f){var c=n.read(r),d=i.read(r);t?_n(o,c,d,l,u,a,f||e):pn(c,d,l,u,a,f||e)}}function In(){this._listeners=[],this.scrollX=null,this.scrollY=null,this.screenHeight=ie,this.screenWidth=re}function An(n,e,t){}function Mn(n){return ce.get(n)||null}function Dn(n,e){var t=fe.get(e),o=new In;if(f(t))r(n)||(An(n,e,o)||nn(n,e,o,{},!1),o.trigger(),fe.set(e,{input:n}));else{var i=B();u(n)?(b(t.input,e),fe.delete(e)):pn(t.input,n,e,o,{},!1),o.trigger(),t.input=n,K(i)}}function Ln(n,e,t){var o=n.read(t);return e.write(t,o),o}function Sn(n){return function(e,t){return Ln(e,t,n)}}function Wn(e,o,i,l,a,f,c){if(!r(e)){var d,s,p,_=zn,h=o?qn:zn,v=!1;if(y(e))d=dn(e,a,f,c),s=On(e,a,f,c),p=M(e,f,c);else if(C(e)){var g=[],w=[],E=[],x=e._tag;"svg"===x&&(a=!0);var k=R(x,a),b=e._key;!u(b)&&y(b)&&(_=b._arg);e._props,e._hooks;w.length>0&&h===zn&&(h=i.length++);var N=e._children;if(!r(N))if(t(N));else if(n(N));else{var O=Wn(N,!1,i,k,a,!0,e._childrenType);if(!r(O)){g.push(O.mount);var I=O.patch,A=O.unmount;u(I)||w.push(I),u(A)||E.push(A)}}d=Un(h,sn(k,o,v),g),s=Rn(h,w),p=jn(h,E)}else if(T(e))throw new Error("Inferno Error: templates cannot contain VComponent nodes. Pass a VComponent node into a template as a variable instead.");return m(_,d,s,p)}}function Un(n,e,t){return n===zn&&0===t.length?e:t.length<=5?Xn(n,e,t[0],t[1],t[2],t[3]):Pn(n,e,t)}function Xn(n,e,t,o,r,i){var l=n!==zn;return function(u,a,f,c,d){var s=e(u,a,f,c,d);return l&&u.write(n,s),t&&(t(u,s,f,c,d),o&&(o(u,s,f,c,d),r&&(r(u,s,f,c,d),i&&i(u,s,f,c,d)))),s}}function Pn(n,e,t){var o=n!==zn;return function(r,i,l,u,a){var f=e(r,i,l,context);o&&r.write(n,f);for(var c=0;c<t.length;c++)t[c](r,f,l,context,a);return f}}function Rn(n,e){return 0===e.length?n!==zn?Sn(n):null:e.length<=5?Yn(n,e[0],e[1],e[2],e[3],e[4]):Vn(n,e)}function Yn(n,e,t,o,r,i){var l=n!==zn;return function(u,a,f,c,d){var s;l&&(s=Ln(u,a,n)),e&&(e(u,a,s,f,c,d),t&&(t(u,a,s,f,c,d),o&&(o(u,a,s,f,c,d),r&&(r(u,a,s,f,c,d),i&&i(u,a,s,f,c,d)))))}}function Vn(n,e){var t=n!==zn;return function(o,r,i,l,u){var a;t&&(a=Ln(o,r,n));for(var f=0;f<e.length;f++)e[f](o,r,a,i,l,u)}}function jn(n,e){return e.length>0&&e.length<=5?Fn(n,e[0],e[1],e[2],e[3],e[4]):null}function Fn(n,e,t,o,r,i){return function(n){e&&(e(n),t&&(t(n),o&&(o(n),r&&(r(n),i&&i(n)))))}}var Gn="NO_OP",Bn="undefined"!=typeof window&&window.document,Hn=!0,Kn={KEYED_LIST:0,NON_KEYED_LIST:1,TEXT:2,NODE:3,UNKNOWN:4},zn=-1,qn=-2,Jn={ELEMENT:0,COMPONENT:1,TEMPLATE:2,TEXT:3,PLACEHOLDER:4,FRAGMENT:5,VARIABLE:6},Qn="http://www.w3.org/1999/xlink",Zn="http://www.w3.org/XML/1998/namespace",$n={},ne={},ee={},te={};D("xlink:href,xlink:arcrole,xlink:actuate,xlink:role,xlink:titlef,xlink:type",ee,Qn),D("xml:base,xml:lang,xml:space",ee,Zn),D("volume,value",$n,!0),D("muted,scoped,loop,open,checked,default,capture,disabled,selected,readonly,multiple,required,autoplay,controls,seamless,reversed,allowfullscreen,novalidate",ne,!0),D("animationIterationCount,borderImageOutset,borderImageSlice,borderImageWidth,boxFlex,boxFlexGroup,boxOrdinalGroup,columnCount,flex,flexGrow,flexPositive,flexShrink,flexNegative,flexOrder,gridRow,gridColumn,fontWeight,lineClamp,lineHeight,opacity,order,orphans,tabSize,widows,zIndex,zoom,fillOpacity,floodOpacity,stopOpacity,strokeDasharray,strokeDashoffset,strokeMiterlimit,strokeOpacity,strokeWidth,",te,!0);var oe=new Map;L("div"),L("span"),L("table"),L("tr"),L("td"),L("a"),L("p");var re=Bn&&window.screen.width,ie=Bn&&window.screen.height,le=0,ue=0,ae=0;Bn&&(window.onscroll=function(){le=window.scrollX,ue=window.scrollY,ae=performance.now()},window.resize=function(){le=window.scrollX,ue=window.scrollY,re=window.screen.width,ie=window.screen.height,ae=performance.now()}),In.prototype={refresh:function(){this.scrollX=Bn&&window.scrollX,this.scrollY=Bn&&window.scrollY},addListener:function(n){this._listeners.push(n)},trigger:function(){for(var n=this,e=0;e<this._listeners.length;e++)n._listeners[e]()}};var fe=(Bn?document.body:null,new Map),ce=new Map,de={render:Dn,findDOMNode:Mn,mount:nn,patch:pn,unmount:b,createTemplateReducers:Wn};return de});