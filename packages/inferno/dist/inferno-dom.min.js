!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e){return e instanceof Array}function n(e){return i(e)||l(e)}function t(e){return a(e)||u(e)}function r(e){return u(e)||e===!1||f(e)||a(e)}function o(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function i(e){return"string"==typeof e}function l(e){return"number"==typeof e}function u(e){return null===e}function f(e){return e===!0}function a(e){return void 0===e}function c(e){throw e||(e=oe),new Error("Inferno Error: "+e)}function d(e){return e.type===le.OPT_ELEMENT}function s(e){return e.type===le.TEXT}function p(e){return e.type===le.FRAGMENT}function m(e){return!a(e.type)}function h(e){return e===fe.UNKNOWN}function v(e){return e===fe.KEYED}function E(e){return e===fe.NON_KEYED}function y(e,n,t,r,o,i){P(t,U(n,null,r,o,i),e.dom),I(e,null,r)}function N(e,n,t,r,o,i){e!==n&&(d(n)?d(e)?x(e,n,t,r,o,i):(P(t,q(n,null,r,o,i),e.dom),I(e,null,r)):d(e)?y(e,n,t,r,o,i):s(n)?s(e)&&k(e,n):p(n)?p(e)?_(e,n,t,r,o,i):(P(t,mountVFragment(n,null,r,o,i),e.dom),I(e,null,r)):c())}function g(t,o,i,l,u,f){if(r(o))r(t)||F(i,t,l);else if(r(t))n(o)?M(i,o):r(o)||(e(o)?mountArrayChildrenWithoutType(o,i,l,u,f):U(o,i,l,u,f));else if(m(o))N(t,o,i,l,u,f);else if(n(o))n(t)?H(i,o):M(i,o);else if(n(t)){var a=Y(t);a.dom=i.firstChild,g(a,o,i,l,u,f)}else e(o)?e(t)?(o.complex=t.complex,G(t,o)?C(t,o,i,l,u,f,null):T(t,o,i,l,u,f,null,!0)):T([t],o,i,l,u,f,null,!0):e(t)&&T(t,[o],i,l,u,f,null,!0)}function k(e,n){var t=n.text,r=e.dom;n.dom=r,e.text!==t&&(r.nodeValue=t)}function x(e,n,t,r,o,i){var l=e.dom,f=e.bp,a=n.bp;if(n.dom=l,f!==a){var c=mountVTemplate(n,null,r,o,i);P(t,c,l),I(e,null,r,!0)}else{var d=a.v0;if(!u(d)){var s=e.v0,p=n.v0,m=a.v1;if(s!==p&&b(d,s,p,l,r,o,i),!u(m)){var h=e.v1,v=n.v1;h!==v&&b(m,h,v,l,r,o,i)}}}}function b(e,n,r,o,i,l,u){switch(e){case ue.CHILDREN_KEYED:C(n,r,o,i,l,u,null);break;case ue.CHILDREN_NON_KEYED:T(n,r,o,i,l,u,null,!1);break;case ue.CHILDREN_TEXT:H(o,r);break;case ue.CHILDREN_NODE:N(n,r,o,i,l,u);break;case ue.PROPS_CLASS_NAME:t(r)?o.removeAttribute("class"):o.className=r}}function _(e,n,t,r,o,i){var l=e.children,u=n.children,f=e.pointer;if(n.dom=e.dom,n.pointer=f,!l!==u){var a=e.childrenType,c=n.childrenType;if(a===c){if(v(c))return C(l,u,t,r,o,i,n);if(E(c))return T(l,u,t,r,o,i,n,!1)}G(l,u)?C(l,u,t,r,o,i,n):T(l,u,t,r,o,i,n,!0)}}function T(e,n,t,r,o,i,l,u){for(var f=e.length,a=n.length,c=f>a?a:f,d=0;d<c;d++){var s=e[d],p=u?V(n,d):n[d];N(s,p,t,r,o,i)}if(f<a)for(d=c;d<a;d++){var m=V(n,d);K(t,U(m,null,r,o,i),l&&l.pointer)}else if(f>a)for(d=c;d<f;d++)I(e[d],t,r)}function C(e,n,t,r,o,i,l){var f,c,d,s,p,m=e.length,h=n.length,v=m-1,E=h-1,y=0,g=0,k=e[y],x=n[g],b=e[v],_=n[E],T=null,C=null;if(0===m)return void(0!==h&&J(n,t,r,o,i));if(0===h)return void(0!==m&&F(t,e,r));e:for(;;){for(;k.key===x.key;){if(N(k,x,t,r,o,i),y++,g++,y>v||g>E)break e;k=e[y],x=n[g]}for(;b.key===_.key;){if(N(b,_,t,r,o,i),v--,E--,y>v||g>E)break e;b=e[v],_=n[E]}if(b.key!==x.key){if(k.key!==_.key)break;if(N(k,_,t,r,o,i),s=E+1,d=s<n.length?n[s].dom:l&&l.pointer,K(t,_.dom,d),y++,E--,y>v||g>E)break;k=e[y],_=n[E]}else{if(N(b,x,t,r,o,i),K(t,x.dom,k.dom),v--,g++,y>v||g>E)break;b=e[v],x=n[g]}}if(y>v){if(g<=E)for(s=E+1,d=s<n.length?n[s].dom:l&&l.pointer;g<=E;)K(t,U(n[g++],null,r,o,i),d)}else if(g>E)for(;y<=v;)I(e[y++],t,r);else{m=v-y+1,h=E-g+1;var O=e,w=new Array(h);for(f=0;f<h;f++)w[f]=-1;var L=!1,R=0,A=0;if(h<=4||m*h<=16){for(f=y;f<=v;f++)if(T=e[f],A<h)for(c=g;c<=E;c++)if(C=n[c],T.key===C.key){w[c-g]=f,R>c?L=!0:R=c,N(T,C,t,r,o,i,!1),A++,O[f]=null;break}}else{var M=new Map;for(f=g;f<=E;f++)p=n[f],M.set(p.key,f);for(f=y;f<=v;f++)T=e[f],A<h&&(c=M.get(T.key),a(c)||(C=n[c],w[c-g]=f,R>c?L=!0:R=c,N(T,C,t,r,o,i,!1),A++,O[f]=null))}if(m===e.length&&0===A)for(F(t,e,r);g<h;)K(t,U(n[g++],null,r,o,i),null);else{for(f=m-A;f>0;)T=O[y++],u(T)||(I(T,t,r),f--);if(L){var H=D(w);for(c=H.length-1,f=h-1;f>=0;f--)w[f]===-1?(R=f+g,p=n[R],s=R+1,d=s<n.length?n[s].dom:l&&l.pointer,K(t,U(p,t,r,o,i),d)):c<0||f!==H[c]?(R=f+g,p=n[R],s=R+1,d=s<n.length?n[s].dom:l&&l.pointer,K(t,p.dom,d)):c--}else if(A!==h)for(f=h-1;f>=0;f--)w[f]===-1&&(R=f+g,p=n[R],s=R+1,d=s<n.length?n[s].dom:l&&l.pointer,K(t,U(p,null,r,o,i),d))}}}function D(e){var n=e.slice(0),t=[];t.push(0);var r,o,i,l,u;for(r=0;r<e.length;r++)if(e[r]!==-1)if(o=t[t.length-1],e[o]<e[r])n[r]=o,t.push(r);else{for(i=0,l=t.length-1;i<l;)u=(i+l)/2|0,e[t[u]]<e[r]?i=u+1:l=u;e[r]<e[t[i]]&&(i>0&&(n[r]=t[i-1]),t[i]=r)}for(i=t.length,l=t[i-1];i-- >0;)t[i]=l,l=n[l];return t}function O(e,n,r,i){if(se[e])i[e]=t(r)?"":r;else if(pe[e])i[e]=!!r;else if(n!==r){if(t(r))return i.removeAttribute(e),!1;if("className"===e)return i.className=r,!1;if("style"===e)patchStyle(n,r,i);else{if("defaultChecked"===e)return u(n)&&i.addAttribute("checked"),!1;if("defaultValue"===e)return u(n)&&i.setAttribute("value",r),!1;if(o(e))i[e.toLowerCase()]=r;else if("dangerouslySetInnerHTML"===e){var l=n&&n.__html,f=r&&r.__html;t(f)&&c(),l!==f&&(i.innerHTML=f)}else if("childrenType"!==e&&"ref"!==e&&"key"!==e){var a=me[e];return a?i.setAttributeNS(a,e,r):i.setAttribute(e,r),!1}}}return!0}function w(e,n,t,r){var o=e.bp,i=e.key,l=null===i?o.pools.nonKeyed:o.pools.keyed.get(i);if(!a(l)){var u=l.pop();if(!a(u))return x(u,e,null,n,t,r),e.dom}return null}function L(e){var n=e.bp,t=e.key,r=n.pools;if(u(t))r.nonKeyed.push(e);else{var o=r.keyed.get(t);a(o)&&(o=[],r.keyed.set(t,o)),o.push(e)}}function I(e,n,t,o){r(e)||d(e)&&R(e,n,t,o)}function R(e,n,t,r){u(n)||n.removeChild(e.dom),ae&&(n||r)&&L(e)}function A(e,n,t){e.split(",").forEach(function(e){return n[e]=t})}function M(e,n){""!==n?e.textContent=n:e.appendChild(document.createTextNode(""))}function H(e,n){e.firstChild.nodeValue=n}function S(e,n){e.appendChild(n)}function K(e,n,r){t(r)?S(e,n):e.insertBefore(n,r)}function P(e,n,t){e.replaceChild(n,t)}function Y(t){return n(t)||r(t)||e(t),t}function V(e,n){var t=e[n];return e[n]=Y(t)}function X(){return document.activeElement}function F(e,n,t){e.textContent="";for(var o=0;o<n.length;o++){var i=n[o];r(i)||I(i,null,t,!0)}}function W(e){null!==e&&e!==document.body&&document.activeElement!==e&&e.focus()}function G(e,n){return!e.complex&&(n.length&&!t(n[0])&&!t(n[0].key)&&e.length&&!t(e[0])&&!t(e[0].key))}function U(e,n,t,r,o){return d(e)?q(e,n,t,r,o):s(e)?j(e,n):p(e)?z(e,n,t,r,o):void c()}function z(e,n,t,r,o){var i=e.children,l=document.createTextNode(""),u=document.createDocumentFragment(),f=e.childrenType;return v(f)||E(f)?J(i,u,t,r,o):h(f)&&Z(i,u,t,r,o),e.pointer=l,e.dom=u,S(u,l),n&&S(n,u),u}function B(e,n){var t=e.staticVElement,r=t.tag,o=document.createElement(r),i=t.props;for(var l in i)O(l,null,i[l],o);return e.clone=o,o.cloneNode(!0)}function j(e,n){var t=document.createTextNode(e.text);return e.dom=t,u(n)||S(n,t),t}function q(e,n,t,r,o){var i=e.bp,l=null;if(ae&&(l=w(e,t,r,o)),u(l)){l=i.clone&&i.clone.cloneNode(!0)||B(i,o),e.dom=l;var f=i.v0;if(!u(f)){$(f,e.v0,l,t,r,o);var a=i.v1;u(a)||$(a,e.v1,l,t,r,o)}}return u(n)||n.appendChild(l),l}function $(e,n,r,o,i,l){switch(e){case ue.CHILDREN_KEYED:case ue.CHILDREN_NON_KEYED:J(n,r,o,i,l);break;case ue.CHILDREN_TEXT:M(r,n);break;case ue.CHILDREN_NODE:U(n,r,o,i,l);break;case ue.PROPS_CLASS_NAME:t(n)||(r.className=n)}}function J(e,n,t,r,o){for(var i=0;i<e.length;i++)U(e[i],n,t,r,o)}function Q(t,o,i,l,u){e(t)||(n(t)?M(o,t):r(t)||U(t,o,i,l,u))}function Z(e,n,t,r,o){e.complex=!1;for(var i=0;i<e.length;i++){var l=V(e,i);s(l)?(j(l,n),e.complex=!0):isVPlaceholder(l)?(mountVPlaceholder(l,n),e.complex=!0):p(l)?(z(l,n,t,r,o),e.complex=!0):U(l,n,t,r,o)}}function ee(e){return Ee.get(e)||null}function ne(e,n){var t=ve.get(n),o=new te;if(ye===n&&c(),e!==re)if(a(t))r(e)||(Q(e,n,o,{},!1),o.trigger(),ve.set(n,{input:e}));else{var i=X();u(e)?(I(t.input,n,o,!0),ve.delete(n)):g(t.input,e,n,o,{},!1),o.trigger(),t.input=e,W(i)}}var te=function(){this._listeners=[]};te.prototype.addListener=function(e){this._listeners.push(e)},te.prototype.trigger=function(){for(var e=this,n=0;n<this._listeners.length;n++)e._listeners[n]()};var re="$NO_OP",oe="a runtime error occured! Use Inferno in development environment to find the error.",ie="undefined"!=typeof window&&window.document,le={ELEMENT:1,OPT_ELEMENT:2,TEXT:3,FRAGMENT:4,OPT_BLUEPRINT:5},ue={CHILDREN_KEYED:1,CHILDREN_NON_KEYED:2,CHILDREN_TEXT:3,CHILDREN_NODE:4,PROPS_CLASS_NAME:5},fe={NON_KEYED:1,KEYED:2,NODE:3,TEXT:4,UNKNOWN:5},ae=!0,ce="http://www.w3.org/1999/xlink",de="http://www.w3.org/XML/1998/namespace",se={},pe={},me={},he={};A("xlink:href,xlink:arcrole,xlink:actuate,xlink:role,xlink:titlef,xlink:type",me,ce),A("xml:base,xml:lang,xml:space",me,de),A("volume,value",se,!0),A("muted,scoped,loop,open,checked,default,capture,disabled,selected,readonly,multiple,required,autoplay,controls,seamless,reversed,allowfullscreen,novalidate",pe,!0),A("animationIterationCount,borderImageOutset,borderImageSlice,borderImageWidth,boxFlex,boxFlexGroup,boxOrdinalGroup,columnCount,flex,flexGrow,flexPositive,flexShrink,flexNegative,flexOrder,gridRow,gridColumn,fontWeight,lineClamp,lineHeight,opacity,order,orphans,tabSize,widows,zIndex,zoom,fillOpacity,floodOpacity,stopOpacity,strokeDasharray,strokeDashoffset,strokeMiterlimit,strokeOpacity,strokeWidth,",he,!0);var ve=new Map,Ee=new Map,ye=ie?document.body:null,Ne={render:ne,findDOMNode:ee,mount:U,patch:N,unmount:I};return Ne});