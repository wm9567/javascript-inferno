!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.InfernoDOM=t()}(this,function(){"use strict";function e(e,n){return r(e)||(t(e)&&e.length>0||!t(e))&&(n?n.children=e:n={children:e}),n}function t(e){return e.constructor===Array}function n(e){return e&&e.prototype&&e.prototype.render}function o(e){return"string"==typeof e||"number"==typeof e}function r(e){return void 0===e||null===e}function l(e){return"function"==typeof e}function i(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function a(e){return"string"==typeof e}function u(e){return"number"==typeof e}function d(e,t,n){n?e.insertBefore(t,n):e.appendChild(t)}function f(e,t){return t?document.createElementNS(t,e):document.createElement(e)}function c(e,t,n){if(n)""!==e?t.textContent=e:t.appendChild(document.createTextNode(""));else{var o=document.createTextNode(e);t.appendChild(o)}}function s(e,t,n,o,r,l){var i=A(t,null,o,r,l);n.replaceChild(i,e.dom),t.dom=i}function v(e){if(!r(e)){n(e.instance)&&(e.instance.componentWillUnmount(),e.instance._unmounted=!0),e.events&&e.events.willDetach&&e.events.willDetach(e.dom),e.events&&e.events.componentWillUnmount&&e.events.componentWillUnmount(e.dom,e.events);var o=e.children;if(o)if(t(o))for(var l=0;l<o.length;l++)v(o[l]);else v(o)}}function p(e,t){var n=e.dom;v(e),n===t?n.innerHTML="":(t.removeChild(n),B&&j(e))}function m(e,t,n,o,l,i){return r(e)?void A(t,n,o,l):r(t)?void p(e,n):void C(e,t,n,o,l,i,null!==e.static&&null!==t.static)}function h(e,t,n){if(a(t))n.style.cssText=t;else if(t){for(var o=Object.keys(t),r=0;r<o.length;r++){var l=o[r],i=t[l];u(i)&&(i+="px"),n.style[l]=i}if(e)for(var d=Object.keys(e),r=0;r<d.length;r++){var l=d[r];t[l]||(n.style[l]="")}}else e&&n.removeAttribute("style")}function y(e,t,n,o){if(t!==n&&!i(e)){var l=null;":"===e[5]&&-1!==e.indexOf("xlink:")&&(l="http://www.w3.org/1999/xlink"),n===!1||r(n)?o.removeAttribute(e):l?n===!0?o.setAttributeNS(l,e,e):o.setAttributeNS(l,e,n):n===!0?o.setAttribute(e,e):o.setAttribute(e,n)}}function g(t,o,r,l,i,a,u,d,f,c){if(i=e(u,i),n(o)){var s=r.props,v=r.state,p=r.state,m=r.getChildContext();m&&(c=T.extends({},c,m)),r.context=c;var h=r._updateComponent(v,p,s,i);h&&(C(t,h,d,f,c,!1),t.dom=h.dom,r._lastNode=h)}else{var y=!0;if(a&&a.componentShouldUpdate&&(y=a.componentShouldUpdate(t.dom,l,i)),y!==!1){a&&a.componentWillUpdate&&a.componentWillUpdate(t.dom,l,i);var h=o(i),g=t.dom;h.dom=g,C(r,h,g,f,c,!1),t.instance=h,a&&a.componentDidUpdate&&a.componentDidUpdate(t.dom,l,i)}}}function b(e,t,n,l,i,a,u){var d=e.length,f=t.length;if(d>f)for(var c=void 0;d!==f;){var s=e[d-1];r(s)||n.removeChild((c=s.dom)||c&&(c=c.previousSibling)||(c=n.lastChild)),d--}else if(f>d)for(var v=0;d!==f;){var p=t[d+v];if(r(p));else{var h=A(p,null,l,l,i,a);n.appendChild(h)}f--,v++}for(var y=0;f>y;y++){var s=e[y],p=t[y];if(s!==p)if(r(p))r(s)||(n.childNodes[y].textContent="");else if(r(s))if(o(p))n.childNodes[y].textContent=p;else{var h=A(p,null,l,l,i,a);n.replaceChild(h,n.childNodes[y])}else o(p)?n.childNodes[y].textContent=p:m(s,p,n,l,i,a)}}function k(e,t,n,o,r,l,i){var a=!1,u=0,f=0,c=t.length,s=e.length,v=void 0,m=void 0;if(0===c&&s>=5){if(B)for(var h=0;s>h;h++)j(e[h]);return void(n.textContent="")}var y=c-1,g=s-1,b=s>0?e[f]:null,k=c>0?t[u]:null,x=void 0,w=void 0,N=void 0;e:for(;!a&&y>=u&&g>=f;){for(a=!0;k.key===b.key;){if(C(b,k,n,o,r,l,!0),u++,f++,u>y||f>g)break e;k=t[u],b=e[f],a=!1}for(x=t[y],w=e[g];x.key===w.key;){if(C(w,x,n,o,r,l,!0),y--,g--,u>y||f>g)break e;x=t[y],w=e[g],a=!1}for(;x.key===b.key;){if(N=c>y+1?t[y+1].dom:i,C(b,x,n,o,r,l,!0),d(n,x.dom,N),y--,f++,u>y||f>g)break e;x=t[y],b=e[f],a=!1}for(;k.key===w.key;){if(N=e[f].dom,C(w,k,n,o,r,l,!0),d(n,k.dom,N),u++,g--,u>y||f>g)break e;k=t[u],w=e[g],a=!1}}if(f>g){if(y>=u)for(N=c>y+1?t[y+1].dom:i;y>=u;u++)v=t[u],d(n,A(v,null,o,r,l),N)}else if(u>y)for(;g>=f;f++)m=e[f],p(m,n);else{for(var U={},h=f;g>=h;h++)m=e[h],U[m.key]=m;for(var M=c>y+1?t[y+1]:null,h=y;h>=u;h--){v=t[h];var O=v.key;m=U[O],void 0!==m?(U[O]=null,C(m,v,n,o,r,!0),v.dom.nextSibling!==M&&(M=M&&M.dom||i,d(n,v.dom,M)),M=v):(M=M&&M.dom||i,d(n,A(v,null,o,r,l),M)),M=v}for(var h=f;g>=h;h++)m=e[h],null!==U[m.key]&&p(m,n)}}function C(e,t,i,a,u,d,f){if(t!==!1&&null!==t){if(o(e))return void(o(t)&&(i.firstChild.nodeValue=t));var c=t.tag||(f&&t.tpl?t.tpl.tag:null),v=e.tag||(f&&e.tpl?e.tpl.tag:null),p=t.events;if(p&&p.willUpdate&&p.willUpdate(e.dom),a=a||"svg"===c?P:"math"===c?K:null,v!==c)return void(l(v)&&!l(c)?n(v)?C(e.instance._lastNode,t,i,a,u,d,!0):C(e.instance,t,i,a,u,d,!0):s(e,t,i,a,u,d));if(l(v)&&l(c))return t.instance=e.instance,t.dom=e.dom,void g(t,t.tag,t.instance,e.attrs,t.attrs,t.events,t.children,i,u,d);var m=e.dom;t.dom=m,x(e,t,m,a,u,d,f);var y=t.className,b=t.style;e.className!==y&&(r(y)?m.removeAttribute("class"):m.className=y),e.style!==b&&h(e.style,b,m),w(e,t,m),N(e,t,m),p&&p.didUpdate&&p.didUpdate(m)}}function x(e,n,l,i,a,u,d){var f=n.children,c=e.children;if(c!==f)if(r(c))o(f)?l.textContent=f:f&&t(f)?O(f,l,i,a,u):f&&"object"===("undefined"==typeof f?"undefined":T.typeof(f))&&A(f,l,i,a,u);else if(r(f))l.textContent="";else if(t(c))if(t(f)){var s=f.length&&f[0]&&!r(f[0].key)||c.length&&c[0]&&!r(c[0].key);s?k(c,f,l,i,a,u,null):b(c,f,l,i,a,u,null)}else b(c,[f],l,i,a,u,null);else t(f)?b([c],f,l,i,a,u,null):C(c,f,l,i,a,u,d)}function w(e,t,n){var o=t.attrs,r=e.attrs,l=o&&Object.keys(o);if(o&&0!==l.length)for(var i=0;i<l.length;i++){var a=l[i],u=r[a],d=o[a];u!==d&&y(a,u,d,n)}}function N(e,t,n){}function U(e,t,n){var o=e.key,r=e.tpl,l=void 0;if(r){if(null!==o){var i=r.pools.keyed[o];l=i&&i.pop()}else{var i=r.pools.nonKeyed;l=i&&i.pop()}if(l)return C(l,e,null,t,n,null,!0),e.dom}}function j(e){var t=e.key,n=e.tpl;if(n){var o=n.pools;if(null===t){var r=o.nonKeyed;r&&r.push(item)}else{var l=o.keyed;(l[t]||(l[t]=[])).push(e)}}}function M(e,t,n){if(H[e]){var o=H[e];o.push({callback:n,target:t})}else document.addEventListener(e,function(t){for(var n=H[e],o=n.length-1;o>-1;o--){var r=n[o];r.target===t.target&&r.callback(t)}},!1),H[e]=[]}function O(e,n,r,l,i){if(t(e))for(var a=0;a<e.length;a++){var u=e[a];o(u)?c(u,n,!1):A(u,n,r,l,i)}else o(e)?c(e,n,!0):A(e,n,r,l,i)}function S(t,o,r,l,i,a,u,d){if(r=e(i,r),n(o)){var f=new o(r);f._diffNodes=C;var c=f.getChildContext();c&&(d=T.extends({},d,c)),f.context=d,f.componentWillMount();var s=f.render(),v=void 0;return s&&(v=A(s,null,null,u,d),f._lastNode=s,a&&a.appendChild(v),u.addListener(f.componentDidMount)),t.dom=v,t.instance=f,v}var p=function(){var e=void 0;l&&(l.componentWillMount&&l.componentWillMount(null,r),l.componentDidMount&&u.addListener(function(){l.componentDidMount(e,r)}));var n=o(r);return e=A(n,null,null,u,d),t.instance=n,a&&a.appendChild(e),t.dom=e,{v:e}}();return"object"===("undefined"==typeof p?"undefined":T.typeof(p))?p.v:void 0}function _(e,t,n){for(var o=0;o<t.length;o++){var r=t[o];M(r,n,e[r])}}function A(e,n,i,u,d){var c=void 0;if(r(e)||t(e)){var s=document.createTextNode("");return null!==n&&n.appendChild(s),s}if(o(e)){var v=document.createTextNode(e);return null!==n&&n.appendChild(v),v}if(B&&(c=U(e,u,d)))return n&&n.appendChild(c),c;var p=e.tag;if(l(p))return S(e,p,e.attrs,e.events,e.children,n,u,d);if(i=i||"svg"===p?P:"math"===p?K:null,e.tpl&&e.tpl.dom)c=e.tpl.dom.cloneNode(!0);else{if(null!==p&&!a(p))throw Error("Inferno Error: Expected function or string for element tag type");c=f(p,i)}var m=e.children,y=e.attrs,g=e.events,b=e.className,k=e.style;if(g){var C=Object.keys(g),x=C.length;g.click&&(M("click",c,g.click),x--),g.created&&(g.created(c),x--),g.attached&&(u.addListener(function(){g.attached(c)}),x--),x>0&&_(g,C,c)}return r(m)||O(m,c,i,u,d),y&&D(y,c),r(b)||(c.className=b),r(k)||h(null,k,c),e.dom=c,null!==n&&n.appendChild(c),c}function D(e,t){for(var n=Object.keys(e),o=0;o<n.length;o++){var r=n[o];y(r,null,e[r],t)}}function W(e){for(var t=0;t<V.length;t++){var n=V[t];if(n.dom===e)return n}return null}function E(e){for(var t=0;t<V.length;t++){var n=V[t];if(n===e)return V.splice(t,1),!0}return!1}function L(e,t){var n=W(t),o=new I;r(n)?(A(e,t,null,o,{}),o.trigger(),V.push({node:e,dom:t})):(m(n.node,e,t,null,o,{}),o.trigger(),null===e&&E(n),n.node=e)}var T={};T.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},T.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},T.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),T.extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var I=function(){function e(){T.classCallCheck(this,e),this._listeners=[]}return T.createClass(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"trigger",value:function(){for(var e=0;e<this._listeners.length;e++)this._listeners[e]()}}]),e}(),K="http://www.w3.org/1998/Math/MathML",P="http://www.w3.org/2000/svg",B=!0,H={},V=[],q={render:L};return q});