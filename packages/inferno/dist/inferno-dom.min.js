!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e,t){if(!l(e)){var r=n(e);(r&&e.length>0||!r)&&(t?t.children=e:t={children:e})}return t}function n(e){return e.constructor===Array}function t(e){return!l(e)&&!l(e.prototype.render)}function r(e){return"string"==typeof e||"number"==typeof e}function l(e){return void 0===e||null===e}function o(e){return void 0===e||null===e||e===!1}function i(e){return"function"==typeof e}function a(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function u(e){return"string"==typeof e}function f(e){return"number"==typeof e}function d(e){return e&&e.then}function c(e,n,t){e.splice(e.indexOf(n),1,t)}function s(e,t,r,l){if(e.dom===t)return r.callback(l),!0;var o=e.children;if(o)if(n(o))for(var i=0;i<o.length;i++){var a=o[i];if("object"===("undefined"==typeof a?"undefined":oe.typeof(a))){var u=s(a,t,r,l);if(u)return!0}}else if(o.dom){var f=s(o,t,r,l);if(f)return!0}}function p(e){return ue[e]||!1}function v(e){for(var n=ae[e.type],t=n.length-1;t>-1;t--){var r=n[t],l=r.node,o=e.target;s(l,o,r,e)}}function h(e,n){if(!l(n)){var t=ae[e];if(!l(t))for(var r=0;r<t.length;r++){var o=t[r];if(o.callback===n)return void t.splice(r,1)}}}function m(e,n,t){n.dom.addEventListener(e,t,!1)}function y(e,n,t){n.dom.removeEventListener(e,t)}function g(e,n,t){var r=ae[e];l(r)?(document.addEventListener(e,v,!1),ae[e]=[{callback:t,node:n}]):r.push({callback:t,node:n})}function C(e,n,t){l(t)?n.append?n.append(e):e.appendChild(n):n.insert?n.insert(e,t):t.insert?e.insertBefore(n,t.childNodes[0]):e.insertBefore(n,t)}function k(e,n){return l(n)?document.createElement(e):document.createElementNS(n,e)}function b(e,n,t){if(!t){var r=document.createTextNode(e);return n.appendChild(r),r}if(""===e){var l=document.createTextNode("");return n.appendChild(l),l}n.textContent=e}function x(e,n,t,r,o,i,a){var u=null,f=e._lastNode;l(f)||(u=e,e=f);var d=ee(n,null,r,o,i,a);n.dom=d,t.replaceChild(d,e.dom),null!==u&&(u._lastNode=n),N(e,se&&!l(e.tpl))}function N(e,t){if(!o(e)&&!r(e)){var i=e.instance,a=!l(i),u=null,f=null,d=null;a&&(u=i.hooks,f=i.events,d=i.children,void 0!==i.render&&(i.componentWillUnmount(),i._unmounted=!0));var c=e.hooks||u;l(c)||(l(c.willDetach)||c.willDetach(e.dom),l(c.componentWillUnmount)||c.componentWillUnmount(e.dom,c),t===!1&&(l(u)?e.hooks=null:i.hooks=null));var s=e.events||f;if(!l(s))for(var v in s)p(v)?y(v,e,s[v]):h(v,s[v]);var m=e.children||d;if(!l(m)){if(n(m))for(var g=0;g<m.length;g++)N(m[g]);else N(m);if(t===!1){e.children=null;var C=e.domChildren;l(C)||(e.domChildren=null)}}}}function w(){return document.createTextNode("")}function O(e,n){var t=e.dom;t===n?(t.innerHTML="",N(e,se&&!l(e.tpl))):(n.removeChild(t),se?(J(e),N(e,!l(e.tpl))):N(e,!1))}function j(e,n,t){for(var r=0;r<n.length;r++)e.insertBefore(n[r],t)}function S(){return document.activeElement}function U(e){e!==document.body&&document.activeElement!==e&&e.focus()}function _(){var e=[],n=document.createTextNode(""),t=null,r={childNodes:e,appendChild:function(r){e.push(r),t&&t.insertBefore(r,n)},removeChild:function(n){t&&t.removeChild(n),e.splice(e.indexOf(n),1)},insertBefore:function(n,r){t&&t.insertBefore(n,r),e.splice(e.indexOf(r),0,n)},replaceChild:function(n,r){t.replaceChild(n,r),c(e,r,n)},append:function(r){r.appendChild(n),t=r,j(t,e,n)},insert:function(r,l){r.insertBefore(n,l),t=r,j(t,e,n)},remove:function(){t.removeChild(n);for(var r=0;r<e.length;r++)t.removeChild(e[r]);t=null}};return Object.defineProperty(r,"parentNode",{get:function(){return t}}),Object.defineProperty(r,"firstChild",{get:function(){return e[0]}}),r}function E(e,n){if("option"===e.tag){var t=e.attrs&&e.attrs.value;n[t]&&(e.attrs=e.attrs||{},e.attrs.selected="selected")}else for(var r=0,l=e.children.length;l>r;r++)E(e.children[r],n)}function T(e){if("select"===e.tag){var t=e.attrs&&e.attrs.value;if(!l(t)){var r={};if(n(t))for(var o=0,i=t.length;i>o;o++)r[t[o]]=t[o];else r[t]=t;E(e,r),e.attrs&&e.attrs[t]&&delete e.attrs.value}}}function M(e){switch(e.length){case 5:return"value"===e;case 7:return"checked"===e;case 8:return"disabled"===e||"selected"===e;default:return!1}}function W(e,n,t){r(n)?e.firstChild.nodeValue=t:e.textContent=t}function D(e,n,t,l,i,a,u,f){if(null!==f)K(e,n,t,l,i,a,u,f);else if(o(e))ee(n,t,l,i,a,u);else if(o(n))O(e,t);else if(r(e))if(r(n))t.firstChild.nodeValue=n;else{var d=ee(n,null,l,i,a,u);n.dom=d,t.replaceChild(d,t.firstChild)}else if(r(n)){var c=document.createTextNode(n);t.replaceChild(c,e.dom)}else K(e,n,t,l,i,a,u,null!==e.tpl&&null!==n.tpl)}function B(e,n,t){if(u(n))t.style.cssText=n;else if(l(e)){if(!l(n))for(var r=Object.keys(n),o=0;o<r.length;o++){var i=r[o],a=n[i];f(a)&&!ce[i]&&(a+="px"),t.style[i]=a}}else if(l(n))t.removeAttribute("style");else{for(var d=Object.keys(n),c=0;c<d.length;c++){var s=d[c],p=n[s];f(p)&&!ce[s]&&(p+="px"),t.style[s]=p}for(var v=Object.keys(e),h=0;h<v.length;h++){var m=v[h];l(n[m])&&(t.style[m]="")}}}function L(e,n,t){if(!a(e)){if(M(e))return void(t[e]=n);if(n===!1||l(n))t.removeAttribute(e);else{var r=null;":"===e[5]&&-1!==e.indexOf("xlink:")&&(r="http://www.w3.org/1999/xlink"),null!==r?t.setAttributeNS(r,e,n===!0?e:n):t.setAttribute(e,n===!0?e:n)}}}function A(n,r,o,i,a,u,f,d,c,s){if(a=e(f,a),t(r)){var p=o.props,v=o.state,h=o.state,m=o.getChildContext();l(m)||(s=oe.extends({},s,m)),o.context=s;var y=o._updateComponent(v,h,p,a);l(y)||(K(n,y,d,null,c,s,!0,o),n.dom=y.dom,o._lastNode=y)}else{var g=!0,C=!l(u);if(C&&!l(u.componentShouldUpdate)&&(g=u.componentShouldUpdate(n.dom,i,a)),g!==!1){C&&!l(u.componentWillUpdate)&&u.componentWillUpdate(n.dom,i,a);var k=r(a),b=n.dom;k.dom=b,K(o,k,b,null,c,s,!0,null),n.instance=k,C&&!l(u.componentDidUpdate)&&u.componentDidUpdate(n.dom,i,a)}}}function V(e,n){return n.length&&!l(n[0])&&!l(n[0].key)||e.length&&!l(e[0])&&!l(e[0].key)}function I(e,t,i,a,u,f,d,c,s){var p=!l(i.append),v=e.length,h=t.length,m=v===h;if(m===!1)if(v>h)for(;v!==h;){var y=e[v-1];o(y)||(i.removeChild(a[v-1+s]),N(y)),v--}else if(h>v)for(;v!==h;){var g=t[v],k=ee(g,null,u,f,d,c);C(i,k),p||(1===v&&a.push(i.firstChild),a.push(k)),v++}for(var b=0;h>b;b++){var x=e[b],O=t[b],j=b+s;if(x!==O)if(o(O)){if(!o(x)){var S=a[j];if(!l(S))if(r(x))S.nodeValue="";else if(m===!0){var U=w();n(x)&&0===x.length?(C(i,U),!p&&a.splice(j,0,U)):(i.replaceChild(U,a[j]),!p&&a.splice(j,1,U),N(x,se&&!l(x.tpl)))}}}else if(o(x)){if(r(O)){var _=document.createTextNode(O);i.replaceChild(_,a[j]),!p&&a.splice(j,1,_)}else if(m===!0){var E=ee(O,null,u,f,d,c);i.replaceChild(E,a[j]),!p&&a.splice(j,1,E)}}else if(r(O))if(1===v)r(x)?void 0!==i.getElementsByTagName?i.firstChild.nodeValue=O:i.nodeValue=O:(N(x,se&&!l(x.tpl)),i.textContent=O);else{var T=document.createTextNode(O),M=a[j];l(M)?i.nodeValue=T.nodeValue:l(M.append)?(!p&&a.splice(j,1,T),i.replaceChild(T,M)):(i.insertBefore(T,M.firstChild),M.remove(),a.splice(0,a.length,T)),N(x,se&&!l(x.tpl))}else n(O)?V(x,O)?P(x,O,a[j],u,f,d,c):n(x)?I(x,O,a[j],a[j].childNodes,u,f,d,c,0):I([x],O,i,a,u,f,d,c,b):n(x)?I(x,[O],a,a[j].childNodes,u,f,d,c,0):D(x,O,i,u,f,d,c,null)}}function P(e,n,t,r,o,i,a){var u=n.length,f=e.length;if(0===u&&f>=5){if(se)for(var d=0;f>d;d++)J(e[d]);return void(t.textContent="")}var c=void 0,s=!1,p=0,v=0,h=u-1,m=f-1,y=f>0?e[v]:null,g=u>0?n[p]:null,k=void 0,b=void 0,x=void 0;e:for(;!s&&h>=p&&m>=v;){for(s=!0;g.key===y.key;){if(K(y,g,t,r,o,i,a,!0),p++,v++,p>h||v>m)break e;g=n[p],y=e[v],s=!1}for(k=n[h],b=e[m];k.key===b.key;){if(K(b,k,t,r,o,i,a,!0),h--,m--,p>h||v>m)break e;k=n[h],b=e[m],s=!1}for(;k.key===y.key;){if(x=u>h+1?n[h+1].dom:null,K(y,k,t,r,o,i,a,!0),C(t,k.dom,x),h--,v++,p>h||v>m)break e;k=n[h],y=e[v],s=!1}for(;g.key===b.key;){if(x=e[v].dom,K(b,g,t,r,o,i,a,!0),C(t,g.dom,x),p++,m--,p>h||v>m)break e;g=n[p],b=e[m],s=!1}}if(v>m){if(h>=p)for(x=u>h+1?n[h+1].dom:null;h>=p;p++)C(t,ee(n[p],null,r,o,i,a),x)}else if(p>h)for(;m>=v;v++)c=e[v],O(c,t);else{for(var N=[],w=v;m>=w;w++)c=e[w],N[c.key]=c;x=u>h+1?n[h+1]:null;for(var j=h;j>=p;j--){var S=n[j],U=S.key;c=N[U],x=l(x)?void 0:x.dom,void 0===c?C(t,ee(S,null,r,o,i,a),x):(N[U]=null,K(c,S,t,r,o,i,a,!0),S.dom.nextSibling!==x&&C(t,S.dom,x)),x=S}for(var _=v;m>=_;_++)c=e[_],null!==N[c.key]&&O(c,t)}}function z(e,t,i,a,u,f,d,c){var s=t.children,p=e.children;if(p!==s){var v=null;e.domChildren&&(v=t.domChildren=e.domChildren),o(p)?r(s)?W(i,p,s):l(s)||"object"===("undefined"==typeof s?"undefined":oe.typeof(s))&&(n(s)?R(t,s,i,a,u,f,d):ee(s,i,a,u,f,d)):o(s)?i.textContent="":n(p)?n(s)?null===v&&p.length>1?P(p,s,i,a,u,f,d):I(p,s,i,v||[],a,u,f,d,0):I(p,[s],i,v||[],a,u,f,d,0):n(s)?I([p],s,i,v||(t.domChildren=[i.firstChild]),a,u,f,d,0):r(s)?W(i,p,s):r(p)?D(p,s,i,a,u,f,d,null):D(p,s,i,a,u,f,d,c)}}function F(e,n,t,r){e&&(u(n)&&delete e.refs[n],u(t)&&(e.refs[t]=r))}function G(e,n,t,r){"select"===e.tag&&T(n);var o=n.attrs,i=e.attrs,a=l(o),u=l(i);if(!a)for(var f=Object.keys(o),d=f.length,c=0;d>c;c++){var s=f[c],p=!u&&i[s],v=o[s];p!==v&&("ref"===s?F(r,p,v,t):L(s,v,t))}if(!u)for(var h=Object.keys(i),m=h.length,y=0;m>y;y++){var g=h[y];(a||l(o[g]))&&("ref"===g?F(r,i[g],null,t):t.removeAttribute(g))}}function H(e,n){var t=e.events;if(!l(t)){var r=Object.keys(t),o=n.events;if(l(o))for(var i=0;i<r.length;i++){var a=r[i],u=t[a];p(a)?y(a,e,u):h(a,u)}else for(var f=0;f<r.length;f++){var d=r[f],c=o[d],s=t[d];l(c)?p(d)?y(d,e,s):h(d,s):c!==s&&(p(d)?(y(d,e,s),m(d,n,c)):(h(d,s),g(d,n,c)))}}}function K(e,n,r,o,a,u,f,d){if(l(n.then)){var c=n.hooks;c&&c.willUpdate&&c.willUpdate(e.dom);var s=n.tag||(d&&n.tpl?n.tpl.tag:null),p=e.tag||(d&&e.tpl?e.tpl.tag:null);if(o=o||"svg"===s?de:"math"===s?fe:null,p!==s){var v=e.instance;i(p)?i(s)?x(v||e,n,r,o,a,u,f):t(p)?K(v._lastNode,n,r,o,a,u,!0,f):K(v,n,r,o,a,u,!0,f):x(v||e,n,r,o,a,u,f)}else if(l(p))n.dom=e.dom;else if(i(p))i(s)&&(n.instance=e.instance,n.dom=e.dom,A(n,n.tag,n.instance,e.attrs||{},n.attrs||{},n.hooks,n.children,r,a,u));else{var h=e.dom,m=n.className,y=n.style;n.dom=h,e!==n&&(z(e,n,h,o,a,u,f,d),G(e,n,h,f),H(e,n)),e.className!==m&&(l(m)?h.removeAttribute("class"):h.className=m),e.style!==y&&B(e.style,y,h),l(c)||l(c.didUpdate)||c.didUpdate(h)}}else n.then(function(n){K(e,n,r,o,a,u,d,f)})}function q(e,n,t,r){var o=e.tpl;if(!l(o)){var i=e.key,a=void 0;if(null!==i){var u=o.pools.keyed[i];a=u&&u.pop()}else{var f=o.pools.nonKeyed;a=f&&f.pop()}if(!l(a))return K(a,e,null,null,n,t,r,!0),e.dom}}function J(e){var n=e.tpl;if(!l(n)){var t=e.key,r=n.pools;if(null===t){var o=r.nonKeyed;o&&o.push(e)}else{var i=r.keyed;(i[t]||(i[t]=[])).push(e)}return!0}return!1}function Q(e,n,t,r,l,o,i){var a=w();t&&t.push(a),e.then(function(e){var u=ee(e,null,r,l,o,i);n.replaceChild(u,a),t&&c(t,a,u)}),n.appendChild(a)}function R(e,t,i,a,u,f,c){var s=[],p=!1,v=!1;if(n(t))for(var h=0;h<t.length;h++){var m=t[h];if(r(m))p=!0,s.push(b(m,i,!1));else if(!l(m)&&n(m)){var y=_();p=!0,R(e,m,y,a,u,f,c),C(i,y),s.push(y)}else if(d(m))Q(m,i,s,a,u,f,c);else{var g=ee(m,i,a,u,f,c);p||!v&&m&&l(m.key)?(p=!0,s.push(g)):o(m)?(p=!0,s.push(g)):v===!1&&(v=!0)}}else r(t)?b(t,i,!0):d(t)?Q(t,i,null,a,u,f,c):ee(t,i,a,u,f,c);s.length>1&&p===!0&&(e.domChildren=s)}function X(e,n,t){!l(e)&&u(n)&&(e.refs[n]=t)}function Y(n,r,o,i,a,u,f,d){o=e(a,o);var c=void 0;if(t(r)){var s=new r(o);s._diffNodes=K;var p=s.getChildContext();l(p)||(d=oe.extends({},d,p)),s.context=d,s._pendingSetState=!0,s.componentWillMount();var v=s.shouldComponentUpdate();if(v){s.componentWillUpdate();var h=s._pendingState,m=s.state;s.state=oe.extends({},m,h)}var y=s.render();return s._pendingSetState=!1,l(y)||(c=ee(y,null,null,f,d,s),s._lastNode=y,null!==u&&u.appendChild(c),s.componentDidMount(),s.componentDidUpdate()),n.dom=c,n.instance=s,c}l(i)||(l(i.componentWillMount)||i.componentWillMount(null,o),l(i.componentDidMount)||f.addListener(function(){i.componentDidMount(c,o)}));var g=r(o);return c=ee(g,null,null,f,d,null),n.instance=g,null!==u&&u.appendChild(c),n.dom=c,c}function Z(e,n){for(var t=Object.keys(e),r=0;r<t.length;r++){var l=t[r];p(l)?m(l,n,e[l]):u(l)&&g(l,n,e[l])}}function $(e,n){var t=w();return null!==n&&n.appendChild(t),l(e)||(e.dom=t),t}function ee(e,t,a,f,d,c){if(o(e)||n(e))return $(e,t);var s=void 0;if(r(e))return s=document.createTextNode(e),null!==t&&t.appendChild(s),s;if(se&&(s=q(e,f,d,c)))return t&&t.appendChild(s),s;var p=e.tag;if(null===p)return $(e,t);if(i(p))return Y(e,p,e.attrs||{},e.hooks,e.children,t,f,d);a=a||"svg"===p?de:"math"===p?fe:null;var v=e.tpl;if(l(v)||l(v.dom)){if(!u(p)||""===p)throw Error("Inferno Error: Expected function or string for element tag type");s=k(p,a)}else s=v.dom.cloneNode(!0);var h=e.children,m=e.attrs,y=e.events,g=e.hooks,C=e.className,b=e.style;return e.dom=s,l(g)||(l(g.created)||g.created(s),l(g.attached)||f.addListener(function(){g.attached(s)})),l(y)||Z(y,e),o(h)||R(e,h,s,a,f,d,c),l(m)||ne(e,m,s,c),l(C)||(s.className=C),l(b)||B(null,b,s),null!==t&&t.appendChild(s),s}function ne(e,n,t,r){"select"===e.tag&&T(e);for(var l=Object.keys(n),o=0;o<l.length;o++){var i=l[o];"ref"===i?X(r,n[i],t):L(i,n[i],t)}}function te(e){for(var n=0;n<pe.length;n++){var t=pe[n];if(t.dom===e)return t}return null}function re(e){for(var n=0;n<pe.length;n++){var t=pe[n];if(t===e)return void pe.splice(n,1)}}function le(e,n){var t=te(n),r=new ie;if(null===t)ee(e,n,null,r,{},null),r.trigger(),pe.push({node:e,dom:n});else{var l=S();D(t.node,e,n,null,r,{},null,null),r.trigger(),null===e&&re(t),t.node=e,U(l)}}var oe={};oe.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},oe.classCallCheck=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},oe.createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),oe.extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};var ie=function(){function e(){oe.classCallCheck(this,e),this._listeners=[]}return oe.createClass(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"trigger",value:function(){for(var e=0;e<this._listeners.length;e++)this._listeners[e]()}}]),e}(),ae={},ue={focus:!0,blur:!0,mouseenter:!0,mouseleave:!0,scroll:!0,load:!0,error:!0},fe="http://www.w3.org/1998/Math/MathML",de="http://www.w3.org/2000/svg",ce={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},se=!0,pe=[],ve={render:le};return ve});