!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e,t){if(!l(e)){var r=n(e);(r&&e.length>0||!r)&&(t?t.children=e:t={children:e})}return t}function n(e){return e.constructor===Array}function t(e){return!l(e)&&!l(e.prototype.render)}function r(e){return"string"==typeof e||"number"==typeof e}function l(e){return void 0===e||null===e}function o(e){return void 0===e||null===e||e===!1}function i(e){return"function"==typeof e}function a(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function d(e){return"string"==typeof e}function u(e){return e&&e.then}function f(e,n,t){e.splice(e.indexOf(n),1,t)}function s(e,t,r,o){if(e.dom===t)return r.callback(o),!0;var i=e.children;if(!l(i))if(n(i))for(var a=0;a<i.length;a++){var d=i[a];if("object"===("undefined"==typeof d?"undefined":le.typeof(d))){var u=s(d,t,r,o);if(u)return!0}}else if(!l(i.dom)){var f=s(i,t,r,o);if(f)return!0}}function c(e){return ae[e]||!1}function v(e){for(var n=ie[e.type],t=n.length-1;t>-1;t--){var r=n[t],l=r.node,o=e.target;s(l,o,r,e)}}function p(e,n){if(!l(n)){var t=ie[e];if(!l(t))for(var r=0;r<t.length;r++){var o=t[r];if(o.callback===n)return void t.splice(r,1)}}}function h(e,n,t){n.dom.addEventListener(e,t,!1)}function m(e,n,t){n.dom.removeEventListener(e,t)}function g(e,n,t){var r=ie[e];l(r)?(document.addEventListener(e,v,!1),ie[e]=[{callback:t,node:n}]):r.push({callback:t,node:n})}function y(e,n,t){l(t)?void 0!==n.append?n.append(e):e.appendChild(n):void 0!==n.insert?n.insert(e,t):void 0!==t.insert?e.insertBefore(n,t.childNodes[0]):e.insertBefore(n,t)}function C(e,n){return l(n)?document.createElement(e):document.createElementNS(n,e)}function k(e,n,t){if(!t){var r=document.createTextNode(e);return n.appendChild(r),r}if(""===e){var l=document.createTextNode("");return n.appendChild(l),l}n.textContent=e}function b(e,n,t,r,o,i,a){var d=null,u=e._lastNode;l(u)||(d=e,e=u);var f=$(n,null,r,o,i,a);n.dom=f,t.replaceChild(f,e.dom),null!==d&&(d._lastNode=n),x(e,fe&&!l(e.tpl))}function x(e,t){if(!o(e)&&!r(e)){var i=e.instance,a=!l(i),d=null,u=null,f=null;a&&(d=i.hooks,u=i.events,f=i.children,void 0!==i.render&&(i.componentWillUnmount(),i._unmounted=!0));var s=e.hooks||d;l(s)||(l(s.willDetach)||s.willDetach(e.dom),l(s.componentWillUnmount)||s.componentWillUnmount(e.dom,s),t===!1&&(l(d)?e.hooks=null:i.hooks=null));var v=e.events||u;if(!l(v))for(var h in v)c(h)?m(h,e,v[h]):p(h,v[h]);var g=e.children||f;if(!l(g)){if(n(g))for(var y=0;y<g.length;y++)x(g[y]);else x(g);if(t===!1){e.children=null;var C=e.domChildren;l(C)||(e.domChildren=null)}}}}function N(){return document.createTextNode("")}function w(e,n){var t=e.dom;t===n?(t.innerHTML="",x(e,fe&&!l(e.tpl))):(n.removeChild(t),fe?(F(e),x(e,!l(e.tpl))):x(e,!1))}function O(e,n,t){for(var r=0;r<n.length;r++)e.insertBefore(n[r],t)}function j(){return document.activeElement}function U(e){e!==document.body&&document.activeElement!==e&&e.focus()}function S(){var e=[],n=document.createTextNode(""),t=null,r={childNodes:e,appendChild:function(r){e.push(r),t&&t.insertBefore(r,n)},removeChild:function(n){t&&t.removeChild(n),e.splice(e.indexOf(n),1)},insertBefore:function(n,r){t&&t.insertBefore(n,r),e.splice(e.indexOf(r),0,n)},replaceChild:function(n,r){t.replaceChild(n,r),f(e,r,n)},append:function(r){r.appendChild(n),t=r,O(t,e,n)},insert:function(r,l){r.insertBefore(n,l),t=r,O(t,e,n)},remove:function(){t.removeChild(n);for(var r=0;r<e.length;r++)t.removeChild(e[r]);t=null},getElementsByTagName:null};return Object.defineProperty(r,"parentNode",{get:function(){return t}}),Object.defineProperty(r,"firstChild",{get:function(){return e[0]}}),r}function _(e,n){return n.length&&!l(n[0])&&!l(n[0].key)||e.length&&!l(e[0])&&!l(e[0].key)}function E(e,n){if("option"===e.tag){var t=e.attrs&&e.attrs.value;n[t]&&(e.attrs=e.attrs||{},e.attrs.selected="selected")}else for(var r=0,l=e.children.length;l>r;r++)E(e.children[r],n)}function M(e){if("select"===e.tag){var t=e.attrs&&e.attrs.value;if(!l(t)){var r={};if(n(t))for(var o=0,i=t.length;i>o;o++)r[t[o]]=t[o];else r[t]=t;E(e,r),e.attrs&&e.attrs[t]&&delete e.attrs.value}}}function T(e){switch(e.length){case 5:return"value"===e;case 7:return"checked"===e;case 8:return"disabled"===e||"selected"===e;default:return!1}}function B(e,n,t){r(n)?e.firstChild.nodeValue=t:e.textContent=t}function D(e,n,t,l,i,a,d,u){if(null!==u)q(e,n,t,l,i,a,d,u);else if(o(e))$(n,t,l,i,a,d);else if(o(n))w(e,t);else if(r(e))if(r(n))t.firstChild.nodeValue=n;else{var f=$(n,null,l,i,a,d);n.dom=f,t.replaceChild(f,t.firstChild)}else if(r(n)){var s=document.createTextNode(n);t.replaceChild(s,e.dom)}else q(e,n,t,l,i,a,d,null!==e.tpl&&null!==n.tpl)}function L(e,n,t){if(d(n))t.style.cssText=n;else if(l(e)){if(!l(n))for(var r=Object.keys(n),o=0;o<r.length;o++){var i=r[o],a=n[i];t.style[i]=a}}else if(l(n))t.removeAttribute("style");else{for(var u=Object.keys(n),f=0;f<u.length;f++){var s=u[f],c=n[s];t.style[s]=c}for(var v=Object.keys(e),p=0;p<v.length;p++){var h=v[p];l(n[h])&&(t.style[h]="")}}}function W(e,n,t){if(!a(e)){if(T(e))return void(t[e]=n);n===!1||l(n)?t.removeAttribute(e):":"===e[5]&&-1!==e.indexOf("xlink:")?t.setAttributeNS("http://www.w3.org/1999/xlink",e,n===!0?e:n):":"===e[4]&&-1!==e.indexOf("xml:")?t.setAttributeNS("http://www.w3.org/XML/1998/namespace",e,n===!0?e:n):t.setAttribute(e,n===!0?e:n)}}function A(n,r,o,i,a,d,u,f,s,c){if(a=e(u,a),t(r)){var v=o.props,p=o.state,h=o.state,m=o.getChildContext();l(m)||(c=le.extends({},c,m)),o.context=c;var g=o._updateComponent(p,h,v,a);l(g)||(q(n,g,f,null,s,c,o,!0),n.dom=g.dom,o._lastNode=g)}else{var y=!0,C=!l(d);if(C&&!l(d.componentShouldUpdate)&&(y=d.componentShouldUpdate(n.dom,i,a)),y!==!1){C&&!l(d.componentWillUpdate)&&d.componentWillUpdate(n.dom,i,a);var k=r(a),b=n.dom;k.dom=b,q(o,k,b,null,s,c,null,!0),n.instance=k,C&&!l(d.componentDidUpdate)&&d.componentDidUpdate(n.dom,i,a)}}}function V(e,t,i,a,d,u,f,s,c){var v=void 0===i.append,p=e.length,h=t.length,m=p===h;if(m===!1)if(p>h)for(;p!==h;){var g=e[p-1];o(g)||(i.removeChild(a[p-1+c]),x(g)),p--}else for(;p!==h;){var C=t[p],k=$(C,null,d,u,f,s);y(i,k),v&&(1===p&&a.push(i.firstChild),v&&a.splice(p+c,0,k)),p++}for(var b=0;h>b;b++){var w=e[b],O=t[b],j=b+c;if(w!==O)if(o(O)){if(!o(w)){var U=a[j];if(!l(U))if(r(w))U.nodeValue="";else if(m===!0){var E=N();n(w)&&0===w.length?(y(i,E),v&&a.splice(j,0,E)):(i.replaceChild(E,a[j]),v&&a.splice(j,1,E),x(w,fe&&!l(w.tpl)))}}}else if(o(w)){if(r(O)){var M=document.createTextNode(O);i.replaceChild(M,a[j]),v&&a.splice(j,1,M)}else if(m===!0){var T=$(O,null,d,u,f,s);i.replaceChild(T,a[j]),v&&a.splice(j,1,T)}}else if(r(O))if(1===p)r(w)?void 0!==i.getElementsByTagName?i.firstChild.nodeValue=O:i.nodeValue=O:(x(w,fe&&!l(w.tpl)),i.textContent=O);else{var B=document.createTextNode(O),L=a[j];l(L)?i.nodeValue=B.nodeValue:void 0===L.append?(v&&a.splice(j,1,B),i.replaceChild(B,L)):(i.insertBefore(B,L.firstChild),L.remove(),a.splice(0,a.length,B)),x(w,fe&&!l(w.tpl))}else if(n(O))if(_(w,O))P(w,O,a[j],d,u,f,s);else if(n(w)){var W=a[j];if(void 0===W.append)if(O.length>1&&1===w.length){var A=S();A.insert(i,W),A.appendChild(W),v&&a.splice(j,1,A),V(w,O,A,A.childNodes,d,u,f,s,0)}else V(w,O,i,a,d,u,f,s,0);else V(w,O,a[j],a[j].childNodes,d,u,f,s,0)}else if(O.length>1){var I=S();I.appendChild(i.firstChild),y(i,I,i.firstChild),v&&a.splice(j,1,I),V([w],O,I,I.childNodes,d,u,f,s,b)}else V([w],O,i,a,d,u,f,s,b);else n(w)?V(w,[O],a,a[j].childNodes,d,u,f,s,0):D(w,O,i,d,u,f,s,null)}}function P(e,n,t,r,o,i,a){var d=n.length,u=e.length;if(0===d&&u>=5){if(fe)for(var f=0;u>f;f++)F(e[f]);return void(t.textContent="")}var s=void 0,c=!1,v=0,p=0,h=d-1,m=u-1,g=u>0?e[p]:null,C=d>0?n[v]:null,k=void 0,b=void 0,x=void 0;e:for(;!c&&h>=v&&m>=p;){for(c=!0;C.key===g.key;){if(q(g,C,t,r,o,i,a,!0),v++,p++,v>h||p>m)break e;C=n[v],g=e[p],c=!1}for(k=n[h],b=e[m];k.key===b.key;){if(q(b,k,t,r,o,i,a,!0),h--,m--,v>h||p>m)break e;k=n[h],b=e[m],c=!1}for(;k.key===g.key;){if(x=d>h+1?n[h+1].dom:null,q(g,k,t,r,o,i,a,!0),y(t,k.dom,x),h--,p++,v>h||p>m)break e;k=n[h],g=e[p],c=!1}for(;C.key===b.key;){if(x=e[p].dom,q(b,C,t,r,o,i,a,!0),y(t,C.dom,x),v++,m--,v>h||p>m)break e;C=n[v],b=e[m],c=!1}}if(p>m){if(h>=v)for(x=d>h+1?n[h+1].dom:null;h>=v;v++)y(t,$(n[v],null,r,o,i,a),x)}else if(v>h)for(;m>=p;p++)s=e[p],w(s,t);else{for(var N=new Map,O=p;m>=O;O++)s=e[O],N.set(s.key,s);x=d>h+1?n[h+1]:null;for(var j=h;j>=v;j--){var U=n[j],S=U.key;s=N.get(S),x=l(x)?void 0:x.dom,void 0===s?y(t,$(U,null,r,o,i,a),x):(N.delete(S),q(s,U,t,r,o,i,a,!0),U.dom.nextSibling!==x&&y(t,U.dom,x)),x=U}for(var _=p;m>=_;_++)s=e[_],N.has(s.key)&&w(s,t)}}function I(e,t,i,a,d,u,f,s){var c=t.children,v=e.children;if(v!==c){var p=null;e.domChildren&&(p=t.domChildren=e.domChildren),o(v)?r(c)?B(i,v,c):l(c)||"object"===("undefined"==typeof c?"undefined":le.typeof(c))&&(n(c)?J(t,c,i,a,d,u,f):$(c,i,a,d,u,f)):o(c)?i.textContent="":n(v)?n(c)?null===p&&v.length>1?P(v,c,i,a,d,u,f):_(v,c)?P(v,c,i,a,d,u,f):V(v,c,i,p||(t.domChildren=[]),a,d,u,f,0):V(v,[c],i,p||[],a,d,u,f,0):n(c)?V([v],c,i,p||(t.domChildren=[i.firstChild]),a,d,u,f,0):r(c)?B(i,v,c):r(v)?D(v,c,i,a,d,u,f,null):D(v,c,i,a,d,u,f,s)}}function K(e,n,t,r){e&&(d(n)&&delete e.refs[n],d(t)&&(e.refs[t]=r))}function H(e,n,t,r){"select"===e.tag&&M(n);var o=n.attrs,i=e.attrs,a=l(o),d=l(i);if(!a)for(var u=Object.keys(o),f=u.length,s=0;f>s;s++){var c=u[s],v=!d&&i[c],p=o[c];v!==p&&("ref"===c?K(r,v,p,t):W(c,p,t))}if(!d)for(var h=Object.keys(i),m=h.length,g=0;m>g;g++){var y=h[g];(a||l(o[y]))&&("ref"===y?K(r,i[y],null,t):t.removeAttribute(y))}}function X(e,n){var t=e.events;if(!l(t)){var r=Object.keys(t),o=n.events;if(l(o))for(var i=0;i<r.length;i++){var a=r[i],d=t[a];c(a)?m(a,e,d):p(a,d)}else for(var u=0;u<r.length;u++){var f=r[u],s=o[f],v=t[f];l(s)?c(f)?m(f,e,v):p(f,v):s!==v&&(c(f)?(m(f,e,v),h(f,n,s)):(p(f,v),g(f,n,s)))}}}function q(e,n,r,o,a,d,u,f){if(void 0!==n.then)n.then(function(n){q(e,n,r,o,a,d,f,u)});else{var s=n.hooks,c=!l(s);c&&!l(s.willUpdate)&&s.willUpdate(e.dom);var v=n.tag||(f&&n.tpl?n.tpl.tag:null),p=e.tag||(f&&e.tpl?e.tpl.tag:null);if(o=o||"svg"===v?ue:"math"===v?de:null,p!==v){var h=e.instance;i(p)?i(v)?b(h||e,n,r,o,a,d,u):t(p)?q(h._lastNode,n,r,o,a,d,u,!0):q(h,n,r,o,a,d,u,!0):b(h||e,n,r,o,a,d,u)}else if(l(p))n.dom=e.dom;else if(i(p))i(v)&&(n.instance=e.instance,n.dom=e.dom,A(n,n.tag,n.instance,e.attrs||{},n.attrs||{},n.hooks,n.children,r,a,d));else{var m=e.dom,g=n.className,y=n.style;n.dom=m,e!==n&&(I(e,n,m,o,a,d,u,f),H(e,n,m,u),X(e,n)),e.className!==g&&(l(g)?m.removeAttribute("class"):m.className=g),e.style!==y&&L(e.style,y,m),c&&!l(s.didUpdate)&&s.didUpdate(m)}}}function z(e,n,t,r){var o=e.tpl;if(!l(o)){var i=e.key,a=null===i?o.pools.nonKeyed:o.pools.keyed[i];if(!l(a)){var d=a.pop();if(!l(d))return q(d,e,null,null,n,t,r,!0),e.dom}}}function F(e){var n=e.tpl;if(!l(n)){var t=e.key,r=n.pools;if(null===t){var o=r.nonKeyed;o&&o.push(e)}else{var i=r.keyed;(i[t]||(i[t]=[])).push(e)}return!0}return!1}function G(e,n,t,r,l,o,i){var a=N();t&&t.push(a),e.then(function(e){var d=$(e,null,r,l,o,i);n.replaceChild(d,a),t&&f(t,a,d)}),n.appendChild(a)}function J(e,t,i,a,d,f,s){var c=[],v=!1,p=!1;if(n(t))for(var h=0;h<t.length;h++){var m=t[h];if(r(m))v=!0,c.push(k(m,i,!1));else if(!l(m)&&n(m)){var g=S();v=!0,J(e,m,g,a,d,f,s),y(i,g),c.push(g)}else if(u(m))G(m,i,c,a,d,f,s);else{var C=$(m,i,a,d,f,s);v||!p&&m&&l(m.key)?(v=!0,c.push(C)):o(m)?(v=!0,c.push(C)):p===!1&&(p=!0)}}else r(t)?k(t,i,!0):u(t)?G(t,i,null,a,d,f,s):$(t,i,a,d,f,s);c.length>1&&v===!0&&(e.domChildren=c)}function Q(e,n,t){!o(e)&&d(n)&&(e.refs[n]=t)}function R(n,r,o,i,a,d,u,f){o=e(a,o);var s=void 0;if(t(r)){var c=new r(o);c._diffNodes=q;var v=c.getChildContext();l(v)||(f=le.extends({},f,v)),c.context=f,c._pendingSetState=!0,c.componentWillMount();var p=c.shouldComponentUpdate();if(p){c.componentWillUpdate();var h=c._pendingState,m=c.state;c.state=le.extends({},m,h)}var g=c.render();return c._pendingSetState=!1,l(g)||(s=$(g,null,null,u,f,c),c._lastNode=g,null!==d&&d.appendChild(s),c.componentDidMount(),c.componentDidUpdate()),n.dom=s,n.instance=c,s}l(i)||(l(i.componentWillMount)||i.componentWillMount(null,o),l(i.componentDidMount)||u.addListener(function(){i.componentDidMount(s,o)}));var y=r(o);return s=$(y,null,null,u,f,null),n.instance=y,null!==d&&d.appendChild(s),n.dom=s,s}function Y(e,n){for(var t=Object.keys(e),r=0;r<t.length;r++){var l=t[r];c(l)?h(l,n,e[l]):d(l)&&g(l,n,e[l])}}function Z(e,n){var t=N();return null!==n&&n.appendChild(t),o(e)||(e.dom=t),t}function $(e,t,a,u,f,s){if(o(e)||n(e))return Z(e,t);var c=void 0;if(r(e))return c=document.createTextNode(e),null!==t&&t.appendChild(c),c;if(fe&&(c=z(e,u,f,s),!l(c)))return null!==t&&t.appendChild(c),c;var v=e.tag;if(null===v)return Z(e,t);if(i(v))return R(e,v,e.attrs||{},e.hooks,e.children,t,u,f);a=a||"svg"===v?ue:"math"===v?de:null;var p=e.tpl;if(l(p)||l(p.dom)){if(!d(v)||""===v)throw Error("Inferno Error: Expected function or string for element tag type");c=C(v,a)}else c=p.dom.cloneNode(!0);var h=e.children,m=e.attrs,g=e.events,y=e.hooks,k=e.className,b=e.style;return e.dom=c,l(y)||(l(y.created)||y.created(c),l(y.attached)||u.addListener(function(){y.attached(c)})),l(g)||Y(g,e),o(h)||J(e,h,c,a,u,f,s),l(m)||ee(e,m,c,s),l(k)||(c.className=k),l(b)||L(null,b,c),null!==t&&t.appendChild(c),c}function ee(e,n,t,r){"select"===e.tag&&M(e);for(var l=Object.keys(n),o=0;o<l.length;o++){var i=l[o];"ref"===i?Q(r,n[i],t):W(i,n[i],t)}}function ne(e){for(var n=0;n<se.length;n++){var t=se[n];if(t.dom===e)return t}return null}function te(e){for(var n=0;n<se.length;n++){var t=se[n];if(t===e)return void se.splice(n,1)}}function re(e,n){var t=ne(n),r=new oe;if(null===t)$(e,n,null,r,{},null),r.trigger(),se.push({node:e,dom:n});else{var l=j();D(t.node,e,n,null,r,{},null,null),r.trigger(),null===e&&te(t),t.node=e,U(l)}}var le={};le.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},le.classCallCheck=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},le.createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),le.extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};var oe=function(){function e(){le.classCallCheck(this,e),this._listeners=[]}return le.createClass(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"trigger",value:function(){for(var e=0;e<this._listeners.length;e++)this._listeners[e]()}}]),e}(),ie={},ae={focus:!0,blur:!0,mouseenter:!0,mouseleave:!0,scroll:!0,load:!0,error:!0},de="http://www.w3.org/1998/Math/MathML",ue="http://www.w3.org/2000/svg",fe=!0,se=[],ce={render:re};return ce});