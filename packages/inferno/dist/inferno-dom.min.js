!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e,t){if(!o(e)){var r=n(e);(r&&e.length>0||!r)&&(t?t.children=e:t={children:e})}return t}function n(e){return e.constructor===Array}function t(e){return!o(e)&&e.prototype&&e.prototype.render}function r(e){return"string"==typeof e||"number"==typeof e}function o(e){return void 0===e||null===e}function l(e){return void 0===e||null===e||e===!1}function i(e){return"function"==typeof e}function a(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function u(e){return"string"==typeof e}function d(e){return"number"==typeof e}function f(e,n,t){o(t)?e.appendChild(n):e.insertBefore(n,t)}function c(e,n){return n?document.createElementNS(n,e):document.createElement(e)}function s(e,n,t){if(t)""!==e?n.textContent=e:n.appendChild(document.createTextNode(""));else{var r=document.createTextNode(e);n.appendChild(r)}}function v(e,n,t,o,l,i){var a=void 0;r(n)?(a=document.createTextNode(n),t.replaceChild(a,a)):r(e)?(a=A(n,null,o,l,i),n.dom=a,t.replaceChild(a,t.firstChild)):(a=A(n,null,o,l,i),n.dom=a,t.replaceChild(a,e.dom))}function p(e){if(!l(e)){var t=e.instance;t&&void 0!==t.render&&(t.componentWillUnmount(),t._unmounted=!0);var r=e.events;r&&!o(r.willDetach)&&r.willDetach(e.dom),r&&!o(r.componentWillUnmount)&&r.componentWillUnmount(e.dom,r);var i=e.children;if(!o(i))if(n(i))for(var a=0;a<i.length;a++)p(i[a]);else p(i)}}function m(e,n){var t=e.dom;p(e),t===n?t.innerHTML="":(n.removeChild(t),q&&M(e))}function h(e){switch(e.length){case 5:return"value"===e;case 7:return"checked"===e;case 8:return"disabled"===e||"selected"===e;default:return!1}}function y(e,n,t,r,o,i){return l(e)?void A(n,t,r,o):l(n)?void m(e,t):void w(e,n,t,r,o,i,null!==e.tpl&&null!==n.tpl)}function g(e,n,t){if(u(n))t.style.cssText=n;else if(o(e)){if(!o(n))for(var r=Object.keys(n),l=0;l<r.length;l++){var i=r[l],a=n[i];d(a)&&(a+="px"),t.style[i]=a}}else if(o(n))t.removeAttribute("style");else{for(var r=Object.keys(n),l=0;l<r.length;l++){var i=r[l],a=n[i];d(a)&&(a+="px"),t.style[i]=a}for(var f=Object.keys(e),l=0;l<f.length;l++){var i=f[l];n[i]||(t.style[i]="")}}}function k(e,n,t,r){if(!a(e)){if(h(e))return void(r[e]=t);var l=null;":"===e[5]&&-1!==e.indexOf("xlink:")&&(l="http://www.w3.org/1999/xlink"),t===!1||o(t)?r.removeAttribute(e):l?r.setAttributeNS(l,e,t===!0?e:t):r.setAttribute(e,t===!0?e:t)}}function b(n,r,o,l,i,a,u,d,f,c){if(i=e(u,i),t(r)){var s=o.props,v=o.state,p=o.state,m=o.getChildContext();m&&(c=P.extends({},c,m)),o.context=c;var h=o._updateComponent(v,p,s,i);h&&(w(n,h,d,null,f,c,!0),n.dom=h.dom,o._lastNode=h)}else{var y=!0;if(a&&a.componentShouldUpdate&&(y=a.componentShouldUpdate(n.dom,l,i)),y!==!1){a&&a.componentWillUpdate&&a.componentWillUpdate(n.dom,l,i);var h=r(i),g=n.dom;h.dom=g,w(o,h,g,null,f,c,!0),n.instance=h,a&&a.componentDidUpdate&&a.componentDidUpdate(n.dom,l,i)}}}function C(e,t,o,i,a,u,d){var f=e.length,c=t.length;if(f>c)for(var s=void 0;f!==c;){var v=e[f-1];l(v)||o.removeChild((s=v.dom)||s&&(s=s.previousSibling)||(s=o.lastChild)),f--}else if(c>f)for(var p=0;f!==c;){var m=t[f+p];if(l(m));else{var h=A(m,null,i,i,a,u);o.appendChild(h)}c--,p++}for(var g=void 0,k=0;c>k;k++){var v=e[k],m=t[k];if(v!==m)if(l(m))l(v)||(g=g||o.childNodes,g[k+d].textContent="");else if(l(v))if(r(m))g=g||o.childNodes,g[k+d].textContent=m;else{var h=A(m,null,i,a,u);o.replaceChild(h,o.childNodes[k])}else"object"===("undefined"==typeof m?"undefined":P.typeof(m))?n(m)?n(v)?C(v,m,o,i,a,u,k):C([v],m,o,i,a,u,k):y(v,m,o,i,a,u):(g=g||o.childNodes,g[k+d].textContent=m)}}function x(e,n,t,r,o,l,i){var a=!1,u=0,d=0,c=n.length,s=e.length,v=void 0;if(0===c&&s>=5){if(q)for(var p=0;s>p;p++)M(e[p]);return void(t.textContent="")}var h=c-1,y=s-1,g=s>0?e[d]:null,k=c>0?n[u]:null,b=void 0,C=void 0,x=void 0;e:for(;!a&&h>=u&&y>=d;){for(a=!0;k.key===g.key;){if(w(g,k,t,r,o,l,!0),u++,d++,u>h||d>y)break e;k=n[u],g=e[d],a=!1}for(b=n[h],C=e[y];b.key===C.key;){if(w(C,b,t,r,o,l,!0),h--,y--,u>h||d>y)break e;b=n[h],C=e[y],a=!1}for(;b.key===g.key;){if(x=c>h+1?n[h+1].dom:i,w(g,b,t,r,o,l,!0),f(t,b.dom,x),h--,d++,u>h||d>y)break e;b=n[h],g=e[d],a=!1}for(;k.key===C.key;){if(x=e[d].dom,w(C,k,t,r,o,l,!0),f(t,k.dom,x),u++,y--,u>h||d>y)break e;k=n[u],C=e[y],a=!1}}if(d>y){if(h>=u)for(x=c>h+1?n[h+1].dom:i;h>=u;u++)f(t,A(n[u],null,r,o,l),x)}else if(u>h)for(;y>=d;d++)v=e[d],m(v,t);else{for(var N={},p=d;y>=p;p++)v=e[p],N[v.key]=v;x=c>h+1?n[h+1]:null;for(var p=h;p>=u;p--){var j=n[p],O=j.key;v=N[O],void 0!==v?(N[O]=null,w(v,j,t,r,o,l,!0),j.dom.nextSibling!==x&&(x=x&&x.dom||i,f(t,j.dom,x)),x=j):(x=x&&x.dom||i,f(t,A(j,null,r,o,l),x)),x=j}for(var p=d;y>=p;p++)v=e[p],null!==N[v.key]&&m(v,t)}}function w(e,n,l,a,u,d,f){if(n!==!1&&null!==n){if(r(e))return void(r(n)?l.firstChild.nodeValue=n:v(e,n,l,a,u,d));var c=n.tag||(f&&n.tpl?n.tpl.tag:null),s=e.tag||(f&&e.tpl?e.tpl.tag:null),p=n.events;if(!o(p)&&p.willUpdate&&p.willUpdate(e.dom),a=a||"svg"===c?V:"math"===c?H:null,s!==c)return void(i(s)&&!i(c)?t(s)?w(e.instance._lastNode,n,l,a,u,d,!0):w(e.instance,n,l,a,u,d,!0):v(e,n,l,a,u,d));if(o(s))return void(n.dom=e.dom);if(i(s)&&i(c))return n.instance=e.instance,n.dom=e.dom,void b(n,n.tag,n.instance,e.attrs||{},n.attrs||{},n.events,n.children,l,u,d);var m=e.dom;n.dom=m,N(e,n,m,a,u,d,f);var h=n.className,y=n.style;e.className!==h&&(o(h)?m.removeAttribute("class"):m.className=h),e.style!==y&&g(e.style,y,m),j(e,n,m),O(e,n,m),!o(p)&&p.didUpdate&&p.didUpdate(m)}}function N(e,t,i,a,u,d,f){var c=t.children,s=e.children;if(s!==c)if(l(s))r(c)?i.textContent=c:o(c)||"object"===("undefined"==typeof c?"undefined":P.typeof(c))&&(n(c)?_(c,i,a,u,d):A(c,i,a,u,d));else if(l(c))i.textContent="";else if(n(s))if(n(c)){var v=c.length&&c[0]&&!o(c[0].key)||s.length&&s[0]&&!o(s[0].key);v?x(s,c,i,a,u,d,null):C(s,c,i,a,u,d,null)}else C(s,[c],i,a,u,d,null);else n(c)?C([s],c,i,a,u,d,null):w(s,c,i,a,u,d,f)}function j(e,n,t){var r=n.attrs,l=e.attrs;if(!o(r))for(var i=Object.keys(r),a=i.length,u=0;a>u;u++){var d=i[u],f=l&&l[d],c=r[d];f!==c&&k(d,f,c,t,null===e.tag)}if(!o(l))for(var s=Object.keys(l),a=s.length,u=0;a>u;u++){var d=s[u];r&&!o(r[d])||t.removeAttribute(d)}}function O(e,n,t){}function U(e,n,t){var r=e.key,o=e.tpl,l=void 0;if(o){if(null!==r){var i=o.pools.keyed[r];l=i&&i.pop()}else{var i=o.pools.nonKeyed;l=i&&i.pop()}if(l)return w(l,e,null,null,n,t,!0),e.dom}}function M(e){var n=e.key,t=e.tpl;if(!o(t)){var r=t.pools;if(null===n){var l=r.nonKeyed;l&&l.push(e)}else{var i=r.keyed;(i[n]||(i[n]=[])).push(e)}}}function S(e,n,t){if(z[e]){var r=z[e];r.push({callback:t,target:n})}else document.addEventListener(e,function(n){for(var t=z[e],r=t.length-1;r>-1;r--){var o=t[r];o.target===n.target&&o.callback(n)}},!1),z[e]=[]}function _(e,t,o,l,i){if(n(e))for(var a=0;a<e.length;a++){var u=e[a];r(u)?s(u,t,!1):u&&n(u)?_(u,t,o,l,i):A(u,t,o,l,i)}else r(e)?s(e,t,!0):A(e,t,o,l,i)}function D(n,r,l,i,a,u,d,f){l=e(a,l);var c=void 0;if(t(r)){var s=new r(l);s._diffNodes=w;var v=s.getChildContext();o(v)||(f=P.extends({},f,v)),s.context=f,s.componentWillMount();var p=s.render();return o(p)||(c=A(p,null,null,d,f),s._lastNode=p,null!==u&&u.appendChild(c),d.addListener(s.componentDidMount)),n.dom=c,n.instance=s,c}o(i)||(i.componentWillMount&&i.componentWillMount(null,l),i.componentDidMount&&d.addListener(function(){i.componentDidMount(c,l)}));var m=r(l);return c=A(m,null,null,d,f),n.instance=m,null!==u&&u.appendChild(c),n.dom=c,c}function T(e,n,t){for(var r=0;r<n.length;r++){var o=n[r];u(o)&&S(o,t,e[o])}}function W(e,n){var t=document.createTextNode("");return null!==n&&n.appendChild(t),e&&(e.dom=t),t}function A(e,t,a,d,f){var s=void 0;if(l(e)||n(e))return W(e,t);if(r(e)){var v=document.createTextNode(e);return null!==t&&t.appendChild(v),v}if(q&&(s=U(e,d,f)))return t&&t.appendChild(s),s;var p=e.tpl,m=e.tag;if(null===m)return W(e,t);if(i(m))return D(e,m,e.attrs||{},e.events,e.children,t,d,f);if(a=a||"svg"===m?V:"math"===m?H:null,p&&p.dom)s=p.dom.cloneNode(!0);else{if(!u(m))throw Error("Inferno Error: Expected function or string for element tag type");s=c(m,a)}var h=e.children,y=e.attrs,k=e.events,b=e.className,C=e.style;if(!o(k)){var x=Object.keys(k),w=x.length;k.click&&(S("click",s,k.click),w--),k.created&&(k.created(s),w--),k.attached&&(d.addListener(function(){k.attached(s)}),w--),w>0&&T(k,x,s)}return l(h)||_(h,s,a,d,f),o(y)||E(y,s),o(b)||(s.className=b),o(C)||g(null,C,s),e.dom=s,null!==t&&t.appendChild(s),s}function E(e,n){for(var t=Object.keys(e),r=0;r<t.length;r++){var o=t[r];k(o,null,e[o],n)}}function L(e){for(var n=0;n<F.length;n++){var t=F[n];if(t.dom===e)return t}return null}function I(e){for(var n=0;n<F.length;n++){var t=F[n];if(t===e)return F.splice(n,1),!0}return!1}function K(e,n){var t=L(n),r=new B;o(t)?(A(e,n,null,r,{}),r.trigger(),F.push({node:e,dom:n})):(y(t.node,e,n,null,r,{}),r.trigger(),null===e&&I(t),t.node=e)}var P={};P.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},P.classCallCheck=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},P.createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),P.extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};var B=function(){function e(){P.classCallCheck(this,e),this._listeners=[]}return P.createClass(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"trigger",value:function(){for(var e=0;e<this._listeners.length;e++)this._listeners[e]()}}]),e}(),H="http://www.w3.org/1998/Math/MathML",V="http://www.w3.org/2000/svg",q=!0,z={},F=[],G={render:K};return G});