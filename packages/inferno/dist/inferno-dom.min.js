!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e){return e instanceof Array}function n(e){return i(e)||l(e)}function t(e){return a(e)||u(e)}function r(e){return u(e)||e===!1||f(e)||a(e)}function o(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function i(e){return"string"==typeof e}function l(e){return"number"==typeof e}function u(e){return null===e}function f(e){return e===!0}function a(e){return void 0===e}function c(e){throw e||(e=re),new Error("Inferno Error: "+e)}function d(e){return e.type===ie.TEMPLATE}function s(e){return e.type===ie.TEXT}function p(e){return e.type===ie.FRAGMENT}function m(e){return e===ue.UNKNOWN}function h(e){return e===ue.KEYED}function v(e){return e===ue.NON_KEYED}function E(e,n,t,r,o,i){K(t,G(n,null,r,o,i),e.dom),L(e,null,r)}function y(e,n,t,r,o,i){e!==n&&(d(n)?d(e)?k(e,n,t,r,o,i):(K(t,q(n,null,r,o,i),e.dom),L(e,null,r)):d(e)?E(e,n,t,r,o,i):s(n)?s(e)&&g(e,n):p(n)?p(e)?b(e,n,t,r,o,i):(K(t,mountVFragment(n,null,r,o,i),e.dom),L(e,null,r)):c())}function N(t,o,i,l,u,f){if(r(o))r(t)||F(i,t,l);else if(r(t))n(o)?R(i,o):r(o)||(e(o)?mountArrayChildrenWithoutType(o,i,l,u,f):G(o,i,l,u,f));else if(n(o))n(t)?M(i,o):R(i,o);else if(n(t)){var a=P(t);a.dom=i.firstChild,N(a,o,i,l,u,f)}else e(o)?e(t)?(o.complex=t.complex,W(t,o)?C(t,o,i,l,u,f,null):_(t,o,i,l,u,f,null)):_([t],o,i,l,u,f,null):e(t)?_(t,[o],i,l,u,f,null):y(t,o,i,l,u,f)}function g(e,n){var t=n.text,r=e.dom;n.dom=r,e.text!==t&&(r.nodeValue=t)}function k(e,n,t,r,o,i){var l=e.dom,u=e.bp,f=n.bp;if(n.dom=l,u!==f){var c=q(n,null,r,o,i);K(t,c,l),L(e,null,r,!0)}else{var d=n.v0;if(!a(d)){var s=e.v0,p=n.v1;if(s!==d&&x(f.v0,s,d,l,r,o,i),!a(p)){var m=e.v1;m!==p&&x(f.v1,m,p,l,r,o,i)}}}}function x(e,n,r,o,i,l,u){switch(e){case le.CHILDREN_KEYED:C(n,r,o,i,l,u,null);break;case le.CHILDREN_NON_KEYED:_(n,r,o,i,l,u,null);break;case le.CHILDREN_TEXT:M(o,r);break;case le.CHILDREN_NODE:y(n,r,o,i,l,u);break;case le.PROPS_CLASS_NAME:t(r)?o.removeAttribute("class"):o.className=r}}function b(e,n,t,r,o,i){var l=e.children,u=n.children,f=e.pointer;if(n.dom=e.dom,n.pointer=f,!l!==u){var a=e.childrenType,c=n.childrenType;if(a===c){if(h(c))return C(l,u,t,r,o,i,n);if(h(c))return _(l,u,t,r,o,i,n)}W(l,u)?C(l,u,t,r,o,i,n):_(l,u,t,r,o,i,n)}}function _(e,n,t,r,o,i,l){for(var u=e.length,f=n.length,a=u>f?f:u,c=0;c<a;c++){var d=e[c],s=Y(n,c);y(d,s,t,r,o,i)}if(u<f)for(c=a;c<f;c++){var p=Y(n,c);S(t,G(p,null,r,o,i),l&&l.pointer)}else if(u>f)for(c=a;c<u;c++)L(e[c],t,r)}function C(e,n,t,r,o,i,l){var f,c,d,s,p,m=e.length,h=n.length,v=m-1,E=h-1,N=0,g=0,k=e[N],x=n[g],b=e[v],_=n[E],C=null,T=null;if(0===m)return void(0!==h&&$(n,t,r,o,i));if(0===h)return void(0!==m&&F(t,e,r));e:for(;;){for(;k.key===x.key;){if(y(k,x,t,r,o,i),N++,g++,N>v||g>E)break e;k=e[N],x=n[g]}for(;b.key===_.key;){if(y(b,_,t,r,o,i),v--,E--,N>v||g>E)break e;b=e[v],_=n[E]}if(b.key!==x.key){if(k.key!==_.key)break;if(y(k,_,t,r,o,i),s=E+1,d=s<n.length?n[s].dom:l&&l.pointer,S(t,_.dom,d),N++,E--,N>v||g>E)break;k=e[N],_=n[E]}else{if(y(b,x,t,r,o,i),S(t,x.dom,k.dom),v--,g++,N>v||g>E)break;b=e[v],x=n[g]}}if(N>v){if(g<=E)for(s=E+1,d=s<n.length?n[s].dom:l&&l.pointer;g<=E;)S(t,G(n[g++],null,r,o,i),d)}else if(g>E)for(;N<=v;)L(e[N++],t,r);else{m=v-N+1,h=E-g+1;var w=e,O=new Array(h);for(f=0;f<h;f++)O[f]=-1;var I=!1,A=0,R=0;if(h<=4||m*h<=16){for(f=N;f<=v;f++)if(C=e[f],R<h)for(c=g;c<=E;c++)if(T=n[c],C.key===T.key){O[c-g]=f,A>c?I=!0:A=c,y(C,T,t,r,o,i,!1),R++,w[f]=null;break}}else{var M=new Map;for(f=g;f<=E;f++)p=n[f],M.set(p.key,f);for(f=N;f<=v;f++)C=e[f],R<h&&(c=M.get(C.key),a(c)||(T=n[c],O[c-g]=f,A>c?I=!0:A=c,y(C,T,t,r,o,i,!1),R++,w[f]=null))}if(m===e.length&&0===R)for(F(t,e,r);g<h;)S(t,G(n[g++],null,r,o,i),null);else{for(f=m-R;f>0;)C=w[N++],u(C)||(L(C,t,r),f--);if(I){var H=D(O);for(c=H.length-1,f=h-1;f>=0;f--)O[f]===-1?(A=f+g,p=n[A],s=A+1,d=s<n.length?n[s].dom:l&&l.pointer,S(t,G(p,t,r,o,i),d)):c<0||f!==H[c]?(A=f+g,p=n[A],s=A+1,d=s<n.length?n[s].dom:l&&l.pointer,S(t,p.dom,d)):c--}else if(R!==h)for(f=h-1;f>=0;f--)O[f]===-1&&(A=f+g,p=n[A],s=A+1,d=s<n.length?n[s].dom:l&&l.pointer,S(t,G(p,null,r,o,i),d))}}}function D(e){var n=e.slice(0),t=[];t.push(0);var r,o,i,l,u;for(r=0;r<e.length;r++)if(e[r]!==-1)if(o=t[t.length-1],e[o]<e[r])n[r]=o,t.push(r);else{for(i=0,l=t.length-1;i<l;)u=(i+l)/2|0,e[t[u]]<e[r]?i=u+1:l=u;e[r]<e[t[i]]&&(i>0&&(n[r]=t[i-1]),t[i]=r)}for(i=t.length,l=t[i-1];i-- >0;)t[i]=l,l=n[l];return t}function T(e,n,r,i){if(de[e])i[e]=t(r)?"":r;else if(se[e])i[e]=!!r;else if(n!==r){if(t(r))return i.removeAttribute(e),!1;if("className"===e)return i.className=r,!1;if("style"===e)patchStyle(n,r,i);else{if("defaultChecked"===e)return u(n)&&i.addAttribute("checked"),!1;if("defaultValue"===e)return u(n)&&i.setAttribute("value",r),!1;if(o(e))i[e.toLowerCase()]=r;else if("dangerouslySetInnerHTML"===e){var l=n&&n.__html,f=r&&r.__html;t(f)&&c(),l!==f&&(i.innerHTML=f)}else if("childrenType"!==e&&"ref"!==e&&"key"!==e){var a=pe[e];return a?i.setAttributeNS(a,e,r):i.setAttribute(e,r),!1}}}return!0}function w(e,n,t,r){var o=e.bp,i=e.key,l=null===i?o.pools.nonKeyed:o.pools.keyed.get(i);if(!a(l)){var u=l.pop();if(!a(u))return k(u,e,null,n,t,r),e.dom}return null}function O(e){var n=e.bp,t=e.key,r=n.pools;if(u(t))r.nonKeyed.push(e);else{var o=r.keyed.get(t);a(o)&&(o=[],r.keyed.set(t,o)),o.push(e)}}function L(e,n,t,o){r(e)||d(e)&&I(e,n,t,o)}function I(e,n,t,r){u(n)||n.removeChild(e.dom),fe&&(n||r)&&O(e)}function A(e,n,t){e.split(",").forEach(function(e){return n[e]=t})}function R(e,n){""!==n?e.textContent=n:e.appendChild(document.createTextNode(""))}function M(e,n){e.firstChild.nodeValue=n}function H(e,n){e.appendChild(n)}function S(e,n,r){t(r)?H(e,n):e.insertBefore(n,r)}function K(e,n,t){e.replaceChild(n,t)}function P(t){return n(t)||r(t)||e(t),t}function Y(e,n){var t=e[n];return e[n]=P(t)}function X(){return document.activeElement}function F(e,n,t){e.textContent="";for(var o=0;o<n.length;o++){var i=n[o];r(i)||L(i,null,t,!0)}}function V(e){null!==e&&e!==document.body&&document.activeElement!==e&&e.focus()}function W(e,n){return!e.complex&&(n.length&&!t(n[0])&&!t(n[0].key)&&e.length&&!t(e[0])&&!t(e[0].key))}function G(e,n,t,r,o){return d(e)?q(e,n,t,r,o):s(e)?j(e,n):p(e)?z(e,n,t,r,o):void c()}function z(e,n,t,r,o){var i=e.children,l=document.createTextNode(""),u=document.createDocumentFragment(),f=e.childrenType;return h(f)||v(f)?$(i,u,t,r,o):m(f)&&Q(i,u,t,r,o),e.pointer=l,e.dom=u,H(u,l),n&&H(n,u),u}function U(e,n){var t=e.static,r=t.tag,o=document.createElement(r),i=t.props;for(var l in i)T(l,null,i[l],o);return e.clone=o,o.cloneNode(!0)}function j(e,n){var t=document.createTextNode(e.text);return e.dom=t,u(n)||H(n,t),t}function q(e,n,t,r,o){var i=e.bp,l=null;if(fe&&(l=w(e,t,r,o)),u(l)){l=i.clone&&i.clone.cloneNode(!0)||U(i,o);var f=e.v0;if(e.dom=l,!a(f)){B(i.v0,f,l,t,r,o);var c=e.v1;a(c)||B(i.v1,c,l,t,r,o)}}return u(n)||n.appendChild(l),l}function B(e,n,r,o,i,l){switch(e){case le.CHILDREN_KEYED:case le.CHILDREN_NON_KEYED:$(n,r,o,i,l);break;case le.CHILDREN_TEXT:R(r,n);break;case le.CHILDREN_NODE:G(n,r,o,i,l);break;case le.PROPS_CLASS_NAME:t(n)||(r.className=n)}}function $(e,n,t,r,o){for(var i=0;i<e.length;i++)G(e[i],n,t,r,o)}function J(t,o,i,l,u){e(t)||(n(t)?R(o,t):r(t)||G(t,o,i,l,u))}function Q(e,n,t,r,o){e.complex=!1;for(var i=0;i<e.length;i++){var l=Y(e,i);s(l)?(j(l,n),e.complex=!0):isVPlaceholder(l)?(mountVPlaceholder(l,n),e.complex=!0):p(l)?(z(l,n,t,r,o),e.complex=!0):G(l,n,t,r,o)}}function Z(e){return ve.get(e)||null}function ee(e,n){var t=he.get(n),o=new ne;if(Ee===n&&c(),e!==te)if(a(t))r(e)||(J(e,n,o,{},!1),o.trigger(),he.set(n,{input:e}));else{var i=X();u(e)?(L(t.input,n,o,!0),he.delete(n)):N(t.input,e,n,o,{},!1),o.trigger(),t.input=e,V(i)}}var ne=function(){this._listeners=[]};ne.prototype.addListener=function(e){this._listeners.push(e)},ne.prototype.trigger=function(){for(var e=this,n=0;n<this._listeners.length;n++)e._listeners[n]()};var te="$NO_OP",re="a runtime error occured! Use Inferno in development environment to find the error.",oe="undefined"!=typeof window&&window.document,ie={TEMPLATE:1,TEXT:2,FRAGMENT:3},le={CHILDREN_KEYED:1,CHILDREN_NON_KEYED:2,CHILDREN_TEXT:3,CHILDREN_NODE:4,PROPS_CLASS_NAME:5},ue={NON_KEYED:1,KEYED:2,NODE:3,TEXT:4,UNKNOWN:5},fe=!0,ae="http://www.w3.org/1999/xlink",ce="http://www.w3.org/XML/1998/namespace",de={},se={},pe={},me={};A("xlink:href,xlink:arcrole,xlink:actuate,xlink:role,xlink:titlef,xlink:type",pe,ae),A("xml:base,xml:lang,xml:space",pe,ce),A("volume,value",de,!0),A("muted,scoped,loop,open,checked,default,capture,disabled,selected,readonly,multiple,required,autoplay,controls,seamless,reversed,allowfullscreen,novalidate",se,!0),A("animationIterationCount,borderImageOutset,borderImageSlice,borderImageWidth,boxFlex,boxFlexGroup,boxOrdinalGroup,columnCount,flex,flexGrow,flexPositive,flexShrink,flexNegative,flexOrder,gridRow,gridColumn,fontWeight,lineClamp,lineHeight,opacity,order,orphans,tabSize,widows,zIndex,zoom,fillOpacity,floodOpacity,stopOpacity,strokeDasharray,strokeDashoffset,strokeMiterlimit,strokeOpacity,strokeWidth,",me,!0);var he=new Map,ve=new Map,Ee=oe?document.body:null,ye={render:ee,findDOMNode:Z,mount:G,patch:y,unmount:L};return ye});