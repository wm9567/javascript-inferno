!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e,t){if(!o(e)){var r=n(e);(r&&e.length>0||!r)&&(t?t.children=e:t={children:e})}return t}function n(e){return e.constructor===Array}function t(e){return!o(e)&&e.prototype&&e.prototype.render}function r(e){return"string"==typeof e||"number"==typeof e}function o(e){return void 0===e||null===e}function l(e){return void 0===e||null===e||e===!1}function i(e){return"function"==typeof e}function a(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function u(e){return"string"==typeof e}function d(e){return"number"==typeof e}function f(e){return e instanceof Promise}function c(e){for(var n=J[e.type],t=n.length-1;t>-1;t--){var r=n[t];r.target===e.target&&r.callback(e)}}function s(e,n){if(!o(n)){var t=J[e];if(!o(t))for(var r=0;r<t.length;r++){var l=t[r];if(l.callback===n)return void t.splice(r,1)}}}function v(e,n,t){var r=J[e];o(r)?(document.addEventListener(e,c,!1),J[e]=[{callback:t,target:n}]):r.push({callback:t,target:n})}function p(e,n,t){o(t)?e.appendChild(n):e.insertBefore(n,t)}function h(e,n){return o(n)?document.createElement(e):document.createElementNS(n,e)}function m(e,n,t){if(t)""!==e?n.textContent=e:n.appendChild(document.createTextNode(""));else{var r=document.createTextNode(e);n.appendChild(r)}}function y(e,n,t,o,l,i,a){if(r(n)){var u=document.createTextNode(n);t.replaceChild(u,u)}else if(r(e)){var d=F(n,null,o,l,i,a);n.dom=d,t.replaceChild(d,t.firstChild)}else{var f=F(n,null,o,l,i,a);n.dom=f,t.replaceChild(f,e.dom)}}function g(e){if(!l(e)){var t=e.instance;o(t)||void 0===t.render||(t.componentWillUnmount(),t._unmounted=!0);var r=e.hooks;o(r)||(o(r.willDetach)||r.willDetach(e.dom),o(r.componentWillUnmount)||r.componentWillUnmount(e.dom,r));var i=e.events;if(!o(i))for(var a in i)s(a,i[a]);var u=e.children;if(!o(u))if(n(u))for(var d=0;d<u.length;d++)g(u[d]);else g(u)}}function k(e,n){g(e);var t=e.dom;t===n?t.innerHTML="":(n.removeChild(t),Y&&A(e))}function C(e){switch(e.length){case 5:return"value"===e;case 7:return"checked"===e;case 8:return"disabled"===e||"selected"===e;default:return!1}}function b(e,n,t,r,o,i,a){return l(e)?void F(n,t,r,o,i,a):l(n)?void k(e,t):void W(e,n,t,r,o,i,null!==e.tpl&&null!==n.tpl,a)}function x(e,n,t){if(u(n))t.style.cssText=n;else if(o(e)){if(!o(n))for(var r=Object.keys(n),l=0;l<r.length;l++){var i=r[l],a=n[i];d(a)&&!X[i]&&(a+="px"),t.style[i]=a}}else if(o(n))t.removeAttribute("style");else{for(var f=Object.keys(n),c=0;c<f.length;c++){var s=f[c],v=n[s];d(v)&&!X[s]&&(v+="px"),t.style[s]=v}for(var p=Object.keys(e),h=0;h<p.length;h++){var m=p[h];o(n[m])&&(t.style[m]="")}}}function w(e,n,t){if(!a(e)){if(C(e))return void(t[e]=n);if(n===!1||o(n))t.removeAttribute(e);else{var r=null;":"===e[5]&&-1!==e.indexOf("xlink:")&&(r="http://www.w3.org/1999/xlink"),null!==r?t.setAttributeNS(r,e,n===!0?e:n):t.setAttribute(e,n===!0?e:n)}}}function N(n,r,l,i,a,u,d,f,c,s){if(a=e(d,a),t(r)){var v=l.props,p=l.state,h=l.state,m=l.getChildContext();o(m)||(s=B.extends({},s,m)),l.context=s;var y=l._updateComponent(p,h,v,a);o(y)||(W(n,y,f,null,c,s,!0,l),n.dom=y.dom,l._lastNode=y)}else{var g=!0,k=!o(u);if(k&&!o(u.componentShouldUpdate)&&(g=u.componentShouldUpdate(n.dom,i,a)),g!==!1){k&&!o(u.componentWillUpdate)&&u.componentWillUpdate(n.dom,i,a);var C=r(a),b=n.dom;C.dom=b,W(l,C,b,null,c,s,!0,null),n.instance=C,k&&!o(u.componentDidUpdate)&&u.componentDidUpdate(n.dom,i,a)}}}function O(e,t,i,a,u,d,f,c){var s=e.length,v=t.length;if(s>v)for(var p=void 0;s!==v;){var h=e[s-1];l(h)||i.removeChild((p=h.dom)||p&&(p=p.previousSibling)||(p=i.lastChild)),s--}else if(v>s)for(var m=0;s!==v;){var y=t[s+m];if(l(y));else{var g=F(y,null,a,u,d,c);i.appendChild(g)}v--,m++}for(var k=void 0,C=0;v>C;C++){var x=e[C],w=t[C];if(x!==w)if(l(w)){if(!l(x)){k=k||i.childNodes;var N=k[C+f];o(N)||(k[C+f].textContent="")}}else if(l(x))if(r(w)){k=k||i.childNodes;var S=k[C+f];o(S)?i.appendChild(document.createTextNode(w)):S.textContent=w}else{var U=F(w,null,a,u,d,c);i.replaceChild(U,i.childNodes[C])}else if("object"===("undefined"==typeof w?"undefined":B.typeof(w)))n(w)?n(x)?O(x,w,i,a,u,d,C,c):O([x],w,i,a,u,d,C,c):b(x,w,i,a,u,d,c);else{k=k||i.childNodes;var j=k[C+f];o(j)?i.appendChild(document.createTextNode(w)):j.textContent=w}}}function S(e,n,t,r,l,i,a){var u=!1,d=0,f=0,c=n.length,s=e.length,v=void 0;if(0===c&&s>=5){if(Y)for(var h=0;s>h;h++)A(e[h]);return void(t.textContent="")}var m=c-1,y=s-1,g=s>0?e[f]:null,C=c>0?n[d]:null,b=void 0,x=void 0,w=void 0;e:for(;!u&&m>=d&&y>=f;){for(u=!0;C.key===g.key;){if(W(g,C,t,r,l,i,!0,a),d++,f++,d>m||f>y)break e;C=n[d],g=e[f],u=!1}for(b=n[m],x=e[y];b.key===x.key;){if(W(x,b,t,r,l,i,!0,a),m--,y--,d>m||f>y)break e;b=n[m],x=e[y],u=!1}for(;b.key===g.key;){if(w=c>m+1?n[m+1].dom:null,W(g,b,t,r,l,i,!0,a),p(t,b.dom,w),m--,f++,d>m||f>y)break e;b=n[m],g=e[f],u=!1}for(;C.key===x.key;){if(w=e[f].dom,W(x,C,t,r,l,i,!0,a),p(t,C.dom,w),d++,y--,d>m||f>y)break e;C=n[d],x=e[y],u=!1}}if(f>y){if(m>=d)for(w=c>m+1?n[m+1].dom:null;m>=d;d++)p(t,F(n[d],null,r,l,i,a),w)}else if(d>m)for(;y>=f;f++)v=e[f],k(v,t);else{for(var N=[],O=f;y>=O;O++)v=e[O],N[v.key]=v;w=c>m+1?n[m+1]:null;for(var S=m;S>=d;S--){var U=n[S],j=U.key;v=N[j],w=o(w)?void 0:w.dom,void 0!==v?(N[j]=null,W(v,U,t,r,l,i,!0,a),U.dom.nextSibling!==w&&p(t,U.dom,w)):p(t,F(U,null,r,l,i,a),w),w=U}for(var _=f;y>=_;_++)v=e[_],null!==N[v.key]&&k(v,t)}}function U(e,n,t){r(n)?e.firstChild.nodeValue=t:e.textContent=t}function j(e,t,i,a,u,d,f,c){var s=t.children,v=e.children;if(v!==s)if(l(v))r(s)?U(i,v,s):o(s)||"object"===("undefined"==typeof s?"undefined":B.typeof(s))&&(n(s)?E(s,i,a,u,d,c):F(s,i,a,u,d,c));else if(l(s))i.textContent="";else if(n(v))if(n(s)){var p=s.length&&!o(s[0])&&!o(s[0].key)||v.length&&!o(v[0])&&!o(v[0].key);p?S(v,s,i,a,u,d,c):O(v,s,i,a,u,d,null,c)}else O(v,[s],i,a,u,d,null,c);else n(s)?O([v],s,i,a,u,d,null,c):r(s)?U(i,v,s):W(v,s,i,a,u,d,f,c)}function _(e,n,t,r){o(e)||(isString(n)&&delete e.refs[n],isString(t)&&(e.refs[t]=r))}function T(e,n,t,r){var l=n.attrs,i=e.attrs,a=o(l),u=o(i);if(!a)for(var d=Object.keys(l),f=d.length,c=0;f>c;c++){var s=d[c],v=!u&&i[s],p=l[s];v!==p&&("ref"===s?_(r,v,p,t):w(s,p,t))}if(!u)for(var h=Object.keys(i),m=h.length,y=0;m>y;y++){var g=h[y];(a||o(l[g]))&&("ref"===g?_(r,i[g],null,t):t.removeAttribute(g))}}function M(e,n,t){var r=e.events;if(!o(r)){var l=n.events;if(!o(l))for(var i=Object.keys(r),a=(Object.keys(l),0);a<i.length;a++){var u=i[a],d=l[u],f=r[i];o(d)?s(u,f):d!==f&&(s(u,f),v(u,t,d))}}}function W(e,n,l,a,u,d,f,c){if(n!==!1&&null!==n){if(!o(n.then))return void n.then(function(n){W(e,n,l,a,u,d,f,c)});if(r(e))return void(r(n)?l.firstChild.nodeValue=n:y(e,n,l,a,u,d,c));var s=n.hooks;o(s)||o(s.willUpdate)||s.willUpdate(e.dom);var v=n.tag||(f&&!o(n.tpl)?n.tpl.tag:null),p=e.tag||(f&&!o(e.tpl)?e.tpl.tag:null);if(a=a||"svg"===v?R:"math"===v?Q:null,p!==v)return void(i(p)&&!i(v)?t(p)?W(e.instance._lastNode,n,l,a,u,d,!0,c):W(e.instance,n,l,a,u,d,!0,c):y(e,n,l,a,u,d,c));if(o(p))return void(n.dom=e.dom);if(i(p)&&i(v))return n.instance=e.instance,n.dom=e.dom,void N(n,n.tag,n.instance,e.attrs||{},n.attrs||{},n.hooks,n.children,l,u,d);var h=e.dom;n.dom=h,j(e,n,h,a,u,d,f,c);var m=n.className,g=n.style;e.className!==m&&(o(m)?h.removeAttribute("class"):h.className=m),e.style!==g&&x(e.style,g,h),T(e,n,h,c),M(e,n,h),o(s)||o(s.didUpdate)||s.didUpdate(h)}}function D(e,n,t){var r=e.tpl;if(!o(r)){var l=e.key,i=void 0;if(null!==l){var a=r.pools.keyed[l];i=a&&a.pop()}else{var u=r.pools.nonKeyed;i=u&&u.pop()}if(i)return W(i,e,null,null,n,t,!0),e.dom}}function A(e){var n=e.tpl;if(!o(n)){var t=e.key,r=n.pools;if(null===t){var l=r.nonKeyed;l&&l.push(e)}else{var i=r.keyed;(i[t]||(i[t]=[])).push(e)}}}function E(e,t,l,i,a,u){if(n(e))for(var d=0;d<e.length;d++){var c=e[d];r(c)?m(c,t,!1):!o(c)&&n(c)?E(c,t,l,i,a,u):f(c)?!function(){var e=document.createTextNode("");c.then(function(n){var r=F(n,null,l,i,a,u);t.replaceChild(r,e)}),t.appendChild(e)}():F(c,t,l,i,a,u)}else r(e)?m(e,t,!0):f(e)?!function(){var n=document.createTextNode("");e.then(function(e){var r=F(e,null,l,i,a,u);t.replaceChild(r,n)}),t.appendChild(n)}():F(e,t,l,i,a,u)}function L(e,n,t){!o(e)&&u(n)&&(e.refs[n]=t)}function I(n,r,l,i,a,u,d,f){l=e(a,l);var c=void 0;if(t(r)){var s=new r(l);s._diffNodes=W;var v=s.getChildContext();o(v)||(f=B.extends({},f,v)),s.context=f,s._pendingSetState=!0,s.componentWillMount();var p=s.shouldComponentUpdate();if(p){s.componentWillUpdate();var h=s._pendingState,m=s.state;s.state=B.extends({},m,h)}var y=s.render();return s._pendingSetState=!1,o(y)||(c=F(y,null,null,d,f,s),s._lastNode=y,null!==u&&u.appendChild(c),s.componentDidMount(),s.componentDidUpdate()),n.dom=c,n.instance=s,c}o(i)||(o(i.componentWillMount)||i.componentWillMount(null,l),o(i.componentDidMount)||d.addListener(function(){i.componentDidMount(c,l)}));var g=r(l);return c=F(g,null,null,d,f,null),n.instance=g,null!==u&&u.appendChild(c),n.dom=c,c}function P(e,n){for(var t=Object.keys(e),r=0;r<t.length;r++){var o=t[r];u(o)&&v(o,n,e[o])}}function z(e,n){var t=document.createTextNode("");return null!==n&&n.appendChild(t),o(e)||(e.dom=t),t}function F(e,t,a,d,f,c){if(l(e)||n(e))return z(e,t);var s=void 0;if(r(e))return s=document.createTextNode(e),null!==t&&t.appendChild(s),s;if(Y&&(s=D(e,d,f)))return t&&t.appendChild(s),s;var v=e.tag;if(null===v)return z(e,t);if(i(v))return I(e,v,e.attrs||{},e.hooks,e.children,t,d,f);a=a||"svg"===v?R:"math"===v?Q:null;var p=e.tpl;if(o(p)||o(p.dom)){if(!u(v)||""===v)throw Error("Inferno Error: Expected function or string for element tag type");s=h(v,a)}else s=p.dom.cloneNode(!0);var m=e.children,y=e.attrs,g=e.events,k=e.hooks,C=e.className,b=e.style;return o(k)||(o(k.created)||k.created(s),o(k.attached)||d.addListener(function(){k.attached(s)})),o(g)||P(g,s),l(m)||E(m,s,a,d,f,c),o(y)||G(y,s,c),o(C)||(s.className=C),o(b)||x(null,b,s),e.dom=s,null!==t&&t.appendChild(s),s}function G(e,n,t){for(var r=Object.keys(e),o=0;o<r.length;o++){var l=r[o];"ref"===l?L(t,e[l],n):w(l,e[l],n)}}function H(e){for(var n=0;n<Z.length;n++){var t=Z[n];if(t.dom===e)return t}return null}function K(e){for(var n=0;n<Z.length;n++){var t=Z[n];if(t===e)return Z.splice(n,1),!0}return!1}function V(e,n){var t=H(n),r=new q;o(t)?(F(e,n,null,r,{},null),r.trigger(),Z.push({node:e,dom:n})):(b(t.node,e,n,null,r,{},null),r.trigger(),null===e&&K(t),t.node=e)}var B={};B.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},B.classCallCheck=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},B.createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),B.extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};var q=function(){function e(){B.classCallCheck(this,e),this._listeners=[]}return B.createClass(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"trigger",value:function(){for(var e=0;e<this._listeners.length;e++)this._listeners[e]()}}]),e}(),J={},Q="http://www.w3.org/1998/Math/MathML",R="http://www.w3.org/2000/svg",X={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},Y=!0,Z=[],$={render:V};return $});