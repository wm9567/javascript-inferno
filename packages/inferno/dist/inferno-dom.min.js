!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.InfernoDOM=t()}(this,function(){"use strict";function e(e,n){return r(e)||(t(e)&&e.length>0||!t(e))&&(n?n.children=e:n={children:e}),n}function t(e){return e.constructor===Array}function n(e){return e&&e.prototype&&e.prototype.render}function o(e){return"string"==typeof e||"number"==typeof e}function r(e){return void 0===e||null===e}function i(e){return"function"==typeof e}function l(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function a(e){return"string"==typeof e}function d(e){return"number"==typeof e}function u(e,t,n){n?e.insertBefore(t,n):e.appendChild(t)}function c(e,t){return t?document.createElementNS(t,e):document.createElement(e)}function f(e,t,n){if(n)""!==e?t.textContent=e:t.appendChild(document.createTextNode(""));else{var o=document.createTextNode(e);t.appendChild(o)}}function s(e,t,n,o,r,i){var l=O(t,null,o,r,i);n.replaceChild(l,e.dom),t.dom=l}function v(e){if(!r(e)){n(e.instance)&&(e.instance.componentWillUnmount(),e.instance._unmounted=!0),e.events&&e.events.willDetach&&e.events.willDetach(e.dom),e.events&&e.events.componentWillUnmount&&e.events.componentWillUnmount(e.dom,e.events);var o=e.children;if(o)if(t(o))for(var i=0;i<o.length;i++)v(o[i]);else v(o)}}function p(e,t){var n=e.dom;v(e),n===t?n.innerHTML="":(t.removeChild(n),P&&U(e))}function m(e,t,n,o,i,l){return r(e)?void O(t,n,o,i):r(t)?void p(e,n):void k(e,t,n,o,i,l,null!==e.static&&null!==t.static)}function h(e,t,n,o){if(t!==n)if("style"===e)if(a(n))o.style.cssText=n;else if(n){for(var i=Object.keys(n),u=0;u<i.length;u++){var c=i[u],f=n[c];d(f)&&(f+="px"),o.style[c]=f}if(t)for(var s=Object.keys(t),u=0;u<s.length;u++){var c=s[u];n[c]||(o.style[c]="")}}else t&&o.removeAttribute("style");else if(!l(e)){var v=null;":"===e[5]&&-1!==e.indexOf("xlink:")&&(v="http://www.w3.org/1999/xlink"),n===!1||r(n)?o.removeAttribute(e):v?n===!0?o.setAttributeNS(v,e,e):o.setAttributeNS(v,e,n):n===!0?o.setAttribute(e,e):o.setAttribute(e,n)}}function y(t,o,r,i,l,a,d,u,c,f){if(l=e(d,l),n(o)){var s=r.props,v=r.state,p=r.state,m=r.getChildContext();m&&(f=L.extends({},f,m)),r.context=f;var h=r._updateComponent(v,p,s,l);h&&(k(t,h,u,c,f,!1),t.dom=h.dom,r._lastNode=h)}else{var y=!0;if(a&&a.componentShouldUpdate&&(y=a.componentShouldUpdate(t.dom,i,l)),y!==!1){a&&a.componentWillUpdate&&a.componentWillUpdate(t.dom,i,l);var h=o(l),g=t.dom;h.dom=g,k(r,h,g,c,f,!1),t.instance=h,a&&a.componentDidUpdate&&a.componentDidUpdate(t.dom,i,l)}}}function g(e,t,n,i,l,a,d){var u=e.length,c=t.length;if(u>c)for(var f=void 0;u!==c;){var s=e[u-1];r(s)||n.removeChild((f=s.dom)||f&&(f=f.previousSibling)||(f=n.lastChild)),u--}else if(c>u)for(var v=0;u!==c;){var p=t[u+v];if(r(p));else{var h=O(p,null,i,i,l,a);n.appendChild(h)}c--,v++}for(var y=0;c>y;y++){var s=e[y],p=t[y];if(s!==p)if(r(p))r(s)||(n.childNodes[y].textContent="");else if(r(s))if(o(p))n.childNodes[y].textContent=p;else{var h=O(p,null,i,i,l,a);n.replaceChild(h,n.childNodes[y])}else o(p)?n.childNodes[y].textContent=p:m(s,p,n,i,l,a)}}function b(e,t,n,o,r,i,l){var a=!1,d=0,c=0,f=t.length,s=e.length,v=void 0,m=void 0;if(0===f&&s>=5){if(P)for(var h=0;s>h;h++)U(e[h]);return void(n.textContent="")}var y=f-1,g=s-1,b=s>0?e[c]:null,C=f>0?t[d]:null,x=void 0,w=void 0,N=void 0;e:for(;!a&&y>=d&&g>=c;){for(a=!0;C.key===b.key;){if(k(b,C,n,o,r,i,!0),d++,c++,d>y||c>g)break e;C=t[d],b=e[c],a=!1}for(x=t[y],w=e[g];x.key===w.key;){if(k(w,x,n,o,r,i,!0),y--,g--,d>y||c>g)break e;x=t[y],w=e[g],a=!1}for(;x.key===b.key;){if(N=f>y+1?t[y+1].dom:l,k(b,x,n,o,r,i,!0),u(n,x.dom,N),y--,c++,d>y||c>g)break e;x=t[y],b=e[c],a=!1}for(;C.key===w.key;){if(N=e[c].dom,k(w,C,n,o,r,i,!0),u(n,C.dom,N),d++,g--,d>y||c>g)break e;C=t[d],w=e[g],a=!1}}if(c>g){if(y>=d)for(N=f>y+1?t[y+1].dom:l;y>=d;d++)v=t[d],u(n,O(v,null,o,r,i),N)}else if(d>y)for(;g>=c;c++)m=e[c],p(m,n);else{for(var M={},h=c;g>=h;h++)m=e[h],M[m.key]=m;for(var S=f>y+1?t[y+1]:null,h=y;h>=d;h--){v=t[h];var j=v.key;m=M[j],void 0!==m?(M[j]=null,k(m,v,n,o,r,!0),v.dom.nextSibling!==S&&(S=S&&S.dom||l,u(n,v.dom,S)),S=v):(S=S&&S.dom||l,u(n,O(v,null,o,r,i),S)),S=v}for(var h=c;g>=h;h++)m=e[h],null!==M[m.key]&&p(m,n)}}function k(e,t,l,a,d,u,c){if(t!==!1&&null!==t){if(o(e))return void(o(t)&&(l.firstChild.nodeValue=t));var f=t.tag||(c&&t.static?t.static.tag:null),v=e.tag||(c&&e.static?e.static.tag:null);if(e.events&&e.events.willUpdate&&e.events.willUpdate(e.dom),a=a||"svg"===f?K:"math"===f?E:null,v!==f)return void(i(v)&&!i(f)?n(v)?k(e.instance._lastNode,t,l,a,d,u,!0):k(e.instance,t,l,a,d,u,!0):s(e,t,l,a,d,u));if(i(v)&&i(f))return t.instance=e.instance,t.dom=e.dom,void y(t,t.tag,t.instance,e.attrs,t.attrs,t.events,t.children,l,d,u);var p=e.dom;t.dom=p,C(e,t,p,a,d,u,c);var m=t.className;e.className!==m&&(r(m)?p.removeAttribute("class"):p.className=m),x(e,t,p),w(e,t,p),t.events&&t.events.didUpdate&&t.events.didUpdate(p)}}function C(e,n,i,l,a,d,u){var c=n.children,f=e.children;if(f!==c)if(r(f))o(c)?i.textContent=c:c&&t(c)?S(c,i,l,a,d):c&&"object"===("undefined"==typeof c?"undefined":L.typeof(c))&&O(c,i,l,a,d);else if(r(c))i.textContent="";else if(t(f))if(t(c)){var s=c.length&&c[0]&&!r(c[0].key)||f.length&&f[0]&&!r(f[0].key);s?b(f,c,i,l,a,d,null):g(f,c,i,l,a,d,null)}else g(f,[c],i,l,a,d,null);else t(c)?g([f],c,i,l,a,d,null):o(f)?o(c)&&(i.firstChild.nodeValue=c):k(f,c,i,l,a,d,u)}function x(e,t,n){var o=t.attrs,r=e.attrs,i=o&&Object.keys(o);if(o&&0!==i.length)for(var l=0;l<i.length;l++){var a=i[l],d=r[a],u=o[a];d!==u&&h(a,d,u,n)}}function w(e,t,n){}function N(e,t,n){var o=e.key,r=e.static,i=void 0;if(r){if(null!==o){var l=r.static.keyed[o];i=l&&l.pop()}else{var l=r.static.nonKeyed;i=l&&l.pop()}if(i)return k(i,e,null,t,n,null,!0),e.dom}}function U(e){var t=e.key,n=e.static;if(n){var o=n.static;if(null===t){var r=o.nonKeyed;r&&r.push(item)}else{var i=o.keyed;(i[t]||(i[t]=[])).push(e)}}}function M(e,t,n){if(V[e]){var o=V[e];o.push({callback:n,target:t})}else document.addEventListener(e,function(t){for(var n=V[e],o=n.length-1;o>-1;o--){var r=n[o];r.target===t.target&&r.callback(t)}},!1),V[e]=[]}function S(e,n,r,i,l){if(t(e))for(var a=0;a<e.length;a++){var d=e[a];o(d)?f(d,n,!1):O(d,n,r,i,l)}else o(e)?f(e,n,!0):O(e,n,r,i,l)}function j(t,o,r,i,l,a,d,u){if(r=e(l,r),n(o)){var c=new o(r);c._diffNodes=k;var f=c.getChildContext();f&&(u=L.extends({},u,f)),c.context=u,c.componentWillMount();var s=c.render(),v=void 0;return s&&(v=O(s,null,d,u),c._lastNode=s,a&&a.appendChild(v),d.addListener(c.componentDidMount)),t.dom=v,t.instance=c,v}var p=function(){var e=void 0;i&&(i.componentWillMount&&i.componentWillMount(null,r),i.componentDidMount&&d.addListener(function(){i.componentDidMount(e,r)}));var n=o(r);return e=O(n,null,d,u),t.instance=n,a&&a.appendChild(e),t.dom=e,{v:e}}();return"object"===("undefined"==typeof p?"undefined":L.typeof(p))?p.v:void 0}function O(e,n,l,a,d){var u=void 0;if(r(e)||t(e)){var f=document.createTextNode("");return null!==n&&n.appendChild(f),f}if(o(e)){var s=document.createTextNode(e);return null!==n&&n.appendChild(s),s}if(P&&(u=N(e,a,d)))return n&&n.appendChild(u),u;var v=e.tag;if(i(v))return j(e,v,e.attrs,e.events,e.children,n,a,d);l=l||"svg"===v?K:"math"===v?E:null,u=e.static&&e.static.dom?e.static.dom.cloneNode(!0):c(v,l);var p=e.children,m=e.attrs,h=e.events;return h&&(h.click&&M("click",u,h.click),h.created&&h.created(u),h.attached&&a.addListener(function(){h.attached(u)})),r(p)||S(p,u,l,a,d),m&&_(m,u),r(e.className)||(u.className=e.className),e.dom=u,null!==n&&n.appendChild(u),u}function _(e,t){for(var n=Object.keys(e),o=0;o<n.length;o++){var r=n[o];h(r,null,e[r],t)}}function A(e){for(var t=0;t<B.length;t++){var n=B[t];if(n.dom===e)return n}return null}function D(e){for(var t=0;t<B.length;t++){var n=B[t];if(n===e)return B.splice(t,1),!0}return!1}function W(e,t){var n=A(t),o=new T;r(n)?(O(e,t,null,o,{}),o.trigger(),B.push({node:e,dom:t})):(m(n.node,e,t,null,o,{}),o.trigger(),null===e&&D(n),n.node=e)}var L={};L.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},L.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},L.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),L.extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var T=function(){function e(){L.classCallCheck(this,e),this._listeners=[]}return L.createClass(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"trigger",value:function(){for(var e=0;e<this._listeners.length;e++)this._listeners[e]()}}]),e}(),E="http://www.w3.org/1998/Math/MathML",K="http://www.w3.org/2000/svg",P=!0,V={},B=[],H={render:W};return H});