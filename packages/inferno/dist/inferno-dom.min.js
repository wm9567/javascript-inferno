!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e,t){if(!o(e)){var r=n(e);(r&&e.length>0||!r)&&(t?t.children=e:t={children:e})}return t}function n(e){return e.constructor===Array}function t(e){return!o(e)&&!o(e.prototype.render)}function r(e){return"string"==typeof e||"number"==typeof e}function o(e){return void 0===e||null===e}function i(e){return void 0===e||null===e||e===!1}function l(e){return"function"==typeof e}function a(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function f(e){return"string"==typeof e}function u(e){return"number"==typeof e}function d(e){return"object"===("undefined"==typeof e?"undefined":$.typeof(e))}function c(e){return e&&e.then}function s(e,n,t){e.splice(e.indexOf(n),1,t)}function p(e,t,r,o){if(e.dom===t)return r.callback(o),!0;var i=e.children;if(i)if(n(i))for(var l=0;l<i.length;l++){var a=i[l];if("object"===("undefined"==typeof a?"undefined":$.typeof(a))){var f=p(a,t,r,o);if(f)return!0}}else if(i.dom){var u=p(i,t,r,o);if(u)return!0}}function v(e){for(var n=ne[e.type],t=n.length-1;t>-1;t--){var r=n[t],o=r.node,i=e.target;p(o,i,r,e)}}function h(e,n){if(!o(n)){var t=ne[e];if(!o(t))for(var r=0;r<t.length;r++){var i=t[r];if(i.callback===n)return void t.splice(r,1)}}}function m(e,n,t){var r=ne[e];o(r)?(document.addEventListener(e,v,!1),ne[e]=[{callback:t,node:n}]):r.push({callback:t,node:n})}function y(e,n,t){o(t)?n.append?n.append(e):e.appendChild(n):n.insert?n.insert(e,t):t.insert?e.insertBefore(n,t.childNodes[0]):e.insertBefore(n,t)}function g(e,n){return o(n)?document.createElement(e):document.createElementNS(n,e)}function C(e,n,t){if(!t){var r=document.createTextNode(e);return n.appendChild(r),r}if(""===e){var o=document.createTextNode("");return n.appendChild(o),o}n.textContent=e}function k(e,n,t,o,i,l,a){if(r(n)){var f=document.createTextNode(n);t.replaceChild(f,f)}else if(r(e)){var u=Q(n,null,o,i,l,a);n.dom=u,t.replaceChild(u,t.firstChild)}else{b(e);var d=Q(n,null,o,i,l,a);n.dom=d,t.replaceChild(d,e.dom)}}function b(e){if(!i(e)){var t=e.instance;o(t)||void 0===t.render||(t.componentWillUnmount(),t._unmounted=!0);var r=e.hooks||!o(t)&&t.hooks;o(r)||(o(r.willDetach)||r.willDetach(e.dom),o(r.componentWillUnmount)||r.componentWillUnmount(e.dom,r));var l=e.events;if(!o(l))for(var a in l)h(a,l[a]);var f=e.children;if(!o(f))if(n(f))for(var u=0;u<f.length;u++)b(f[u]);else b(f)}}function x(){return document.createTextNode("")}function w(e,n){b(e);var t=e.dom;t===n?t.innerHTML="":(n.removeChild(t),ie&&z(e))}function N(e,n,t){for(var r=0;r<n.length;r++)e.insertBefore(n[r],t)}function O(){var e=[],n=document.createTextNode(""),t=null,r={childNodes:e,appendChild:function(r){e.push(r),t&&t.insertBefore(r,n)},removeChild:function(n){t&&t.removeChild(n),e.splice(e.indexOf(n),1)},insertBefore:function(n,r){t&&t.insertBefore(n,r),e.splice(e.indexOf(r),0,n)},append:function(r){r.appendChild(n),t=r,N(t,e,n)},insert:function(r,o){r.insertBefore(n,o),t=r,N(t,e,n)},remove:function(){t.removeChild(n);for(var r=0;r<e.length;r++)t.removeChild(e[r]);t=null}};return Object.defineProperty(r,"parentNode",{get:function(){return t}}),Object.defineProperty(r,"firstChild",{get:function(){return e[0]}}),r}function j(e){switch(e.length){case 5:return"value"===e;case 7:return"checked"===e;case 8:return"disabled"===e||"selected"===e;default:return!1}}function S(e,n,t,r,o,l,a){return i(e)?void Q(n,t,r,o,l,a):i(n)?void w(e,t):void P(e,n,t,r,o,l,null!==e.tpl&&null!==n.tpl,a)}function U(e,n,t){if(f(n))t.style.cssText=n;else if(o(e)){if(!o(n))for(var r=Object.keys(n),i=0;i<r.length;i++){var l=r[i],a=n[l];u(a)&&!oe[l]&&(a+="px"),t.style[l]=a}}else if(o(n))t.removeAttribute("style");else{for(var d=Object.keys(n),c=0;c<d.length;c++){var s=d[c],p=n[s];u(p)&&!oe[s]&&(p+="px"),t.style[s]=p}for(var v=Object.keys(e),h=0;h<v.length;h++){var m=v[h];o(n[m])&&(t.style[m]="")}}}function _(e,n,t){if(!a(e)){if(j(e))return void(t[e]=n);if(n===!1||o(n))t.removeAttribute(e);else{var r=null;":"===e[5]&&-1!==e.indexOf("xlink:")&&(r="http://www.w3.org/1999/xlink"),null!==r?t.setAttributeNS(r,e,n===!0?e:n):t.setAttribute(e,n===!0?e:n)}}}function M(n,r,i,l,a,f,u,d,c,s){if(a=e(u,a),t(r)){var p=i.props,v=i.state,h=i.state,m=i.getChildContext();o(m)||(s=$.extends({},s,m)),i.context=s;var y=i._updateComponent(v,h,p,a);o(y)||(P(n,y,d,null,c,s,!0,i),n.dom=y.dom,i._lastNode=y)}else{var g=!0,C=!o(f);if(C&&!o(f.componentShouldUpdate)&&(g=f.componentShouldUpdate(n.dom,l,a)),g!==!1){C&&!o(f.componentWillUpdate)&&f.componentWillUpdate(n.dom,l,a);var k=r(a),b=n.dom;k.dom=b,P(i,k,b,null,c,s,!0,null),n.instance=k,C&&!o(f.componentDidUpdate)&&f.componentDidUpdate(n.dom,l,a)}}}function T(e,n){return n.length&&!o(n[0])&&!o(n[0].key)||e.length&&!o(e[0])&&!o(e[0].key)}function W(e,t,l,a,f,u,c,s,p){var v=!o(l.append),h=e.length,m=t.length,g=h===m;if(g===!1)if(h>m)for(;h!==m;){var C=e[h-1];i(C)||l.removeChild(a[h-1+p]),h--}else if(m>h)for(;h!==m;){var k=t[h],b=Q(k,null,f,u,c,s);y(l,b),!v&&a.push(b),h++}for(var w=0;m>w;w++){var N=e[w],O=t[w],j=w+p;if(N!==O)if(i(O)){if(!i(N)){var U=a[j];if(!o(U))if(r(N))U.nodeValue="";else if(g===!0){var _=x();n(N)&&0===N.length?(y(l,_),!v&&a.splice(j,0,_)):(l.replaceChild(_,a[j]),!v&&a.splice(j,1,_))}}}else if(i(N)){if(r(O)){var M=document.createTextNode(O);l.replaceChild(M,a[j]),!v&&a.splice(j,1,M)}else if(g===!0){var A=Q(O,null,f,u,c,s);l.replaceChild(A,a[j]),!v&&a.splice(j,1,A)}}else if(d(O))n(O)?T(N,O)?D(N,O,a[j],f,u,c,s):n(N)?W(N,O,a[j],a[j].childNodes,f,u,c,s,0):W([N],O,l,a,f,u,c,s,w):n(N)?W(N,[O],a,a[j].childNodes,f,u,c,s,0):S(N,O,l,f,u,c,s);else{var B=a[j];if(o(B)){var E=document.createTextNode(O);t.push(E),l.appendChild(E)}else r(N)?B.nodeValue=O:B.textContent=O}}}function D(e,n,t,r,i,l,a){var f=n.length,u=e.length;if(0===f&&u>=5){if(ie)for(var d=0;u>d;d++)z(e[d]);return void(t.textContent="")}var c=void 0,s=!1,p=0,v=0,h=f-1,m=u-1,g=u>0?e[v]:null,C=f>0?n[p]:null,k=void 0,b=void 0,x=void 0;e:for(;!s&&h>=p&&m>=v;){for(s=!0;C.key===g.key;){if(P(g,C,t,r,i,l,!0,a),p++,v++,p>h||v>m)break e;C=n[p],g=e[v],s=!1}for(k=n[h],b=e[m];k.key===b.key;){if(P(b,k,t,r,i,l,!0,a),h--,m--,p>h||v>m)break e;k=n[h],b=e[m],s=!1}for(;k.key===g.key;){if(x=f>h+1?n[h+1].dom:null,P(g,k,t,r,i,l,!0,a),y(t,k.dom,x),h--,v++,p>h||v>m)break e;k=n[h],g=e[v],s=!1}for(;C.key===b.key;){if(x=e[v].dom,P(b,C,t,r,i,l,!0,a),y(t,C.dom,x),p++,m--,p>h||v>m)break e;C=n[p],b=e[m],s=!1}}if(v>m){if(h>=p)for(x=f>h+1?n[h+1].dom:null;h>=p;p++)y(t,Q(n[p],null,r,i,l,a),x)}else if(p>h)for(;m>=v;v++)c=e[v],w(c,t);else{for(var N=[],O=v;m>=O;O++)c=e[O],N[c.key]=c;x=f>h+1?n[h+1]:null;for(var j=h;j>=p;j--){var S=n[j],U=S.key;c=N[U],x=o(x)?void 0:x.dom,void 0===c?y(t,Q(S,null,r,i,l,a),x):(N[U]=null,P(c,S,t,r,i,l,!0,a),S.dom.nextSibling!==x&&y(t,S.dom,x)),x=S}for(var _=v;m>=_;_++)c=e[_],null!==N[c.key]&&w(c,t)}}function A(e,n,t){r(n)?e.firstChild.nodeValue=t:e.textContent=t}function B(e,t,l,a,f,u,d,c){var s=t.children,p=e.children,v=null;p!==s&&(o(e.domChildren)||(v=t.domChildren=e.domChildren),i(p)?r(s)?A(l,p,s):o(s)||"object"===("undefined"==typeof s?"undefined":$.typeof(s))&&(n(s)?G(t,s,l,a,f,u,c):Q(s,l,a,f,u,c)):i(s)?l.textContent="":n(p)?n(s)?null===v?D(p,s,l,a,f,u,c):W(p,s,l,v||[],a,f,u,c,0):W(p,[s],l,v||[],a,f,u,c,0):n(s)?W([p],s,l,v||[],a,f,u,c,0):r(s)?A(l,p,s):P(p,s,l,a,f,u,d,c))}function E(e,n,t,r){o(e)||(f(n)&&delete e.refs[n],f(t)&&(e.refs[t]=r))}function L(e,n,t,r){var i=n.attrs,l=e.attrs,a=o(i),f=o(l);if(!a)for(var u=Object.keys(i),d=u.length,c=0;d>c;c++){var s=u[c],p=!f&&l[s],v=i[s];p!==v&&("ref"===s?E(r,p,v,t):_(s,v,t))}if(!f)for(var h=Object.keys(l),m=h.length,y=0;m>y;y++){var g=h[y];(a||o(i[g]))&&("ref"===g?E(r,l[g],null,t):t.removeAttribute(g))}}function I(e,n,t){var r=e.events;if(!o(r)){var i=n.events;if(!o(i))for(var l=Object.keys(r),a=0;a<l.length;a++){var f=l[a],u=i[f],d=r[f];o(u)?h(f,d):u!==d&&(h(f,d),m(f,n,u))}}}function P(e,n,i,a,f,u,d,c){if(n!==!1&&null!==n){if(!o(n.then))return void n.then(function(n){P(e,n,i,a,f,u,d,c)});if(r(e))return void(r(n)?i.firstChild.nodeValue=n:k(e,n,i,a,f,u,c));var s=n.hooks;o(s)||o(s.willUpdate)||s.willUpdate(e.dom);var p=n.tag||(d&&!o(n.tpl)?n.tpl.tag:null),v=e.tag||(d&&!o(e.tpl)?e.tpl.tag:null);if(a=a||"svg"===p?re:"math"===p?te:null,v!==p)return void(l(v)&&!l(p)?t(v)?P(e.instance._lastNode,n,i,a,f,u,!0,c):P(e.instance,n,i,a,f,u,!0,c):k(e,n,i,a,f,u,c));if(o(v))return void(n.dom=e.dom);if(l(v)&&l(p))return n.instance=e.instance,n.dom=e.dom,void M(n,n.tag,n.instance,e.attrs||{},n.attrs||{},n.hooks,n.children,i,f,u);var h=e.dom,m=n.className,y=n.style;n.dom=h,B(e,n,h,a,f,u,d,c),e.className!==m&&(o(m)?h.removeAttribute("class"):h.className=m),e.style!==y&&U(e.style,y,h),L(e,n,h,c),I(e,n,h),o(s)||o(s.didUpdate)||s.didUpdate(h)}}function V(e,n,t){var r=e.tpl;if(!o(r)){var i=e.key,l=void 0;if(null!==i){var a=r.pools.keyed[i];l=a&&a.pop()}else{var f=r.pools.nonKeyed;l=f&&f.pop()}if(!o(l))return P(l,e,null,null,n,t,!0),e.dom}}function z(e){var n=e.tpl;if(!o(n)){var t=e.key,r=n.pools;if(null===t){var i=r.nonKeyed;i&&i.push(e)}else{var l=r.keyed;(l[t]||(l[t]=[])).push(e)}}}function F(e,n,t,r,o,i,l){var a=x();t&&t.push(a),e.then(function(e){var f=Q(e,null,r,o,i,l);n.replaceChild(f,a),t&&s(t,a,f)}),n.appendChild(a)}function G(e,t,l,a,f,u,d){var s=[],p=!1,v=!1;if(n(t))for(var h=0;h<t.length;h++){var m=t[h];if(r(m))p=!0,s.push(C(m,l,!1));else if(!o(m)&&n(m)){var g=O();p=!0,G(e,m,g,a,f,u,d),y(l,g),s.push(g)}else if(c(m))F(m,l,s,a,f,u,d);else{var k=Q(m,l,a,f,u,d);p||!v&&m&&o(m.key)?(p=!0,s.push(k)):i(m)?(p=!0,s.push(k)):v===!1&&(v=!0)}}else r(t)?C(t,l,!0):c(t)?F(t,l,null,a,f,u,d):Q(t,l,a,f,u,d);s.length>1&&p===!0&&(e.domChildren=s)}function H(e,n,t){!o(e)&&f(n)&&(e.refs[n]=t)}function K(n,r,i,l,a,f,u,d){i=e(a,i);var c=void 0;if(t(r)){var s=new r(i);s._diffNodes=P;var p=s.getChildContext();o(p)||(d=$.extends({},d,p)),s.context=d,s._pendingSetState=!0,s.componentWillMount();var v=s.shouldComponentUpdate();if(v){s.componentWillUpdate();var h=s._pendingState,m=s.state;s.state=$.extends({},m,h)}var y=s.render();return s._pendingSetState=!1,o(y)||(c=Q(y,null,null,u,d,s),s._lastNode=y,null!==f&&f.appendChild(c),s.componentDidMount(),s.componentDidUpdate()),n.dom=c,n.instance=s,c}o(l)||(o(l.componentWillMount)||l.componentWillMount(null,i),o(l.componentDidMount)||u.addListener(function(){l.componentDidMount(c,i)}));var g=r(i);return c=Q(g,null,null,u,d,null),n.instance=g,null!==f&&f.appendChild(c),n.dom=c,c}function q(e,n){for(var t=Object.keys(e),r=0;r<t.length;r++){var o=t[r];f(o)&&m(o,n,e[o])}}function J(e,n){var t=x();return null!==n&&n.appendChild(t),o(e)||(e.dom=t),t}function Q(e,t,a,u,d,c){if(i(e)||n(e))return J(e,t);var s=void 0;if(r(e))return s=document.createTextNode(e),null!==t&&t.appendChild(s),s;if(ie&&(s=V(e,u,d)))return t&&t.appendChild(s),s;var p=e.tag;if(null===p)return J(e,t);if(l(p))return K(e,p,e.attrs||{},e.hooks,e.children,t,u,d);a=a||"svg"===p?re:"math"===p?te:null;var v=e.tpl;if(o(v)||o(v.dom)){if(!f(p)||""===p)throw Error("Inferno Error: Expected function or string for element tag type");s=g(p,a)}else s=v.dom.cloneNode(!0);var h=e.children,m=e.attrs,y=e.events,C=e.hooks,k=e.className,b=e.style;return o(C)||(o(C.created)||C.created(s),o(C.attached)||u.addListener(function(){C.attached(s)})),o(y)||q(y,e),i(h)||G(e,h,s,a,u,d,c),o(m)||R(m,s,c),o(k)||(s.className=k),o(b)||U(null,b,s),e.dom=s,null!==t&&t.appendChild(s),s}function R(e,n,t){for(var r=Object.keys(e),o=0;o<r.length;o++){var i=r[o];"ref"===i?H(t,e[i],n):_(i,e[i],n)}}function X(e){for(var n=0;n<le.length;n++){var t=le[n];if(t.dom===e)return t}return null}function Y(e){for(var n=0;n<le.length;n++){var t=le[n];if(t===e)return void le.splice(n,1)}}function Z(e,n){var t=X(n),r=new ee;null===t?(Q(e,n,null,r,{},null),r.trigger(),le.push({node:e,dom:n})):(S(t.node,e,n,null,r,{},null),r.trigger(),null===e&&Y(t),t.node=e)}var $={};$.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},$.classCallCheck=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},$.createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),$.extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};var ee=function(){function e(){$.classCallCheck(this,e),this._listeners=[]}return $.createClass(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"trigger",value:function(){for(var e=0;e<this._listeners.length;e++)this._listeners[e]()}}]),e}(),ne={},te="http://www.w3.org/1998/Math/MathML",re="http://www.w3.org/2000/svg",oe={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},ie=!0,le=[],ae={render:Z};return ae});