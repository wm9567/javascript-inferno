!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoDOM=n()}(this,function(){"use strict";function e(e,t){return o(e)||(n(e)&&e.length>0||!n(e))&&(t?t.children=e:t={children:e}),t}function n(e){return e.constructor===Array}function t(e){return e&&e.prototype&&e.prototype.render}function r(e){return"string"==typeof e||"number"==typeof e}function o(e){return void 0===e||null===e}function l(e){return void 0===e||null===e||e===!1}function i(e){return"function"==typeof e}function a(e){return"o"===e[0]&&"n"===e[1]&&e.length>3}function u(e){return"string"==typeof e}function d(e){return"number"==typeof e}function f(e,n,t){t?e.insertBefore(n,t):e.appendChild(n)}function c(e,n){return n?document.createElementNS(n,e):document.createElement(e)}function s(e,n,t){if(t)""!==e?n.textContent=e:n.appendChild(document.createTextNode(""));else{var r=document.createTextNode(e);n.appendChild(r)}}function v(e,n,t,r,o,l){var i=W(n,null,r,o,l);t.replaceChild(i,e.dom),n.dom=i}function p(e){if(!l(e)){t(e.instance)&&(e.instance.componentWillUnmount(),e.instance._unmounted=!0),e.events&&e.events.willDetach&&e.events.willDetach(e.dom),e.events&&e.events.componentWillUnmount&&e.events.componentWillUnmount(e.dom,e.events);var r=e.children;if(r)if(n(r))for(var o=0;o<r.length;o++)p(r[o]);else p(r)}}function m(e,n){var t=e.dom;p(e),t===n?t.innerHTML="":(n.removeChild(t),q&&O(e))}function h(e,n,t,r,o,i){return l(e)?void W(n,t,r,o):l(n)?void m(e,t):void x(e,n,t,r,o,i,null!==e.tpl&&null!==n.tpl)}function y(e,n,t){if(u(n))t.style.cssText=n;else if(n){for(var r=Object.keys(n),o=0;o<r.length;o++){var l=r[o],i=n[l];d(i)&&(i+="px"),t.style[l]=i}if(e)for(var a=Object.keys(e),o=0;o<a.length;o++){var l=a[o];n[l]||(t.style[l]="")}}else e&&t.removeAttribute("style")}function g(e,n,t,r){if(!a(e)){if(V[e])return void(r[e]=t);var l=null;":"===e[5]&&-1!==e.indexOf("xlink:")&&(l="http://www.w3.org/1999/xlink"),t===!1||o(t)?r.removeAttribute(e):l?t===!0?r.setAttributeNS(l,e,e):r.setAttributeNS(l,e,t):t===!0?r.setAttribute(e,e):r.setAttribute(e,t)}}function b(n,r,o,l,i,a,u,d,f,c){if(i=e(u,i),t(r)){var s=o.props,v=o.state,p=o.state,m=o.getChildContext();m&&(c=K.extends({},c,m)),o.context=c;var h=o._updateComponent(v,p,s,i);h&&(x(n,h,d,null,f,c,!0),n.dom=h.dom,o._lastNode=h)}else{var y=!0;if(a&&a.componentShouldUpdate&&(y=a.componentShouldUpdate(n.dom,l,i)),y!==!1){a&&a.componentWillUpdate&&a.componentWillUpdate(n.dom,l,i);var h=r(i),g=n.dom;h.dom=g,x(o,h,g,null,f,c,!0),n.instance=h,a&&a.componentDidUpdate&&a.componentDidUpdate(n.dom,l,i)}}}function k(e,t,o,i,a,u,d){var f=e.length,c=t.length;if(f>c)for(var s=void 0;f!==c;){var v=e[f-1];l(v)||o.removeChild((s=v.dom)||s&&(s=s.previousSibling)||(s=o.lastChild)),f--}else if(c>f)for(var p=0;f!==c;){var m=t[f+p];if(l(m));else{var y=W(m,null,i,i,a,u);o.appendChild(y)}c--,p++}for(var g=void 0,b=0;c>b;b++){var v=e[b],m=t[b];if(v!==m)if(l(m))l(v)||(g=g||o.childNodes,g[b+d].textContent="");else if(l(v))if(r(m))g=g||o.childNodes,g[b+d].textContent=m;else{var y=W(m,null,i,i,a,u);o.replaceChild(y,o.childNodes[b])}else r(m)?(g=g||o.childNodes,g[b+d].textContent=m):n(m)?k(v,m,o,i,a,u,b):h(v,m,o,i,a,u)}}function C(e,n,t,r,o,l,i){var a=!1,u=0,d=0,c=n.length,s=e.length,v=void 0,p=void 0;if(0===c&&s>=5){if(q)for(var h=0;s>h;h++)O(e[h]);return void(t.textContent="")}var y=c-1,g=s-1,b=s>0?e[d]:null,k=c>0?n[u]:null,C=void 0,w=void 0,N=void 0;e:for(;!a&&y>=u&&g>=d;){for(a=!0;k.key===b.key;){if(x(b,k,t,r,o,l,!0),u++,d++,u>y||d>g)break e;k=n[u],b=e[d],a=!1}for(C=n[y],w=e[g];C.key===w.key;){if(x(w,C,t,r,o,l,!0),y--,g--,u>y||d>g)break e;C=n[y],w=e[g],a=!1}for(;C.key===b.key;){if(N=c>y+1?n[y+1].dom:i,x(b,C,t,r,o,l,!0),f(t,C.dom,N),y--,d++,u>y||d>g)break e;C=n[y],b=e[d],a=!1}for(;k.key===w.key;){if(N=e[d].dom,x(w,k,t,r,o,l,!0),f(t,k.dom,N),u++,g--,u>y||d>g)break e;k=n[u],w=e[g],a=!1}}if(d>g){if(y>=u)for(N=c>y+1?n[y+1].dom:i;y>=u;u++)v=n[u],f(t,W(v,null,r,o,l),N)}else if(u>y)for(;g>=d;d++)p=e[d],m(p,t);else{for(var U={},h=d;g>=h;h++)p=e[h],U[p.key]=p;for(var j=c>y+1?n[y+1]:null,h=y;h>=u;h--){v=n[h];var M=v.key;p=U[M],void 0!==p?(U[M]=null,x(p,v,t,r,o,l,!0),v.dom.nextSibling!==j&&(j=j&&j.dom||i,f(t,v.dom,j)),j=v):(j=j&&j.dom||i,f(t,W(v,null,r,o,l),j)),j=v}for(var h=d;g>=h;h++)p=e[h],null!==U[p.key]&&m(p,t)}}function x(e,n,l,a,u,d,f){if(n!==!1&&null!==n){if(r(e))return void(r(n)&&(l.firstChild.nodeValue=n));var c=n.tag||(f&&n.tpl?n.tpl.tag:null),s=e.tag||(f&&e.tpl?e.tpl.tag:null),p=n.events;if(p&&p.willUpdate&&p.willUpdate(e.dom),a=a||"svg"===c?H:"math"===c?B:null,s!==c)return void(i(s)&&!i(c)?t(s)?x(e.instance._lastNode,n,l,a,u,d,!0):x(e.instance,n,l,a,u,d,!0):v(e,n,l,a,u,d));if(o(s))return void(n.dom=e.dom);if(i(s)&&i(c))return n.instance=e.instance,n.dom=e.dom,void b(n,n.tag,n.instance,e.attrs,n.attrs,n.events,n.children,l,u,d);var m=e.dom;n.dom=m,w(e,n,m,a,u,d,f);var h=n.className,g=n.style;e.className!==h&&(o(h)?m.removeAttribute("class"):m.className=h),e.style!==g&&y(e.style,g,m),N(e,n,m),U(e,n,m),p&&p.didUpdate&&p.didUpdate(m)}}function w(e,t,i,a,u,d,f){var c=t.children,s=e.children;if(s!==c)if(l(s))r(c)?i.textContent=c:c&&n(c)?S(c,i,a,u,d):c&&"object"===("undefined"==typeof c?"undefined":K.typeof(c))&&W(c,i,a,u,d);else if(l(c))i.textContent="";else if(n(s))if(n(c)){var v=c.length&&c[0]&&!o(c[0].key)||s.length&&s[0]&&!o(s[0].key);v?C(s,c,i,a,u,d,null):k(s,c,i,a,u,d,null)}else k(s,[c],i,a,u,d,null);else n(c)?k([s],c,i,a,u,d,null):x(s,c,i,a,u,d,f)}function N(e,n,t){var r=n.attrs,l=e.attrs;if(r){var i=Object.keys(r);if(0!==i.length)for(var a=0;a<i.length;a++){var u=i[a],d=l&&l[u],f=r[u];d!==f&&g(u,d,f,t,null==e.tag)}}if(l){var c=Object.keys(l);if(0!==c.length)for(var a=0;a<c.length;a++){var u=c[a];(!r||o(r[u]))&&t.removeAttribute(u)}}}function U(e,n,t){}function j(e,n,t){var r=e.key,o=e.tpl,l=void 0;if(o){if(null!==r){var i=o.pools.keyed[r];l=i&&i.pop()}else{var i=o.pools.nonKeyed;l=i&&i.pop()}if(l)return x(l,e,null,null,n,t,!0),e.dom}}function O(e){var n=e.key,t=e.tpl;if(t){var r=t.pools;if(null===n){var o=r.nonKeyed;o&&o.push(e)}else{var l=r.keyed;(l[n]||(l[n]=[])).push(e)}}}function M(e,n,t){if(z[e]){var r=z[e];r.push({callback:t,target:n})}else document.addEventListener(e,function(n){for(var t=z[e],r=t.length-1;r>-1;r--){var o=t[r];o.target===n.target&&o.callback(n)}},!1),z[e]=[]}function S(e,t,o,l,i){if(n(e))for(var a=0;a<e.length;a++){var u=e[a];r(u)?s(u,t,!1):u&&n(u)?S(u,t,o,l,i):W(u,t,o,l,i)}else r(e)?s(e,t,!0):W(e,t,o,l,i)}function _(n,r,o,l,i,a,u,d){if(o=e(i,o),t(r)){var f=new r(o);f._diffNodes=x;var c=f.getChildContext();c&&(d=K.extends({},d,c)),f.context=d,f.componentWillMount();var s=f.render(),v=void 0;return s&&(v=W(s,null,null,u,d),f._lastNode=s,a&&a.appendChild(v),u.addListener(f.componentDidMount)),n.dom=v,n.instance=f,v}var p=function(){var e=void 0;l&&(l.componentWillMount&&l.componentWillMount(null,o),l.componentDidMount&&u.addListener(function(){l.componentDidMount(e,o)}));var t=r(o);return e=W(t,null,null,u,d),n.instance=t,a&&a.appendChild(e),n.dom=e,{v:e}}();return"object"===("undefined"==typeof p?"undefined":K.typeof(p))?p.v:void 0}function A(e,n,t){for(var r=0;r<n.length;r++){var o=n[r];M(o,t,e[o])}}function D(e,n){var t=document.createTextNode("");return null!==n&&n.appendChild(t),e&&(e.dom=t),t}function W(e,t,a,d,f){var s=void 0;if(l(e)||n(e))return D(e,t);if(r(e)){var v=document.createTextNode(e);return null!==t&&t.appendChild(v),v}if(q&&(s=j(e,d,f)))return t&&t.appendChild(s),s;var p=e.tpl,m=e.tag;if(i(m))return _(e,m,e.attrs,e.events,e.children,t,d,f);if(null===m)return D(e,t);if(a=a||"svg"===m?H:"math"===m?B:null,p&&p.dom)s=p.dom.cloneNode(!0);else{if(!u(m))throw Error("Inferno Error: Expected function or string for element tag type");s=c(m,a)}var h=e.children,g=e.attrs,b=e.events,k=e.className,C=e.style;if(b){var x=Object.keys(b),w=x.length;b.click&&(M("click",s,b.click),w--),b.created&&(b.created(s),w--),b.attached&&(d.addListener(function(){b.attached(s)}),w--),w>0&&A(b,x,s)}return l(h)||S(h,s,a,d,f),g&&E(g,s),o(k)||(s.className=k),o(C)||y(null,C,s),e.dom=s,null!==t&&t.appendChild(s),s}function E(e,n){for(var t=Object.keys(e),r=0;r<t.length;r++){var o=t[r];g(o,null,e[o],n)}}function L(e){for(var n=0;n<F.length;n++){var t=F[n];if(t.dom===e)return t}return null}function T(e){for(var n=0;n<F.length;n++){var t=F[n];if(t===e)return F.splice(n,1),!0}return!1}function I(e,n){var t=L(n),r=new P;o(t)?(W(e,n,null,r,{}),r.trigger(),F.push({node:e,dom:n})):(h(t.node,e,n,null,r,{}),r.trigger(),null===e&&T(t),t.node=e)}var K={};K.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},K.classCallCheck=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},K.createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),K.extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};var P=function(){function e(){K.classCallCheck(this,e),this._listeners=[]}return K.createClass(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"trigger",value:function(){for(var e=0;e<this._listeners.length;e++)this._listeners[e]()}}]),e}(),B="http://www.w3.org/1998/Math/MathML",H="http://www.w3.org/2000/svg",V={checked:1,selected:1,disabled:1,value:1},q=!0,z={},F=[],G={render:I};return G});