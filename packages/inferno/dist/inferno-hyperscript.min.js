!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):n.InfernoHyperscript=r()}(this,function(){"use strict";function n(n){return n instanceof Array}function r(n){return!s(n.prototype)&&!s(n.prototype.render)}function e(n){return u(n)||l(n)}function t(n){return s(n)||c(n)}function i(n){return c(n)||n===!1||o(n)||s(n)}function u(n){return"string"==typeof n}function l(n){return"number"==typeof n}function c(n){return null===n}function o(n){return n===!0}function s(n){return void 0===n}function f(r,e){for(var i=[],u=arguments.length-2;u-- >0;)i[u]=arguments[u+2];var l=i;i.length>0&&!c(i[0])&&(e||(e={}),1===i.length&&(l=i[0]),s(e.children)?e.children=l:n(l)?n(e.children)?e.children=e.children.concat(l):e.children=[e.children].concat(l):n(e.children)?e.children.push(l):(e.children=[e.children],e.children.push(l))),l=null;var o;if(n(r))o=r.map(function(n){return f(n)});else if(t(e)&&t(l))o=Object.assign({},r);else{var a=r.flags;12&a?o=p(a,r.type,Object.assign({},r.props,e),null,r.key,r.ref):1986&a&&(o=p(a,r.type,Object.assign({},r.props,e),l||e&&e.children||r.children,r.key,r.ref))}return o.dom=null,o}function a(n,r,t){for(;t<n.length;t++){var u=n[t];i(u)||(Array.isArray(u)?a(u,r,0):(e(u)?u=v(u):y(u)&&u.dom&&(u=f(u)),r.push(u)))}}function d(n){for(var r,t=0;t<n.length;t++){var u=n[t];if(i(u)||Array.isArray(u)){var l=(r||n).slice(0,t);return a(n,l,t),l}e(u)?(r||(r=n.slice(0,t)),r.push(v(u))):y(u)&&u.dom?(r||(r=n.slice(0,t)),r.push(f(u))):r&&r.push(f(u))}return r||n}function h(r){var e=r.props,i=r.children;e&&(t(i)&&!t(e.children)&&(r.children=e.children),e.ref&&(r.ref=e.ref),t(e.key)||(r.key=e.key)),n(i)&&(r.children=d(i))}function p(n,e,t,i,u,l,o){c(n)&&(n=r(e)?4:8);var f={children:s(i)?null:i,dom:null,flags:n||0,key:void 0===u?null:u,props:t||null,ref:l||null,type:e};return o||h(f),f}function v(n){return p(1,null,null,n)}function y(n){return!!n.flags}function g(n,r){if(!n)return"div";var e=r&&s(r.id),t=n.split(A),i=null;j.test(t[1])&&(i="div");for(var u,l=0;l<t.length;l++){var c=t[l];if(c){var o=c.charAt(0);i?"."===o?(u=u||[],u.push(c.substring(1,c.length))):"#"===o&&e&&(r.id=c.substring(1,c.length)):i=c}}return u&&(r.className&&u.push(r.className),r.className=u.join(" ")),i?i.toLowerCase():"div"}function k(r){return e(r)||r&&n(r)}function m(n,r){n=n||{};var e=u(r)?g(r,n):r,t={},i=null,l=null,c=null;for(var o in n)"key"===o?i=n[o]:"ref"===o?l=n[o]:"onComponent"===o.substr(0,11)?(l||(l={}),l[o]=n[o]):"hooks"===o?l=n[o]:"children"===o?c=n[o]:t[o]=n[o];return{tag:e,props:t,key:i,ref:l,children:c}}function b(n,e,t,i){!t&&k(e)&&(t=e,e={});var l=m(e,n),c=l.tag,o=l.props,s=l.key,f=l.ref,a=l.children;if(u(c)){var d=2;switch(c){case"svg":d=64;break;case"input":d=256;break;case"textarea":d=512;break;case"select":d=1024}return p(d,c,o,t||a,s,f)}var h=r(c)?4:8;return p(h,c,o,null,s,f)}var A=/([\.#]?[a-zA-Z0-9_:-]+)/,j=/^\.|#/;return b});
