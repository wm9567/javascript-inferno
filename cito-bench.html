<html>
<head>
  <title>Cito example</title>
</head>
<body>
  <div id="app"></div>
  <div style="margin-top: 20px;" id="time"></div>
  <script src="cito.js"></script>
  <script>

    var timeDiv = document.getElementById("time");

    var lastTime = 0;

    function logTimeStart() {
      lastTime = window.performance.now();
    }

    function logTimeEnd(event) {
      var time = Math.round(window.performance.now() - lastTime) + "ms";
      var newTimeDiv = document.createElement("div");
      newTimeDiv.textContent = event + " - " + time
      timeDiv.appendChild(newTimeDiv);
    }

    var myName = "Dominic";
    var className = "foo";
    var items = [
      "Dominic",
      "Jemma",
      "Charlie",
      "Harry"
    ];

    var rootNode = null;

    function update() {

      var vDom = {
        tag: "div",
        attrs: {},
        children: [
          {
            tag: "span",
            attrs: {
              "class": className
            },
            children: myName
          },
          {
            tag: "span",
            attrs: {
              "class": className
            },
            children: myName
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "span",
            attrs: {
              "class": className
            },
            children: myName
          },
          {
            tag: "span",
            attrs: {
              "class": className
            },
            children: myName
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          },
          {
            tag: "div",
            attrs: {
              "class": "test"
            },
            children: "static node"
          }
        ]
      }

      if(rootNode === null) {
        rootNode = cito.vdom.append(document.getElementById('app'), vDom);
      } else {
        cito.vdom.update(rootNode, vDom);
      }
    }

    //has to do it one time to build the dom
    update();

    console.log("Update with no data changed");
    logTimeStart();
    for(var i = 0; i < 10000; i++) {
      update();
    }
    logTimeEnd("Cito update");

    console.log("Update with only data changed");
    logTimeStart();
    for(var i = 0; i < 10000; i++) {
      myName = "Rand " + (Math.round(Math.random() * 10000));
      update();
    }
    logTimeEnd("Cito update");

    console.log("Update with both child and attrs data changed");
    logTimeStart();
    for(var i = 0; i < 10000; i++) {
      myName = "Rand " + (Math.round(Math.random() * 10000));
      className = "foo-" + i;
      update();
    }
    logTimeEnd("Cito update");

  </script>
</body>
</html>
