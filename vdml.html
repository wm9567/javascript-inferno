<html>
  <script src="bundle2.js"></script>
  <script>

    function t(parts) {
      var output = "";
      var i = 0;
      for(i = 0; i < parts.length; i++) {
        output += parts[i];
        if(arguments[i + 1]) {
          output += "/* " + (i + 1) + " */";//arguments[i + 1];
        }
      }
      output = msx.transform(output, {harmony: true});
      //then replace
      for(i = 0; i < parts.length; i++) {
        if(arguments[i + 1]) {
          output = output.replace("\"/* " + (i + 1) + " */\"", arguments[i + 1]);
          if(output.indexOf("/* " + (i + 1) + " */")  > -1) {
            output = "[" + output.replace("/* " + (i + 1) + " */", arguments[i + 1] + ",") + "]";
          }
        }
      }
      return output;
    }

    var test = t`
      ${ t`<div id="test2"></div>` }
      <div class="test">
        ${ t`<div id="test2"></div>` }
        <form>
          <input name="foo" />
          <button>Test button!</button>
        </form>
      </div>
    `;

    console.log(test)
  </script>
</html>
