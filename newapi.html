<html>
<head>
  <title>Inferno example</title>
  <link rel="stylesheet" href="bootstrap.min.css">
</head>
<body>
  <example-app id="app" message="Hello world"></example-app>

  <script src="inferno2.js"></script>
  <script src="t7.js"></script>
  <script>

    var InfernoExample = Inferno.createComponent({
      constructor: function(props) {
        this.state.name = "Test";
        this.state.className = "foo";
        this.state.textFieldValue = "Text!";
        this.state.people = [
          "Bob",
          "Dominic",
          "John",
          "Edward"
        ],
        this.state.isOn = false;
      },
      onPropsChange: function(newProps) {
        if(this.props.people !== newProps.people) {
          this.setState({
            people: newProps.people
          });
        }
        if(this.props.switch !== newProps.isOn) {
          this.setState({
            isOn: newProps.isOn
          });
        }
      },
      render: function() {
        return t7`
          <div class=${ this.state.className }>
            <span id="bar">${ this.state.name }</span>
            <div id="time">The time is ${ this.props.time }</div>
            ${ this._renderForm() }
            ${ this.state.name }
            ${this.state.isOn === false
              ? t7`<div>Switch is off!</div>`
              : t7`<div>Switch is on!</div>`
            }
            <ul>
              ${ this.state.people.map(this._renderPerson) }
            </ul>
          </div>
        `;
      },
      _renderPerson: function(person) {
        return t7`<li>${ person }</li>`;
      },
      _renderForm: function() {
        return t7`
          <form>
            <input type="text" value=${ this.state.textFieldValue } />
          </form>
        `;
      }
    });

    Inferno.registerComponent("example-app", InfernoExample);

    var appElement = document.getElementById("app");

    var odd = true;
    var isOn = false;

    setInterval(function() {
      //uses valid, currently widely used DOM accessors
      var date = new Date();
      var people = [];
      odd = !odd;
      if(!odd) {
        people = [
          "Bob",
          "Dominic",
          "John",
          "Edward"
        ]
      } else {
        people = [
          "Jemma",
          "Charlie",
          "Harry",
          "Kieria",
          "Paul",
          "Ken"
        ]
      }

      var i = 0;

      appElement.setProps({
        time: date.toTimeString(),
        people: people,
        isOn: !isOn,
        textFieldValue: "value " + i
      });
      i++;
    }, 500);

  </script>
</body>
</html>
