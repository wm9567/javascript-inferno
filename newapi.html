<html>
<head>
  <title>Inferno example</title>
  <link rel="stylesheet" href="bootstrap.min.css">
</head>
<body>
  <example-app message="Hello world"></example-app>
  <div id="app"></div>

  <script src="inferno2.js"></script>
  <script src="t7.js"></script>
  <script>
    "use strict";

    var closureVar = 1;

    class InfernoExample extends Inferno.Component {
        constructor() {
          super();
          this.name = "Test";
          this.className = "foo";
          this.textFieldValue = "Text!";
          this.people = [
            "Bob",
            "Dominic",
            "John",
            "Edward"
          ];
          this.time = null;
          this.isOn = false;
        }
        attached(props) {
          debugger;
        }
        detached() {

        }
        update(oldProps, newProps) {
          debugger;
        }
        render() {
          if(closureVar % 5 === 1) {
            return t7`
              <div class=${ this.className }>
                <span id="bar">${ this.name }</span>
                <div id="time">The time is ${ this.time }</div>
                ${ this._renderForm() }
                ${ this.name }
                ${this.isOn === false
                  ? t7`<div>Switch is off!</div>`
                  : t7`<div>Switch is on! <span>${ this.time }</span></div>`
                }
                <ul>
                  ${ this.people.map(this._renderPerson) }
                </ul>
              </div>
            `;
          } else {
            return t7`
              <div>Lol</div>
            `;
          }
        }
        _renderPerson(person) {
          if(closureVar % 3 === 1) {
            return t7`<li>${ person }, the number is ${ closureVar }<div>foo</div></li>`;
          } else {
            return t7`<li>${ person }, the magical number is ${ closureVar }<div>foo</div></li>`;
          }
        }
        _renderForm() {
          if(closureVar % 3 === 1) {
            return t7`
              <form>
                <input type="text" value=${ this.textFieldValue } />
              </form>
            `;
          } else {
            return t7`
              <h2>No form!</h2>
            `;
          }
        }
    }

    Inferno.register("example-app", InfernoExample);

    setInterval(function() {
      var date = new Date();
      Inferno.render(function() {
        return t7`<example-app date=${ date }></example-app>`
      }, document.getElementById("app"));
    }, 1000);

    // var appElement = document.getElementById("app");
    //
    // var odd = true;
    // var isOn = false;
    //
    // setInterval(function() {
    //   //uses valid, currently widely used DOM accessors
    //   var date = new Date();
    //   var people = [];
    //   odd = !odd;
    //   if(!odd) {
    //     people = [
    //       "Bob",
    //       "Dominic",
    //       "John",
    //       "Edward"
    //     ]
    //   } else {
    //     people = [
    //       "Jemma",
    //       "Charlie",
    //       "Harry",
    //       "Kieria",
    //       "Paul",
    //       "Ken"
    //     ]
    //   }
    //
    //   var i = 0;
    //   isOn = !isOn;
    //   closureVar++;
    //
    //   console.time("update");
    //
    //   appElement.setProps({
    //     time: date.toTimeString(),
    //     people: people,
    //     isOn: isOn,
    //     textFieldValue: "value " + i
    //   });
    //
    //   console.timeEnd("update");
    //
    //   i++;
    // }, 500);

  </script>
</body>
</html>
